var bm=Object.create;var ls=Object.defineProperty;var Sm=Object.getOwnPropertyDescriptor;var wm=Object.getOwnPropertyNames;var Tm=Object.getPrototypeOf,Pm=Object.prototype.hasOwnProperty;var qm=(t,e)=>()=>(t&&(e=t(t=0)),e);var S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Jd=(t,e)=>{for(var n in e)ls(t,n,{get:e[n],enumerable:!0})},Yd=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of wm(e))!Pm.call(t,i)&&i!==n&&ls(t,i,{get:()=>e[i],enumerable:!(r=Sm(e,i))||r.enumerable});return t};var Zd=(t,e,n)=>(n=t!=null?bm(Tm(t)):{},Yd(e||!t||!t.__esModule?ls(n,"default",{value:t,enumerable:!0}):n,t)),ds=t=>Yd(ls({},"__esModule",{value:!0}),t);var Et=S(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.asPromise=ke.thenable=ke.typedArray=ke.stringArray=ke.array=ke.func=ke.error=ke.number=ke.string=ke.boolean=void 0;function xm(t){return t===!0||t===!1}ke.boolean=xm;function ef(t){return typeof t=="string"||t instanceof String}ke.string=ef;function Em(t){return typeof t=="number"||t instanceof Number}ke.number=Em;function km(t){return t instanceof Error}ke.error=km;function tf(t){return typeof t=="function"}ke.func=tf;function nf(t){return Array.isArray(t)}ke.array=nf;function Om(t){return nf(t)&&t.every(e=>ef(e))}ke.stringArray=Om;function Im(t,e){return Array.isArray(t)&&t.every(e)}ke.typedArray=Im;function rf(t){return t&&tf(t.then)}ke.thenable=rf;function Fm(t){return t instanceof Promise?t:rf(t)?new Promise((e,n)=>{t.then(r=>e(r),r=>n(r))}):Promise.resolve(t)}ke.asPromise=Fm});var gn=S(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});var Ho;function Wo(){if(Ho===void 0)throw new Error("No runtime abstraction layer installed");return Ho}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Ho=n}t.install=e})(Wo||(Wo={}));Uo.default=Wo});var Ko=S(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.Disposable=void 0;var Nm;(function(t){function e(n){return{dispose:n}}t.create=e})(Nm=li.Disposable||(li.Disposable={}))});var sf=S(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.AbstractMessageBuffer=void 0;var Mm=13,Lm=10,Am=`\r
`,zo=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];r=0;t:for(;r<u.length;){switch(u[r]){case Mm:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case Lm:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}i+=u.byteLength,n++}if(e!==4)return;let s=this._read(i+r),o=new Map,a=this.toString(s,"ascii").split(Am);if(a.length<2)return o;for(let u=0;u<a.length-2;u++){let l=a[u],h=l.indexOf(":");if(h===-1)throw new Error("Message header must separate key and value using :");let g=l.substr(0,h),p=l.substr(h+1).trim();o.set(g,p)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);n.set(o,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else n.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return n}};fs.AbstractMessageBuffer=zo});var cf=S(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});var jm=gn(),of=require("util"),Vn=Ko(),$m=sf(),wr=class extends $m.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return wr.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new of.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};wr.emptyBuffer=Buffer.allocUnsafe(0);var Go=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Vn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Vn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Vn.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Vn.Disposable.create(()=>this.stream.off("data",e))}},Bo=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Vn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Vn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Vn.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let s=o=>{o==null?r():i(o)};typeof e=="string"?this.stream.write(e,n,s):this.stream.write(e,s)})}end(){this.stream.end()}},af=Object.freeze({messageBuffer:Object.freeze({create:t=>new wr(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new of.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new Go(t),asWritableStream:t=>new Bo(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:()=>clearImmediate(n)}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:()=>clearInterval(r)}}})});function Vo(){return af}(function(t){function e(){jm.default.install(af)}t.install=e})(Vo||(Vo={}));Xo.default=Vo});var Tr=S(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.stringArray=et.array=et.func=et.error=et.number=et.string=et.boolean=void 0;function Hm(t){return t===!0||t===!1}et.boolean=Hm;function uf(t){return typeof t=="string"||t instanceof String}et.string=uf;function Wm(t){return typeof t=="number"||t instanceof Number}et.number=Wm;function Um(t){return t instanceof Error}et.error=Um;function Km(t){return typeof t=="function"}et.func=Km;function lf(t){return Array.isArray(t)}et.array=lf;function zm(t){return lf(t)&&t.every(e=>uf(e))}et.stringArray=zm});var ya=S($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.Message=$.NotificationType9=$.NotificationType8=$.NotificationType7=$.NotificationType6=$.NotificationType5=$.NotificationType4=$.NotificationType3=$.NotificationType2=$.NotificationType1=$.NotificationType0=$.NotificationType=$.RequestType9=$.RequestType8=$.RequestType7=$.RequestType6=$.RequestType5=$.RequestType4=$.RequestType3=$.RequestType2=$.RequestType1=$.RequestType=$.RequestType0=$.AbstractMessageSignature=$.ParameterStructures=$.ResponseError=$.ErrorCodes=void 0;var Xn=Tr(),df;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(df=$.ErrorCodes||($.ErrorCodes={}));var di=class extends Error{constructor(e,n,r){super(n),this.code=Xn.number(e)?e:df.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,di.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};$.ResponseError=di;var Ke=class{constructor(e){this.kind=e}static is(e){return e===Ke.auto||e===Ke.byName||e===Ke.byPosition}toString(){return this.kind}};$.ParameterStructures=Ke;Ke.auto=new Ke("auto");Ke.byPosition=new Ke("byPosition");Ke.byName=new Ke("byName");var Ce=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return Ke.auto}};$.AbstractMessageSignature=Ce;var Qo=class extends Ce{constructor(e){super(e,0)}};$.RequestType0=Qo;var Jo=class extends Ce{constructor(e,n=Ke.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};$.RequestType=Jo;var Yo=class extends Ce{constructor(e,n=Ke.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};$.RequestType1=Yo;var Zo=class extends Ce{constructor(e){super(e,2)}};$.RequestType2=Zo;var ea=class extends Ce{constructor(e){super(e,3)}};$.RequestType3=ea;var ta=class extends Ce{constructor(e){super(e,4)}};$.RequestType4=ta;var na=class extends Ce{constructor(e){super(e,5)}};$.RequestType5=na;var ra=class extends Ce{constructor(e){super(e,6)}};$.RequestType6=ra;var ia=class extends Ce{constructor(e){super(e,7)}};$.RequestType7=ia;var sa=class extends Ce{constructor(e){super(e,8)}};$.RequestType8=sa;var oa=class extends Ce{constructor(e){super(e,9)}};$.RequestType9=oa;var aa=class extends Ce{constructor(e,n=Ke.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};$.NotificationType=aa;var ca=class extends Ce{constructor(e){super(e,0)}};$.NotificationType0=ca;var ua=class extends Ce{constructor(e,n=Ke.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};$.NotificationType1=ua;var la=class extends Ce{constructor(e){super(e,2)}};$.NotificationType2=la;var da=class extends Ce{constructor(e){super(e,3)}};$.NotificationType3=da;var fa=class extends Ce{constructor(e){super(e,4)}};$.NotificationType4=fa;var ha=class extends Ce{constructor(e){super(e,5)}};$.NotificationType5=ha;var pa=class extends Ce{constructor(e){super(e,6)}};$.NotificationType6=pa;var ga=class extends Ce{constructor(e){super(e,7)}};$.NotificationType7=ga;var ma=class extends Ce{constructor(e){super(e,8)}};$.NotificationType8=ma;var va=class extends Ce{constructor(e){super(e,9)}};$.NotificationType9=va;var Gm;(function(t){function e(i){let s=i;return s&&Xn.string(s.method)&&(Xn.string(s.id)||Xn.number(s.id))}t.isRequest=e;function n(i){let s=i;return s&&Xn.string(s.method)&&i.id===void 0}t.isNotification=n;function r(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(Xn.string(s.id)||Xn.number(s.id)||s.id===null)}t.isResponse=r})(Gm=$.Message||($.Message={}))});var _a=S(mn=>{"use strict";var ff;Object.defineProperty(mn,"__esModule",{value:!0});mn.LRUCache=mn.LinkedMap=mn.Touch=void 0;var ct;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(ct=mn.Touch||(mn.Touch={}));var hs=class{constructor(){this[ff]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,n=ct.None){let r=this._map.get(e);if(!!r)return n!==ct.None&&this.touch(r,n),r.value}set(e,n,r=ct.None){let i=this._map.get(e);if(i)i.value=n,r!==ct.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case ct.None:this.addItemLast(i);break;case ct.First:this.addItemFirst(i);break;case ct.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(ff=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==ct.First&&n!==ct.Last)){if(n===ct.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===ct.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};mn.LinkedMap=hs;var Ca=class extends hs{constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=ct.AsNew){return super.get(e,n)}peek(e){return super.get(e,ct.None)}set(e,n){return super.set(e,n,ct.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};mn.LRUCache=Ca});var qr=S(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.Emitter=Qn.Event=void 0;var Bm=gn(),Vm;(function(t){let e={dispose(){}};t.None=function(){return e}})(Vm=Qn.Event||(Qn.Event={}));var Da=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=r.length;s<o;s++)try{n.push(r[s].apply(i[s],e))}catch(a){(0,Bm.default)().console.error(a)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Pr=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new Da),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,n),i.dispose=Pr._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Qn.Emitter=Pr;Pr._noop=function(){}});var wa=S(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.CancellationTokenSource=Jn.CancellationToken=void 0;var Xm=gn(),Qm=Tr(),Ra=qr(),ba;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ra.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ra.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||Qm.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(ba=Jn.CancellationToken||(Jn.CancellationToken={}));var Jm=Object.freeze(function(t,e){let n=(0,Xm.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),ps=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Jm:(this._emitter||(this._emitter=new Ra.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Sa=class{get token(){return this._token||(this._token=new ps),this._token}cancel(){this._token?this._token.cancel():this._token=ba.Cancelled}dispose(){this._token?this._token instanceof ps&&this._token.dispose():this._token=ba.None}};Jn.CancellationTokenSource=Sa});var hf=S(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.ReadableStreamMessageReader=vn.AbstractMessageReader=vn.MessageReader=void 0;var Pa=gn(),xr=Tr(),Ta=qr(),Ym;(function(t){function e(n){let r=n;return r&&xr.func(r.listen)&&xr.func(r.dispose)&&xr.func(r.onError)&&xr.func(r.onClose)&&xr.func(r.onPartialMessage)}t.is=e})(Ym=vn.MessageReader||(vn.MessageReader={}));var gs=class{constructor(){this.errorEmitter=new Ta.Emitter,this.closeEmitter=new Ta.Emitter,this.partialMessageEmitter=new Ta.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${xr.string(e.message)?e.message:"unknown"}`)}};vn.AbstractMessageReader=gs;var qa;(function(t){function e(n){let r,i,s,o=new Map,a,u=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(s=n.contentDecoder,o.set(s.name,s)),n.contentDecoders!==void 0)for(let l of n.contentDecoders)o.set(l.name,l);if(n.contentTypeDecoder!==void 0&&(a=n.contentTypeDecoder,u.set(a.name,a)),n.contentTypeDecoders!==void 0)for(let l of n.contentTypeDecoders)u.set(l.name,l)}return a===void 0&&(a=(0,Pa.default)().applicationJson.decoder,u.set(a.name,a)),{charset:r,contentDecoder:s,contentDecoders:o,contentTypeDecoder:a,contentTypeDecoders:u}}t.fromOptions=e})(qa||(qa={}));var xa=class extends gs{constructor(e,n){super(),this.readable=e,this.options=qa.fromOptions(n),this.buffer=(0,Pa.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let o=parseInt(s);if(isNaN(o))throw new Error("Content-Length value must be a number.");this.nextMessageLength=o}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(n):r=Promise.resolve(n),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Pa.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};vn.ReadableStreamMessageReader=xa});var pf=S(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.Semaphore=void 0;var Zm=gn(),Ea=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Zm.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};ms.Semaphore=Ea});var yf=S(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.WriteableStreamMessageWriter=yn.AbstractMessageWriter=yn.MessageWriter=void 0;var gf=gn(),fi=Tr(),ev=pf(),mf=qr(),tv="Content-Length: ",vf=`\r
`,nv;(function(t){function e(n){let r=n;return r&&fi.func(r.dispose)&&fi.func(r.onClose)&&fi.func(r.onError)&&fi.func(r.write)}t.is=e})(nv=yn.MessageWriter||(yn.MessageWriter={}));var vs=class{constructor(){this.errorEmitter=new mf.Emitter,this.closeEmitter=new mf.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${fi.string(e.message)?e.message:"unknown"}`)}};yn.AbstractMessageWriter=vs;var ka;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,gf.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,gf.default)().applicationJson.encoder}}t.fromOptions=e})(ka||(ka={}));var Oa=class extends vs{constructor(e,n){super(),this.writable=e,this.options=ka.fromOptions(n),this.errorCount=0,this.writeSemaphore=new ev.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(tv,r.byteLength.toString(),vf),i.push(vf),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};yn.WriteableStreamMessageWriter=Oa});var Sf=S(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.createMessageConnection=W.ConnectionOptions=W.CancellationStrategy=W.CancellationSenderStrategy=W.CancellationReceiverStrategy=W.ConnectionStrategy=W.ConnectionError=W.ConnectionErrors=W.LogTraceNotification=W.SetTraceNotification=W.TraceFormat=W.TraceValues=W.Trace=W.NullLogger=W.ProgressType=W.ProgressToken=void 0;var Cf=gn(),He=Tr(),U=ya(),_f=_a(),hi=qr(),Ia=wa(),gi;(function(t){t.type=new U.NotificationType("$/cancelRequest")})(gi||(gi={}));var Df;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}t.is=e})(Df=W.ProgressToken||(W.ProgressToken={}));var pi;(function(t){t.type=new U.NotificationType("$/progress")})(pi||(pi={}));var Fa=class{constructor(){}};W.ProgressType=Fa;var Na;(function(t){function e(n){return He.func(n)}t.is=e})(Na||(Na={}));W.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var ge;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(ge=W.Trace||(W.Trace={}));var rv;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(rv=W.TraceValues||(W.TraceValues={}));(function(t){function e(r){if(!He.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(ge=W.Trace||(W.Trace={}));var Ut;(function(t){t.Text="text",t.JSON="json"})(Ut=W.TraceFormat||(W.TraceFormat={}));(function(t){function e(n){return He.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(Ut=W.TraceFormat||(W.TraceFormat={}));var Rf;(function(t){t.type=new U.NotificationType("$/setTrace")})(Rf=W.SetTraceNotification||(W.SetTraceNotification={}));var Ma;(function(t){t.type=new U.NotificationType("$/logTrace")})(Ma=W.LogTraceNotification||(W.LogTraceNotification={}));var ys;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(ys=W.ConnectionErrors||(W.ConnectionErrors={}));var kn=class extends Error{constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,kn.prototype)}};W.ConnectionError=kn;var bf;(function(t){function e(n){let r=n;return r&&He.func(r.cancelUndispatched)}t.is=e})(bf=W.ConnectionStrategy||(W.ConnectionStrategy={}));var La;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new Ia.CancellationTokenSource}});function e(n){let r=n;return r&&He.func(r.createCancellationTokenSource)}t.is=e})(La=W.CancellationReceiverStrategy||(W.CancellationReceiverStrategy={}));var Aa;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(gi.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&He.func(r.sendCancellation)&&He.func(r.cleanup)}t.is=e})(Aa=W.CancellationSenderStrategy||(W.CancellationSenderStrategy={}));var ja;(function(t){t.Message=Object.freeze({receiver:La.Message,sender:Aa.Message});function e(n){let r=n;return r&&La.is(r.receiver)&&Aa.is(r.sender)}t.is=e})(ja=W.CancellationStrategy||(W.CancellationStrategy={}));var iv;(function(t){function e(n){let r=n;return r&&(ja.is(r.cancellationStrategy)||bf.is(r.connectionStrategy))}t.is=e})(iv=W.ConnectionOptions||(W.ConnectionOptions={}));var Kt;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Kt||(Kt={}));function sv(t,e,n,r){let i=n!==void 0?n:W.NullLogger,s=0,o=0,a=0,u="2.0",l,h=new Map,g,p=new Map,v=new Map,y,_=new _f.LinkedMap,b=new Map,w=new Set,x=new Map,E=ge.Off,F=Ut.Text,z,Ne=Kt.New,De=new hi.Emitter,gt=new hi.Emitter,Ze=new hi.Emitter,Dt=new hi.Emitter,en=new hi.Emitter,At=r&&r.cancellationStrategy?r.cancellationStrategy:ja.Message;function Pt(m){if(m===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+m.toString()}function tn(m){return m===null?"res-unknown-"+(++a).toString():"res-"+m.toString()}function mt(){return"not-"+(++o).toString()}function vt(m,P){U.Message.isRequest(P)?m.set(Pt(P.id),P):U.Message.isResponse(P)?m.set(tn(P.id),P):m.set(mt(),P)}function Hn(m){}function Ee(){return Ne===Kt.Listening}function st(){return Ne===Kt.Closed}function ot(){return Ne===Kt.Disposed}function nn(){(Ne===Kt.New||Ne===Kt.Listening)&&(Ne=Kt.Closed,gt.fire(void 0))}function at(m){De.fire([m,void 0,void 0])}function si(m){De.fire(m)}t.onClose(nn),t.onError(at),e.onClose(nn),e.onError(si);function Cr(){y||_.size===0||(y=(0,Cf.default)().timer.setImmediate(()=>{y=void 0,_r()}))}function _r(){if(_.size===0)return;let m=_.shift();try{U.Message.isRequest(m)?Un(m):U.Message.isNotification(m)?Dr(m):U.Message.isResponse(m)?oi(m):Rr(m)}finally{Cr()}}let Wn=m=>{try{if(U.Message.isNotification(m)&&m.method===gi.type.method){let P=m.params.id,O=Pt(P),L=_.get(O);if(U.Message.isRequest(L)){let de=r==null?void 0:r.connectionStrategy,fe=de&&de.cancelUndispatched?de.cancelUndispatched(L,Hn):void 0;if(fe&&(fe.error!==void 0||fe.result!==void 0)){_.delete(O),x.delete(P),fe.id=L.id,jt(fe,m.method,Date.now()),e.write(fe).catch(()=>i.error("Sending response for canceled message failed."));return}}let le=x.get(P);if(le!==void 0){le.cancel(),En(m);return}else w.add(P)}vt(_,m)}finally{Cr()}};function Un(m){if(ot())return;function P(ee,ve,te){let d={jsonrpc:u,id:m.id};ee instanceof U.ResponseError?d.error=ee.toJson():d.result=ee===void 0?null:ee,jt(d,ve,te),e.write(d).catch(()=>i.error("Sending response failed."))}function O(ee,ve,te){let d={jsonrpc:u,id:m.id,error:ee.toJson()};jt(d,ve,te),e.write(d).catch(()=>i.error("Sending response failed."))}function L(ee,ve,te){ee===void 0&&(ee=null);let d={jsonrpc:u,id:m.id,result:ee};jt(d,ve,te),e.write(d).catch(()=>i.error("Sending response failed."))}Kn(m);let le=h.get(m.method),de,fe;le&&(de=le.type,fe=le.handler);let be=Date.now();if(fe||l){let ee=m.id??String(Date.now()),ve=At.receiver.createCancellationTokenSource(ee);m.id!==null&&w.has(m.id)&&ve.cancel(),m.id!==null&&x.set(ee,ve);try{let te;if(fe)if(m.params===void 0){if(de!==void 0&&de.numberOfParams!==0){O(new U.ResponseError(U.ErrorCodes.InvalidParams,`Request ${m.method} defines ${de.numberOfParams} params but received none.`),m.method,be);return}te=fe(ve.token)}else if(Array.isArray(m.params)){if(de!==void 0&&de.parameterStructures===U.ParameterStructures.byName){O(new U.ResponseError(U.ErrorCodes.InvalidParams,`Request ${m.method} defines parameters by name but received parameters by position`),m.method,be);return}te=fe(...m.params,ve.token)}else{if(de!==void 0&&de.parameterStructures===U.ParameterStructures.byPosition){O(new U.ResponseError(U.ErrorCodes.InvalidParams,`Request ${m.method} defines parameters by position but received parameters by name`),m.method,be);return}te=fe(m.params,ve.token)}else l&&(te=l(m.method,m.params,ve.token));let d=te;te?d.then?d.then(R=>{x.delete(ee),P(R,m.method,be)},R=>{x.delete(ee),R instanceof U.ResponseError?O(R,m.method,be):R&&He.string(R.message)?O(new U.ResponseError(U.ErrorCodes.InternalError,`Request ${m.method} failed with message: ${R.message}`),m.method,be):O(new U.ResponseError(U.ErrorCodes.InternalError,`Request ${m.method} failed unexpectedly without providing any details.`),m.method,be)}):(x.delete(ee),P(te,m.method,be)):(x.delete(ee),L(te,m.method,be))}catch(te){x.delete(ee),te instanceof U.ResponseError?P(te,m.method,be):te&&He.string(te.message)?O(new U.ResponseError(U.ErrorCodes.InternalError,`Request ${m.method} failed with message: ${te.message}`),m.method,be):O(new U.ResponseError(U.ErrorCodes.InternalError,`Request ${m.method} failed unexpectedly without providing any details.`),m.method,be)}}else O(new U.ResponseError(U.ErrorCodes.MethodNotFound,`Unhandled method ${m.method}`),m.method,be)}function oi(m){if(!ot())if(m.id===null)m.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(m.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let P=m.id,O=b.get(P);if($t(m,O),O!==void 0){b.delete(P);try{if(m.error){let L=m.error;O.reject(new U.ResponseError(L.code,L.message,L.data))}else if(m.result!==void 0)O.resolve(m.result);else throw new Error("Should never happen.")}catch(L){L.message?i.error(`Response handler '${O.method}' failed with message: ${L.message}`):i.error(`Response handler '${O.method}' failed unexpectedly.`)}}}}function Dr(m){if(ot())return;let P,O;if(m.method===gi.type.method){let L=m.params.id;w.delete(L),En(m);return}else{let L=p.get(m.method);L&&(O=L.handler,P=L.type)}if(O||g)try{if(En(m),O)if(m.params===void 0)P!==void 0&&P.numberOfParams!==0&&P.parameterStructures!==U.ParameterStructures.byName&&i.error(`Notification ${m.method} defines ${P.numberOfParams} params but received none.`),O();else if(Array.isArray(m.params)){let L=m.params;m.method===pi.type.method&&L.length===2&&Df.is(L[0])?O({token:L[0],value:L[1]}):(P!==void 0&&(P.parameterStructures===U.ParameterStructures.byName&&i.error(`Notification ${m.method} defines parameters by name but received parameters by position`),P.numberOfParams!==m.params.length&&i.error(`Notification ${m.method} defines ${P.numberOfParams} params but received ${L.length} arguments`)),O(...L))}else P!==void 0&&P.parameterStructures===U.ParameterStructures.byPosition&&i.error(`Notification ${m.method} defines parameters by position but received parameters by name`),O(m.params);else g&&g(m.method,m.params)}catch(L){L.message?i.error(`Notification handler '${m.method}' failed with message: ${L.message}`):i.error(`Notification handler '${m.method}' failed unexpectedly.`)}else Ze.fire(m)}function Rr(m){if(!m){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(m,null,4)}`);let P=m;if(He.string(P.id)||He.number(P.id)){let O=P.id,L=b.get(O);L&&L.reject(new Error("The received response has neither a result nor an error property."))}}function qt(m){if(m!=null)switch(E){case ge.Verbose:return JSON.stringify(m,null,4);case ge.Compact:return JSON.stringify(m);default:return}}function rn(m){if(!(E===ge.Off||!z))if(F===Ut.Text){let P;(E===ge.Verbose||E===ge.Compact)&&m.params&&(P=`Params: ${qt(m.params)}

`),z.log(`Sending request '${m.method} - (${m.id})'.`,P)}else xt("send-request",m)}function br(m){if(!(E===ge.Off||!z))if(F===Ut.Text){let P;(E===ge.Verbose||E===ge.Compact)&&(m.params?P=`Params: ${qt(m.params)}

`:P=`No parameters provided.

`),z.log(`Sending notification '${m.method}'.`,P)}else xt("send-notification",m)}function jt(m,P,O){if(!(E===ge.Off||!z))if(F===Ut.Text){let L;(E===ge.Verbose||E===ge.Compact)&&(m.error&&m.error.data?L=`Error data: ${qt(m.error.data)}

`:m.result?L=`Result: ${qt(m.result)}

`:m.error===void 0&&(L=`No result returned.

`)),z.log(`Sending response '${P} - (${m.id})'. Processing request took ${Date.now()-O}ms`,L)}else xt("send-response",m)}function Kn(m){if(!(E===ge.Off||!z))if(F===Ut.Text){let P;(E===ge.Verbose||E===ge.Compact)&&m.params&&(P=`Params: ${qt(m.params)}

`),z.log(`Received request '${m.method} - (${m.id})'.`,P)}else xt("receive-request",m)}function En(m){if(!(E===ge.Off||!z||m.method===Ma.type.method))if(F===Ut.Text){let P;(E===ge.Verbose||E===ge.Compact)&&(m.params?P=`Params: ${qt(m.params)}

`:P=`No parameters provided.

`),z.log(`Received notification '${m.method}'.`,P)}else xt("receive-notification",m)}function $t(m,P){if(!(E===ge.Off||!z))if(F===Ut.Text){let O;if((E===ge.Verbose||E===ge.Compact)&&(m.error&&m.error.data?O=`Error data: ${qt(m.error.data)}

`:m.result?O=`Result: ${qt(m.result)}

`:m.error===void 0&&(O=`No result returned.

`)),P){let L=m.error?` Request failed: ${m.error.message} (${m.error.code}).`:"";z.log(`Received response '${P.method} - (${m.id})' in ${Date.now()-P.timerStart}ms.${L}`,O)}else z.log(`Received response ${m.id} without active response promise.`,O)}else xt("receive-response",m)}function xt(m,P){if(!z||E===ge.Off)return;let O={isLSPMessage:!0,type:m,message:P,timestamp:Date.now()};z.log(O)}function Ue(){if(st())throw new kn(ys.Closed,"Connection is closed.");if(ot())throw new kn(ys.Disposed,"Connection is disposed.")}function ai(){if(Ee())throw new kn(ys.AlreadyListening,"Connection is already listening")}function Rt(){if(!Ee())throw new Error("Call listen() first.")}function Ht(m){return m===void 0?null:m}function Sr(m){if(m!==null)return m}function zn(m){return m!=null&&!Array.isArray(m)&&typeof m=="object"}function Gn(m,P){switch(m){case U.ParameterStructures.auto:return zn(P)?Sr(P):[Ht(P)];case U.ParameterStructures.byName:if(!zn(P))throw new Error("Received parameters by name but param is not an object literal.");return Sr(P);case U.ParameterStructures.byPosition:return[Ht(P)];default:throw new Error(`Unknown parameter structure ${m.toString()}`)}}function Wt(m,P){let O,L=m.numberOfParams;switch(L){case 0:O=void 0;break;case 1:O=Gn(m.parameterStructures,P[0]);break;default:O=[];for(let le=0;le<P.length&&le<L;le++)O.push(Ht(P[le]));if(P.length<L)for(let le=P.length;le<L;le++)O.push(null);break}return O}let sn={sendNotification:(m,...P)=>{Ue();let O,L;if(He.string(m)){O=m;let de=P[0],fe=0,be=U.ParameterStructures.auto;U.ParameterStructures.is(de)&&(fe=1,be=de);let ee=P.length,ve=ee-fe;switch(ve){case 0:L=void 0;break;case 1:L=Gn(be,P[fe]);break;default:if(be===U.ParameterStructures.byName)throw new Error(`Received ${ve} parameters for 'by Name' notification parameter structure.`);L=P.slice(fe,ee).map(te=>Ht(te));break}}else{let de=P;O=m.method,L=Wt(m,de)}let le={jsonrpc:u,method:O,params:L};return br(le),e.write(le).catch(()=>i.error("Sending notification failed."))},onNotification:(m,P)=>{Ue();let O;return He.func(m)?g=m:P&&(He.string(m)?(O=m,p.set(m,{type:void 0,handler:P})):(O=m.method,p.set(m.method,{type:m,handler:P}))),{dispose:()=>{O!==void 0?p.delete(O):g=void 0}}},onProgress:(m,P,O)=>{if(v.has(P))throw new Error(`Progress handler for token ${P} already registered`);return v.set(P,O),{dispose:()=>{v.delete(P)}}},sendProgress:(m,P,O)=>sn.sendNotification(pi.type,{token:P,value:O}),onUnhandledProgress:Dt.event,sendRequest:(m,...P)=>{Ue(),Rt();let O,L,le;if(He.string(m)){O=m;let ee=P[0],ve=P[P.length-1],te=0,d=U.ParameterStructures.auto;U.ParameterStructures.is(ee)&&(te=1,d=ee);let R=P.length;Ia.CancellationToken.is(ve)&&(R=R-1,le=ve);let M=R-te;switch(M){case 0:L=void 0;break;case 1:L=Gn(d,P[te]);break;default:if(d===U.ParameterStructures.byName)throw new Error(`Received ${M} parameters for 'by Name' request parameter structure.`);L=P.slice(te,R).map(J=>Ht(J));break}}else{let ee=P;O=m.method,L=Wt(m,ee);let ve=m.numberOfParams;le=Ia.CancellationToken.is(ee[ve])?ee[ve]:void 0}let de=s++,fe;return le&&(fe=le.onCancellationRequested(()=>{let ee=At.sender.sendCancellation(sn,de);return ee===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${de}`),Promise.resolve()):ee.catch(()=>{i.log(`Sending cancellation messages for id ${de} failed`)})})),new Promise((ee,ve)=>{let te={jsonrpc:u,id:de,method:O,params:L},d=J=>{ee(J),At.sender.cleanup(de),fe==null||fe.dispose()},R=J=>{ve(J),At.sender.cleanup(de),fe==null||fe.dispose()},M={method:O,timerStart:Date.now(),resolve:d,reject:R};rn(te);try{e.write(te).catch(()=>i.error("Sending request failed."))}catch(J){M.reject(new U.ResponseError(U.ErrorCodes.MessageWriteError,J.message?J.message:"Unknown reason")),M=null}M&&b.set(de,M)})},onRequest:(m,P)=>{Ue();let O=null;return Na.is(m)?(O=void 0,l=m):He.string(m)?(O=null,P!==void 0&&(O=m,h.set(m,{handler:P,type:void 0}))):P!==void 0&&(O=m.method,h.set(m.method,{type:m,handler:P})),{dispose:()=>{O!==null&&(O!==void 0?h.delete(O):l=void 0)}}},hasPendingResponse:()=>b.size>0,trace:async(m,P,O)=>{let L=!1,le=Ut.Text;O!==void 0&&(He.boolean(O)?L=O:(L=O.sendNotification||!1,le=O.traceFormat||Ut.Text)),E=m,F=le,E===ge.Off?z=void 0:z=P,L&&!st()&&!ot()&&await sn.sendNotification(Rf.type,{value:ge.toString(m)})},onError:De.event,onClose:gt.event,onUnhandledNotification:Ze.event,onDispose:en.event,end:()=>{e.end()},dispose:()=>{if(ot())return;Ne=Kt.Disposed,en.fire(void 0);let m=new U.ResponseError(U.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let P of b.values())P.reject(m);b=new Map,x=new Map,w=new Set,_=new _f.LinkedMap,He.func(e.dispose)&&e.dispose(),He.func(t.dispose)&&t.dispose()},listen:()=>{Ue(),ai(),Ne=Kt.Listening,t.listen(Wn)},inspect:()=>{(0,Cf.default)().console.log("inspect")}};return sn.onNotification(Ma.type,m=>{if(E===ge.Off||!z)return;let P=E===ge.Verbose||E===ge.Compact;z.log(m.message,P?m.verbose:void 0)}),sn.onNotification(pi.type,m=>{let P=v.get(m.token);P?P(m.value):Dt.fire(m)}),sn}W.createMessageConnection=sv});var Ua=S(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.TraceFormat=T.TraceValues=T.Trace=T.ProgressType=T.ProgressToken=T.createMessageConnection=T.NullLogger=T.ConnectionOptions=T.ConnectionStrategy=T.WriteableStreamMessageWriter=T.AbstractMessageWriter=T.MessageWriter=T.ReadableStreamMessageReader=T.AbstractMessageReader=T.MessageReader=T.CancellationToken=T.CancellationTokenSource=T.Emitter=T.Event=T.Disposable=T.LRUCache=T.Touch=T.LinkedMap=T.ParameterStructures=T.NotificationType9=T.NotificationType8=T.NotificationType7=T.NotificationType6=T.NotificationType5=T.NotificationType4=T.NotificationType3=T.NotificationType2=T.NotificationType1=T.NotificationType0=T.NotificationType=T.ErrorCodes=T.ResponseError=T.RequestType9=T.RequestType8=T.RequestType7=T.RequestType6=T.RequestType5=T.RequestType4=T.RequestType3=T.RequestType2=T.RequestType1=T.RequestType0=T.RequestType=T.Message=T.RAL=void 0;T.CancellationStrategy=T.CancellationSenderStrategy=T.CancellationReceiverStrategy=T.ConnectionError=T.ConnectionErrors=T.LogTraceNotification=T.SetTraceNotification=void 0;var ye=ya();Object.defineProperty(T,"Message",{enumerable:!0,get:function(){return ye.Message}});Object.defineProperty(T,"RequestType",{enumerable:!0,get:function(){return ye.RequestType}});Object.defineProperty(T,"RequestType0",{enumerable:!0,get:function(){return ye.RequestType0}});Object.defineProperty(T,"RequestType1",{enumerable:!0,get:function(){return ye.RequestType1}});Object.defineProperty(T,"RequestType2",{enumerable:!0,get:function(){return ye.RequestType2}});Object.defineProperty(T,"RequestType3",{enumerable:!0,get:function(){return ye.RequestType3}});Object.defineProperty(T,"RequestType4",{enumerable:!0,get:function(){return ye.RequestType4}});Object.defineProperty(T,"RequestType5",{enumerable:!0,get:function(){return ye.RequestType5}});Object.defineProperty(T,"RequestType6",{enumerable:!0,get:function(){return ye.RequestType6}});Object.defineProperty(T,"RequestType7",{enumerable:!0,get:function(){return ye.RequestType7}});Object.defineProperty(T,"RequestType8",{enumerable:!0,get:function(){return ye.RequestType8}});Object.defineProperty(T,"RequestType9",{enumerable:!0,get:function(){return ye.RequestType9}});Object.defineProperty(T,"ResponseError",{enumerable:!0,get:function(){return ye.ResponseError}});Object.defineProperty(T,"ErrorCodes",{enumerable:!0,get:function(){return ye.ErrorCodes}});Object.defineProperty(T,"NotificationType",{enumerable:!0,get:function(){return ye.NotificationType}});Object.defineProperty(T,"NotificationType0",{enumerable:!0,get:function(){return ye.NotificationType0}});Object.defineProperty(T,"NotificationType1",{enumerable:!0,get:function(){return ye.NotificationType1}});Object.defineProperty(T,"NotificationType2",{enumerable:!0,get:function(){return ye.NotificationType2}});Object.defineProperty(T,"NotificationType3",{enumerable:!0,get:function(){return ye.NotificationType3}});Object.defineProperty(T,"NotificationType4",{enumerable:!0,get:function(){return ye.NotificationType4}});Object.defineProperty(T,"NotificationType5",{enumerable:!0,get:function(){return ye.NotificationType5}});Object.defineProperty(T,"NotificationType6",{enumerable:!0,get:function(){return ye.NotificationType6}});Object.defineProperty(T,"NotificationType7",{enumerable:!0,get:function(){return ye.NotificationType7}});Object.defineProperty(T,"NotificationType8",{enumerable:!0,get:function(){return ye.NotificationType8}});Object.defineProperty(T,"NotificationType9",{enumerable:!0,get:function(){return ye.NotificationType9}});Object.defineProperty(T,"ParameterStructures",{enumerable:!0,get:function(){return ye.ParameterStructures}});var $a=_a();Object.defineProperty(T,"LinkedMap",{enumerable:!0,get:function(){return $a.LinkedMap}});Object.defineProperty(T,"LRUCache",{enumerable:!0,get:function(){return $a.LRUCache}});Object.defineProperty(T,"Touch",{enumerable:!0,get:function(){return $a.Touch}});var ov=Ko();Object.defineProperty(T,"Disposable",{enumerable:!0,get:function(){return ov.Disposable}});var wf=qr();Object.defineProperty(T,"Event",{enumerable:!0,get:function(){return wf.Event}});Object.defineProperty(T,"Emitter",{enumerable:!0,get:function(){return wf.Emitter}});var Tf=wa();Object.defineProperty(T,"CancellationTokenSource",{enumerable:!0,get:function(){return Tf.CancellationTokenSource}});Object.defineProperty(T,"CancellationToken",{enumerable:!0,get:function(){return Tf.CancellationToken}});var Ha=hf();Object.defineProperty(T,"MessageReader",{enumerable:!0,get:function(){return Ha.MessageReader}});Object.defineProperty(T,"AbstractMessageReader",{enumerable:!0,get:function(){return Ha.AbstractMessageReader}});Object.defineProperty(T,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Ha.ReadableStreamMessageReader}});var Wa=yf();Object.defineProperty(T,"MessageWriter",{enumerable:!0,get:function(){return Wa.MessageWriter}});Object.defineProperty(T,"AbstractMessageWriter",{enumerable:!0,get:function(){return Wa.AbstractMessageWriter}});Object.defineProperty(T,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Wa.WriteableStreamMessageWriter}});var tt=Sf();Object.defineProperty(T,"ConnectionStrategy",{enumerable:!0,get:function(){return tt.ConnectionStrategy}});Object.defineProperty(T,"ConnectionOptions",{enumerable:!0,get:function(){return tt.ConnectionOptions}});Object.defineProperty(T,"NullLogger",{enumerable:!0,get:function(){return tt.NullLogger}});Object.defineProperty(T,"createMessageConnection",{enumerable:!0,get:function(){return tt.createMessageConnection}});Object.defineProperty(T,"ProgressToken",{enumerable:!0,get:function(){return tt.ProgressToken}});Object.defineProperty(T,"ProgressType",{enumerable:!0,get:function(){return tt.ProgressType}});Object.defineProperty(T,"Trace",{enumerable:!0,get:function(){return tt.Trace}});Object.defineProperty(T,"TraceValues",{enumerable:!0,get:function(){return tt.TraceValues}});Object.defineProperty(T,"TraceFormat",{enumerable:!0,get:function(){return tt.TraceFormat}});Object.defineProperty(T,"SetTraceNotification",{enumerable:!0,get:function(){return tt.SetTraceNotification}});Object.defineProperty(T,"LogTraceNotification",{enumerable:!0,get:function(){return tt.LogTraceNotification}});Object.defineProperty(T,"ConnectionErrors",{enumerable:!0,get:function(){return tt.ConnectionErrors}});Object.defineProperty(T,"ConnectionError",{enumerable:!0,get:function(){return tt.ConnectionError}});Object.defineProperty(T,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return tt.CancellationReceiverStrategy}});Object.defineProperty(T,"CancellationSenderStrategy",{enumerable:!0,get:function(){return tt.CancellationSenderStrategy}});Object.defineProperty(T,"CancellationStrategy",{enumerable:!0,get:function(){return tt.CancellationStrategy}});var av=gn();T.RAL=av.default});var er=S(ae=>{"use strict";var cv=ae&&ae.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),uv=ae&&ae.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&cv(e,t,n)};Object.defineProperty(ae,"__esModule",{value:!0});ae.createMessageConnection=ae.createServerSocketTransport=ae.createClientSocketTransport=ae.createServerPipeTransport=ae.createClientPipeTransport=ae.generateRandomPipeName=ae.StreamMessageWriter=ae.StreamMessageReader=ae.SocketMessageWriter=ae.SocketMessageReader=ae.IPCMessageWriter=ae.IPCMessageReader=void 0;var Er=cf();Er.default.install();var an=Ua(),Pf=require("path"),lv=require("os"),dv=require("crypto"),Ds=require("net");uv(Ua(),ae);var Ka=class extends an.AbstractMessageReader{constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),an.Disposable.create(()=>this.process.off("message",e))}};ae.IPCMessageReader=Ka;var za=class extends an.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ae.IPCMessageWriter=za;var Yn=class extends an.ReadableStreamMessageReader{constructor(e,n="utf-8"){super((0,Er.default)().stream.asReadableStream(e),n)}};ae.SocketMessageReader=Yn;var Zn=class extends an.WriteableStreamMessageWriter{constructor(e,n){super((0,Er.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ae.SocketMessageWriter=Zn;var Cs=class extends an.ReadableStreamMessageReader{constructor(e,n){super((0,Er.default)().stream.asReadableStream(e),n)}};ae.StreamMessageReader=Cs;var _s=class extends an.WriteableStreamMessageWriter{constructor(e,n){super((0,Er.default)().stream.asWritableStream(e),n)}};ae.StreamMessageWriter=_s;var qf=process.env.XDG_RUNTIME_DIR,fv=new Map([["linux",107],["darwin",103]]);function hv(){let t=(0,dv.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;qf?e=Pf.join(qf,`vscode-ipc-${t}.sock`):e=Pf.join(lv.tmpdir(),`vscode-${t}.sock`);let n=fv.get(process.platform);return n!==void 0&&e.length>=n&&(0,Er.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}ae.generateRandomPipeName=hv;function pv(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let o=(0,Ds.createServer)(a=>{o.close(),n([new Yn(a,e),new Zn(a,e)])});o.on("error",s),o.listen(t,()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}ae.createClientPipeTransport=pv;function gv(t,e="utf-8"){let n=(0,Ds.createConnection)(t);return[new Yn(n,e),new Zn(n,e)]}ae.createServerPipeTransport=gv;function mv(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let o=(0,Ds.createServer)(a=>{o.close(),n([new Yn(a,e),new Zn(a,e)])});o.on("error",s),o.listen(t,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}ae.createClientSocketTransport=mv;function vv(t,e="utf-8"){let n=(0,Ds.createConnection)(t,"127.0.0.1");return[new Yn(n,e),new Zn(n,e)]}ae.createServerSocketTransport=vv;function yv(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function Cv(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function _v(t,e,n,r){n||(n=an.NullLogger);let i=yv(t)?new Cs(t):t,s=Cv(e)?new _s(e):e;return an.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,an.createMessageConnection)(i,s,n,r)}ae.createMessageConnection=_v});var Ga=S((gS,xf)=>{"use strict";xf.exports=er()});var Es={};Jd(Es,{AnnotatedTextEdit:()=>Cn,ChangeAnnotation:()=>tr,ChangeAnnotationIdentifier:()=>Xe,CodeAction:()=>Tc,CodeActionContext:()=>wc,CodeActionKind:()=>Sc,CodeActionTriggerKind:()=>Ri,CodeDescription:()=>nc,CodeLens:()=>Pc,Color:()=>Ss,ColorInformation:()=>Qa,ColorPresentation:()=>Ja,Command:()=>nr,CompletionItem:()=>fc,CompletionItemKind:()=>oc,CompletionItemLabelDetails:()=>dc,CompletionItemTag:()=>cc,CompletionList:()=>hc,CreateFile:()=>kr,DeleteFile:()=>Ir,Diagnostic:()=>yi,DiagnosticRelatedInformation:()=>ws,DiagnosticSeverity:()=>ec,DiagnosticTag:()=>tc,DocumentHighlight:()=>yc,DocumentHighlightKind:()=>vc,DocumentLink:()=>xc,DocumentSymbol:()=>bc,DocumentUri:()=>Ba,EOL:()=>Rv,FoldingRange:()=>Za,FoldingRangeKind:()=>Ya,FormattingOptions:()=>qc,Hover:()=>pc,InlayHint:()=>Ac,InlayHintKind:()=>qs,InlayHintLabelPart:()=>xs,InlineValueContext:()=>Lc,InlineValueEvaluatableExpression:()=>Mc,InlineValueText:()=>Fc,InlineValueVariableLookup:()=>Nc,InsertReplaceEdit:()=>uc,InsertTextFormat:()=>ac,InsertTextMode:()=>lc,Location:()=>vi,LocationLink:()=>Xa,MarkedString:()=>Di,MarkupContent:()=>Fr,MarkupKind:()=>Ps,OptionalVersionedTextDocumentIdentifier:()=>_i,ParameterInformation:()=>gc,Position:()=>kt,Range:()=>Oe,RenameFile:()=>Or,SelectionRange:()=>Ec,SemanticTokenModifiers:()=>Oc,SemanticTokenTypes:()=>kc,SemanticTokens:()=>Ic,SignatureInformation:()=>mc,SymbolInformation:()=>Dc,SymbolKind:()=>Cc,SymbolTag:()=>_c,TextDocument:()=>$c,TextDocumentEdit:()=>Ci,TextDocumentIdentifier:()=>rc,TextDocumentItem:()=>sc,TextEdit:()=>cn,URI:()=>bs,VersionedTextDocumentIdentifier:()=>ic,WorkspaceChange:()=>Dv,WorkspaceEdit:()=>Ts,WorkspaceFolder:()=>jc,WorkspaceSymbol:()=>Rc,integer:()=>Va,uinteger:()=>mi});var Ba,bs,Va,mi,kt,Oe,vi,Xa,Ss,Qa,Ja,Ya,Za,ws,ec,tc,nc,yi,nr,cn,tr,Xe,Cn,Ci,kr,Or,Ir,Ts,Rs,Ef,Dv,rc,ic,_i,sc,Ps,Fr,oc,ac,cc,uc,lc,dc,fc,hc,Di,pc,gc,mc,vc,yc,Cc,_c,Dc,Rc,bc,Sc,Ri,wc,Tc,Pc,qc,xc,Ec,kc,Oc,Ic,Fc,Nc,Mc,Lc,qs,xs,Ac,jc,Rv,$c,bv,D,ks=qm(()=>{"use strict";(function(t){function e(n){return typeof n=="string"}t.is=e})(Ba||(Ba={}));(function(t){function e(n){return typeof n=="string"}t.is=e})(bs||(bs={}));(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}t.is=e})(Va||(Va={}));(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}t.is=e})(mi||(mi={}));(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=mi.MAX_VALUE),i===Number.MAX_VALUE&&(i=mi.MAX_VALUE),{line:r,character:i}}t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&D.uinteger(i.line)&&D.uinteger(i.character)}t.is=n})(kt||(kt={}));(function(t){function e(r,i,s,o){if(D.uinteger(r)&&D.uinteger(i)&&D.uinteger(s)&&D.uinteger(o))return{start:kt.create(r,i),end:kt.create(s,o)};if(kt.is(r)&&kt.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments[".concat(r,", ").concat(i,", ").concat(s,", ").concat(o,"]"))}t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&kt.is(i.start)&&kt.is(i.end)}t.is=n})(Oe||(Oe={}));(function(t){function e(r,i){return{uri:r,range:i}}t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&Oe.is(i.range)&&(D.string(i.uri)||D.undefined(i.uri))}t.is=n})(vi||(vi={}));(function(t){function e(r,i,s,o){return{targetUri:r,targetRange:i,targetSelectionRange:s,originSelectionRange:o}}t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&Oe.is(i.targetRange)&&D.string(i.targetUri)&&Oe.is(i.targetSelectionRange)&&(Oe.is(i.originSelectionRange)||D.undefined(i.originSelectionRange))}t.is=n})(Xa||(Xa={}));(function(t){function e(r,i,s,o){return{red:r,green:i,blue:s,alpha:o}}t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&D.numberRange(i.red,0,1)&&D.numberRange(i.green,0,1)&&D.numberRange(i.blue,0,1)&&D.numberRange(i.alpha,0,1)}t.is=n})(Ss||(Ss={}));(function(t){function e(r,i){return{range:r,color:i}}t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&Oe.is(i.range)&&Ss.is(i.color)}t.is=n})(Qa||(Qa={}));(function(t){function e(r,i,s){return{label:r,textEdit:i,additionalTextEdits:s}}t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&D.string(i.label)&&(D.undefined(i.textEdit)||cn.is(i))&&(D.undefined(i.additionalTextEdits)||D.typedArray(i.additionalTextEdits,cn.is))}t.is=n})(Ja||(Ja={}));(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Ya||(Ya={}));(function(t){function e(r,i,s,o,a,u){var l={startLine:r,endLine:i};return D.defined(s)&&(l.startCharacter=s),D.defined(o)&&(l.endCharacter=o),D.defined(a)&&(l.kind=a),D.defined(u)&&(l.collapsedText=u),l}t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&D.uinteger(i.startLine)&&D.uinteger(i.startLine)&&(D.undefined(i.startCharacter)||D.uinteger(i.startCharacter))&&(D.undefined(i.endCharacter)||D.uinteger(i.endCharacter))&&(D.undefined(i.kind)||D.string(i.kind))}t.is=n})(Za||(Za={}));(function(t){function e(r,i){return{location:r,message:i}}t.create=e;function n(r){var i=r;return D.defined(i)&&vi.is(i.location)&&D.string(i.message)}t.is=n})(ws||(ws={}));(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(ec||(ec={}));(function(t){t.Unnecessary=1,t.Deprecated=2})(tc||(tc={}));(function(t){function e(n){var r=n;return D.objectLiteral(r)&&D.string(r.href)}t.is=e})(nc||(nc={}));(function(t){function e(r,i,s,o,a,u){var l={range:r,message:i};return D.defined(s)&&(l.severity=s),D.defined(o)&&(l.code=o),D.defined(a)&&(l.source=a),D.defined(u)&&(l.relatedInformation=u),l}t.create=e;function n(r){var i,s=r;return D.defined(s)&&Oe.is(s.range)&&D.string(s.message)&&(D.number(s.severity)||D.undefined(s.severity))&&(D.integer(s.code)||D.string(s.code)||D.undefined(s.code))&&(D.undefined(s.codeDescription)||D.string((i=s.codeDescription)===null||i===void 0?void 0:i.href))&&(D.string(s.source)||D.undefined(s.source))&&(D.undefined(s.relatedInformation)||D.typedArray(s.relatedInformation,ws.is))}t.is=n})(yi||(yi={}));(function(t){function e(r,i){for(var s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];var a={title:r,command:i};return D.defined(s)&&s.length>0&&(a.arguments=s),a}t.create=e;function n(r){var i=r;return D.defined(i)&&D.string(i.title)&&D.string(i.command)}t.is=n})(nr||(nr={}));(function(t){function e(s,o){return{range:s,newText:o}}t.replace=e;function n(s,o){return{range:{start:s,end:s},newText:o}}t.insert=n;function r(s){return{range:s,newText:""}}t.del=r;function i(s){var o=s;return D.objectLiteral(o)&&D.string(o.newText)&&Oe.is(o.range)}t.is=i})(cn||(cn={}));(function(t){function e(r,i,s){var o={label:r};return i!==void 0&&(o.needsConfirmation=i),s!==void 0&&(o.description=s),o}t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&D.string(i.label)&&(D.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(D.string(i.description)||i.description===void 0)}t.is=n})(tr||(tr={}));(function(t){function e(n){var r=n;return D.string(r)}t.is=e})(Xe||(Xe={}));(function(t){function e(s,o,a){return{range:s,newText:o,annotationId:a}}t.replace=e;function n(s,o,a){return{range:{start:s,end:s},newText:o,annotationId:a}}t.insert=n;function r(s,o){return{range:s,newText:"",annotationId:o}}t.del=r;function i(s){var o=s;return cn.is(o)&&(tr.is(o.annotationId)||Xe.is(o.annotationId))}t.is=i})(Cn||(Cn={}));(function(t){function e(r,i){return{textDocument:r,edits:i}}t.create=e;function n(r){var i=r;return D.defined(i)&&_i.is(i.textDocument)&&Array.isArray(i.edits)}t.is=n})(Ci||(Ci={}));(function(t){function e(r,i,s){var o={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&D.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||D.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||D.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Xe.is(i.annotationId))}t.is=n})(kr||(kr={}));(function(t){function e(r,i,s,o){var a={kind:"rename",oldUri:r,newUri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(a.options=s),o!==void 0&&(a.annotationId=o),a}t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&D.string(i.oldUri)&&D.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||D.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||D.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Xe.is(i.annotationId))}t.is=n})(Or||(Or={}));(function(t){function e(r,i,s){var o={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&D.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||D.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||D.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Xe.is(i.annotationId))}t.is=n})(Ir||(Ir={}));(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return D.string(i.kind)?kr.is(i)||Or.is(i)||Ir.is(i):Ci.is(i)}))}t.is=e})(Ts||(Ts={}));Rs=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return t.prototype.insert=function(e,n,r){var i,s;if(r===void 0?i=cn.insert(e,n):Xe.is(r)?(s=r,i=Cn.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),i=Cn.insert(e,n,s)),this.edits.push(i),s!==void 0)return s},t.prototype.replace=function(e,n,r){var i,s;if(r===void 0?i=cn.replace(e,n):Xe.is(r)?(s=r,i=Cn.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),i=Cn.replace(e,n,s)),this.edits.push(i),s!==void 0)return s},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=cn.del(e):Xe.is(n)?(i=n,r=Cn.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=Cn.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),Ef=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(Xe.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id ".concat(r," is already in use."));if(n===void 0)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),Dv=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Ef(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(Ci.is(r)){var i=new Rs(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new Rs(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(_i.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],s={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(s),r=new Rs(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new Rs(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Ef,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;tr.is(n)||Xe.is(n)?i=n:r=n;var s,o;if(i===void 0?s=kr.create(e,r):(o=Xe.is(i)?i:this._changeAnnotations.manage(i),s=kr.create(e,r,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s;tr.is(r)||Xe.is(r)?s=r:i=r;var o,a;if(s===void 0?o=Or.create(e,n,i):(a=Xe.is(s)?s:this._changeAnnotations.manage(s),o=Or.create(e,n,i,a)),this._workspaceEdit.documentChanges.push(o),a!==void 0)return a},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;tr.is(n)||Xe.is(n)?i=n:r=n;var s,o;if(i===void 0?s=Ir.create(e,r):(o=Xe.is(i)?i:this._changeAnnotations.manage(i),s=Ir.create(e,r,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o},t}();(function(t){function e(r){return{uri:r}}t.create=e;function n(r){var i=r;return D.defined(i)&&D.string(i.uri)}t.is=n})(rc||(rc={}));(function(t){function e(r,i){return{uri:r,version:i}}t.create=e;function n(r){var i=r;return D.defined(i)&&D.string(i.uri)&&D.integer(i.version)}t.is=n})(ic||(ic={}));(function(t){function e(r,i){return{uri:r,version:i}}t.create=e;function n(r){var i=r;return D.defined(i)&&D.string(i.uri)&&(i.version===null||D.integer(i.version))}t.is=n})(_i||(_i={}));(function(t){function e(r,i,s,o){return{uri:r,languageId:i,version:s,text:o}}t.create=e;function n(r){var i=r;return D.defined(i)&&D.string(i.uri)&&D.string(i.languageId)&&D.integer(i.version)&&D.string(i.text)}t.is=n})(sc||(sc={}));(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(n){var r=n;return r===t.PlainText||r===t.Markdown}t.is=e})(Ps||(Ps={}));(function(t){function e(n){var r=n;return D.objectLiteral(n)&&Ps.is(r.kind)&&D.string(r.value)}t.is=e})(Fr||(Fr={}));(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(oc||(oc={}));(function(t){t.PlainText=1,t.Snippet=2})(ac||(ac={}));(function(t){t.Deprecated=1})(cc||(cc={}));(function(t){function e(r,i,s){return{newText:r,insert:i,replace:s}}t.create=e;function n(r){var i=r;return i&&D.string(i.newText)&&Oe.is(i.insert)&&Oe.is(i.replace)}t.is=n})(uc||(uc={}));(function(t){t.asIs=1,t.adjustIndentation=2})(lc||(lc={}));(function(t){function e(n){var r=n;return r&&(D.string(r.detail)||r.detail===void 0)&&(D.string(r.description)||r.description===void 0)}t.is=e})(dc||(dc={}));(function(t){function e(n){return{label:n}}t.create=e})(fc||(fc={}));(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}t.create=e})(hc||(hc={}));(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=e;function n(r){var i=r;return D.string(i)||D.objectLiteral(i)&&D.string(i.language)&&D.string(i.value)}t.is=n})(Di||(Di={}));(function(t){function e(n){var r=n;return!!r&&D.objectLiteral(r)&&(Fr.is(r.contents)||Di.is(r.contents)||D.typedArray(r.contents,Di.is))&&(n.range===void 0||Oe.is(n.range))}t.is=e})(pc||(pc={}));(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}t.create=e})(gc||(gc={}));(function(t){function e(n,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var o={label:n};return D.defined(r)&&(o.documentation=r),D.defined(i)?o.parameters=i:o.parameters=[],o}t.create=e})(mc||(mc={}));(function(t){t.Text=1,t.Read=2,t.Write=3})(vc||(vc={}));(function(t){function e(n,r){var i={range:n};return D.number(r)&&(i.kind=r),i}t.create=e})(yc||(yc={}));(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Cc||(Cc={}));(function(t){t.Deprecated=1})(_c||(_c={}));(function(t){function e(n,r,i,s,o){var a={name:n,kind:r,location:{uri:s,range:i}};return o&&(a.containerName=o),a}t.create=e})(Dc||(Dc={}));(function(t){function e(n,r,i,s){return s!==void 0?{name:n,kind:r,location:{uri:i,range:s}}:{name:n,kind:r,location:{uri:i}}}t.create=e})(Rc||(Rc={}));(function(t){function e(r,i,s,o,a,u){var l={name:r,detail:i,kind:s,range:o,selectionRange:a};return u!==void 0&&(l.children=u),l}t.create=e;function n(r){var i=r;return i&&D.string(i.name)&&D.number(i.kind)&&Oe.is(i.range)&&Oe.is(i.selectionRange)&&(i.detail===void 0||D.string(i.detail))&&(i.deprecated===void 0||D.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}t.is=n})(bc||(bc={}));(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Sc||(Sc={}));(function(t){t.Invoked=1,t.Automatic=2})(Ri||(Ri={}));(function(t){function e(r,i,s){var o={diagnostics:r};return i!=null&&(o.only=i),s!=null&&(o.triggerKind=s),o}t.create=e;function n(r){var i=r;return D.defined(i)&&D.typedArray(i.diagnostics,yi.is)&&(i.only===void 0||D.typedArray(i.only,D.string))&&(i.triggerKind===void 0||i.triggerKind===Ri.Invoked||i.triggerKind===Ri.Automatic)}t.is=n})(wc||(wc={}));(function(t){function e(r,i,s){var o={title:r},a=!0;return typeof i=="string"?(a=!1,o.kind=i):nr.is(i)?o.command=i:o.edit=i,a&&s!==void 0&&(o.kind=s),o}t.create=e;function n(r){var i=r;return i&&D.string(i.title)&&(i.diagnostics===void 0||D.typedArray(i.diagnostics,yi.is))&&(i.kind===void 0||D.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||nr.is(i.command))&&(i.isPreferred===void 0||D.boolean(i.isPreferred))&&(i.edit===void 0||Ts.is(i.edit))}t.is=n})(Tc||(Tc={}));(function(t){function e(r,i){var s={range:r};return D.defined(i)&&(s.data=i),s}t.create=e;function n(r){var i=r;return D.defined(i)&&Oe.is(i.range)&&(D.undefined(i.command)||nr.is(i.command))}t.is=n})(Pc||(Pc={}));(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}t.create=e;function n(r){var i=r;return D.defined(i)&&D.uinteger(i.tabSize)&&D.boolean(i.insertSpaces)}t.is=n})(qc||(qc={}));(function(t){function e(r,i,s){return{range:r,target:i,data:s}}t.create=e;function n(r){var i=r;return D.defined(i)&&Oe.is(i.range)&&(D.undefined(i.target)||D.string(i.target))}t.is=n})(xc||(xc={}));(function(t){function e(r,i){return{range:r,parent:i}}t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&Oe.is(i.range)&&(i.parent===void 0||t.is(i.parent))}t.is=n})(Ec||(Ec={}));(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(kc||(kc={}));(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Oc||(Oc={}));(function(t){function e(n){var r=n;return D.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}t.is=e})(Ic||(Ic={}));(function(t){function e(r,i){return{range:r,text:i}}t.create=e;function n(r){var i=r;return i!=null&&Oe.is(i.range)&&D.string(i.text)}t.is=n})(Fc||(Fc={}));(function(t){function e(r,i,s){return{range:r,variableName:i,caseSensitiveLookup:s}}t.create=e;function n(r){var i=r;return i!=null&&Oe.is(i.range)&&D.boolean(i.caseSensitiveLookup)&&(D.string(i.variableName)||i.variableName===void 0)}t.is=n})(Nc||(Nc={}));(function(t){function e(r,i){return{range:r,expression:i}}t.create=e;function n(r){var i=r;return i!=null&&Oe.is(i.range)&&(D.string(i.expression)||i.expression===void 0)}t.is=n})(Mc||(Mc={}));(function(t){function e(r,i){return{frameId:r,stoppedLocation:i}}t.create=e;function n(r){var i=r;return D.defined(i)&&Oe.is(r.stoppedLocation)}t.is=n})(Lc||(Lc={}));(function(t){t.Type=1,t.Parameter=2;function e(n){return n===1||n===2}t.is=e})(qs||(qs={}));(function(t){function e(r){return{value:r}}t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&(i.tooltip===void 0||D.string(i.tooltip)||Fr.is(i.tooltip))&&(i.location===void 0||vi.is(i.location))&&(i.command===void 0||nr.is(i.command))}t.is=n})(xs||(xs={}));(function(t){function e(r,i,s){var o={position:r,label:i};return s!==void 0&&(o.kind=s),o}t.create=e;function n(r){var i=r;return D.objectLiteral(i)&&kt.is(i.position)&&(D.string(i.label)||D.typedArray(i.label,xs.is))&&(i.kind===void 0||qs.is(i.kind))&&i.textEdits===void 0||D.typedArray(i.textEdits,cn.is)&&(i.tooltip===void 0||D.string(i.tooltip)||Fr.is(i.tooltip))&&(i.paddingLeft===void 0||D.boolean(i.paddingLeft))&&(i.paddingRight===void 0||D.boolean(i.paddingRight))}t.is=n})(Ac||(Ac={}));(function(t){function e(n){var r=n;return D.objectLiteral(r)&&bs.is(r.uri)&&D.string(r.name)}t.is=e})(jc||(jc={}));Rv=[`
`,`\r
`,"\r"];(function(t){function e(s,o,a,u){return new bv(s,o,a,u)}t.create=e;function n(s){var o=s;return!!(D.defined(o)&&D.string(o.uri)&&(D.undefined(o.languageId)||D.string(o.languageId))&&D.uinteger(o.lineCount)&&D.func(o.getText)&&D.func(o.positionAt)&&D.func(o.offsetAt))}t.is=n;function r(s,o){for(var a=s.getText(),u=i(o,function(y,_){var b=y.range.start.line-_.range.start.line;return b===0?y.range.start.character-_.range.start.character:b}),l=a.length,h=u.length-1;h>=0;h--){var g=u[h],p=s.offsetAt(g.range.start),v=s.offsetAt(g.range.end);if(v<=l)a=a.substring(0,p)+g.newText+a.substring(v,a.length);else throw new Error("Overlapping edit");l=p}return a}t.applyEdits=r;function i(s,o){if(s.length<=1)return s;var a=s.length/2|0,u=s.slice(0,a),l=s.slice(a);i(u,o),i(l,o);for(var h=0,g=0,p=0;h<u.length&&g<l.length;){var v=o(u[h],l[g]);v<=0?s[p++]=u[h++]:s[p++]=l[g++]}for(;h<u.length;)s[p++]=u[h++];for(;g<l.length;)s[p++]=l[g++];return s}})($c||($c={}));bv=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var s=n.charAt(i);r=s==="\r"||s===`
`,s==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return kt.create(0,e);for(;r<i;){var s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}var o=r-1;return kt.create(o,e-n[o])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}();(function(t){var e=Object.prototype.toString;function n(v){return typeof v<"u"}t.defined=n;function r(v){return typeof v>"u"}t.undefined=r;function i(v){return v===!0||v===!1}t.boolean=i;function s(v){return e.call(v)==="[object String]"}t.string=s;function o(v){return e.call(v)==="[object Number]"}t.number=o;function a(v,y,_){return e.call(v)==="[object Number]"&&y<=v&&v<=_}t.numberRange=a;function u(v){return e.call(v)==="[object Number]"&&-2147483648<=v&&v<=2147483647}t.integer=u;function l(v){return e.call(v)==="[object Number]"&&0<=v&&v<=2147483647}t.uinteger=l;function h(v){return e.call(v)==="[object Function]"}t.func=h;function g(v){return v!==null&&typeof v=="object"}t.objectLiteral=g;function p(v,y){return Array.isArray(v)&&v.every(y)}t.typedArray=p})(D||(D={}))});var Se=S(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.ProtocolNotificationType=ut.ProtocolNotificationType0=ut.ProtocolRequestType=ut.ProtocolRequestType0=ut.RegistrationType=ut.MessageDirection=void 0;var Nr=er(),Sv;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(Sv=ut.MessageDirection||(ut.MessageDirection={}));var Hc=class{constructor(e){this.method=e}};ut.RegistrationType=Hc;var Wc=class extends Nr.RequestType0{constructor(e){super(e)}};ut.ProtocolRequestType0=Wc;var Uc=class extends Nr.RequestType{constructor(e){super(e,Nr.ParameterStructures.byName)}};ut.ProtocolRequestType=Uc;var Kc=class extends Nr.NotificationType0{constructor(e){super(e)}};ut.ProtocolNotificationType0=Kc;var zc=class extends Nr.NotificationType{constructor(e){super(e,Nr.ParameterStructures.byName)}};ut.ProtocolNotificationType=zc});var Os=S(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.objectLiteral=Le.typedArray=Le.stringArray=Le.array=Le.func=Le.error=Le.number=Le.string=Le.boolean=void 0;function wv(t){return t===!0||t===!1}Le.boolean=wv;function kf(t){return typeof t=="string"||t instanceof String}Le.string=kf;function Tv(t){return typeof t=="number"||t instanceof Number}Le.number=Tv;function Pv(t){return t instanceof Error}Le.error=Pv;function qv(t){return typeof t=="function"}Le.func=qv;function Of(t){return Array.isArray(t)}Le.array=Of;function xv(t){return Of(t)&&t.every(e=>kf(e))}Le.stringArray=xv;function Ev(t,e){return Array.isArray(t)&&t.every(e)}Le.typedArray=Ev;function kv(t){return t!==null&&typeof t=="object"}Le.objectLiteral=kv});var Ff=S(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.ImplementationRequest=void 0;var If=Se(),Ov;(function(t){t.method="textDocument/implementation",t.messageDirection=If.MessageDirection.clientToServer,t.type=new If.ProtocolRequestType(t.method)})(Ov=bi.ImplementationRequest||(bi.ImplementationRequest={}))});var Mf=S(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.TypeDefinitionRequest=void 0;var Nf=Se(),Iv;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=Nf.MessageDirection.clientToServer,t.type=new Nf.ProtocolRequestType(t.method)})(Iv=Si.TypeDefinitionRequest||(Si.TypeDefinitionRequest={}))});var Lf=S(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.DidChangeWorkspaceFoldersNotification=On.WorkspaceFoldersRequest=void 0;var Is=Se(),Fv;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=Is.MessageDirection.serverToClient,t.type=new Is.ProtocolRequestType0(t.method)})(Fv=On.WorkspaceFoldersRequest||(On.WorkspaceFoldersRequest={}));var Nv;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=Is.MessageDirection.clientToServer,t.type=new Is.ProtocolNotificationType(t.method)})(Nv=On.DidChangeWorkspaceFoldersNotification||(On.DidChangeWorkspaceFoldersNotification={}))});var jf=S(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.ConfigurationRequest=void 0;var Af=Se(),Mv;(function(t){t.method="workspace/configuration",t.messageDirection=Af.MessageDirection.serverToClient,t.type=new Af.ProtocolRequestType(t.method)})(Mv=wi.ConfigurationRequest||(wi.ConfigurationRequest={}))});var $f=S(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.ColorPresentationRequest=In.DocumentColorRequest=void 0;var Fs=Se(),Lv;(function(t){t.method="textDocument/documentColor",t.messageDirection=Fs.MessageDirection.clientToServer,t.type=new Fs.ProtocolRequestType(t.method)})(Lv=In.DocumentColorRequest||(In.DocumentColorRequest={}));var Av;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=Fs.MessageDirection.clientToServer,t.type=new Fs.ProtocolRequestType(t.method)})(Av=In.ColorPresentationRequest||(In.ColorPresentationRequest={}))});var Wf=S(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.FoldingRangeRequest=void 0;var Hf=Se(),jv;(function(t){t.method="textDocument/foldingRange",t.messageDirection=Hf.MessageDirection.clientToServer,t.type=new Hf.ProtocolRequestType(t.method)})(jv=Ti.FoldingRangeRequest||(Ti.FoldingRangeRequest={}))});var Kf=S(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.DeclarationRequest=void 0;var Uf=Se(),$v;(function(t){t.method="textDocument/declaration",t.messageDirection=Uf.MessageDirection.clientToServer,t.type=new Uf.ProtocolRequestType(t.method)})($v=Pi.DeclarationRequest||(Pi.DeclarationRequest={}))});var Gf=S(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.SelectionRangeRequest=void 0;var zf=Se(),Hv;(function(t){t.method="textDocument/selectionRange",t.messageDirection=zf.MessageDirection.clientToServer,t.type=new zf.ProtocolRequestType(t.method)})(Hv=qi.SelectionRangeRequest||(qi.SelectionRangeRequest={}))});var Bf=S(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.WorkDoneProgressCancelNotification=zt.WorkDoneProgressCreateRequest=zt.WorkDoneProgress=void 0;var Wv=er(),Ns=Se(),Uv;(function(t){t.type=new Wv.ProgressType;function e(n){return n===t.type}t.is=e})(Uv=zt.WorkDoneProgress||(zt.WorkDoneProgress={}));var Kv;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=Ns.MessageDirection.serverToClient,t.type=new Ns.ProtocolRequestType(t.method)})(Kv=zt.WorkDoneProgressCreateRequest||(zt.WorkDoneProgressCreateRequest={}));var zv;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=Ns.MessageDirection.clientToServer,t.type=new Ns.ProtocolNotificationType(t.method)})(zv=zt.WorkDoneProgressCancelNotification||(zt.WorkDoneProgressCancelNotification={}))});var Vf=S(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.CallHierarchyOutgoingCallsRequest=Gt.CallHierarchyIncomingCallsRequest=Gt.CallHierarchyPrepareRequest=void 0;var Mr=Se(),Gv;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=Mr.MessageDirection.clientToServer,t.type=new Mr.ProtocolRequestType(t.method)})(Gv=Gt.CallHierarchyPrepareRequest||(Gt.CallHierarchyPrepareRequest={}));var Bv;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=Mr.MessageDirection.clientToServer,t.type=new Mr.ProtocolRequestType(t.method)})(Bv=Gt.CallHierarchyIncomingCallsRequest||(Gt.CallHierarchyIncomingCallsRequest={}));var Vv;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=Mr.MessageDirection.clientToServer,t.type=new Mr.ProtocolRequestType(t.method)})(Vv=Gt.CallHierarchyOutgoingCallsRequest||(Gt.CallHierarchyOutgoingCallsRequest={}))});var Xf=S(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.SemanticTokensRefreshRequest=Ae.SemanticTokensRangeRequest=Ae.SemanticTokensDeltaRequest=Ae.SemanticTokensRequest=Ae.SemanticTokensRegistrationType=Ae.TokenFormat=void 0;var _n=Se(),Xv;(function(t){t.Relative="relative"})(Xv=Ae.TokenFormat||(Ae.TokenFormat={}));var Ms;(function(t){t.method="textDocument/semanticTokens",t.type=new _n.RegistrationType(t.method)})(Ms=Ae.SemanticTokensRegistrationType||(Ae.SemanticTokensRegistrationType={}));var Qv;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=_n.MessageDirection.clientToServer,t.type=new _n.ProtocolRequestType(t.method),t.registrationMethod=Ms.method})(Qv=Ae.SemanticTokensRequest||(Ae.SemanticTokensRequest={}));var Jv;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=_n.MessageDirection.clientToServer,t.type=new _n.ProtocolRequestType(t.method),t.registrationMethod=Ms.method})(Jv=Ae.SemanticTokensDeltaRequest||(Ae.SemanticTokensDeltaRequest={}));var Yv;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=_n.MessageDirection.clientToServer,t.type=new _n.ProtocolRequestType(t.method),t.registrationMethod=Ms.method})(Yv=Ae.SemanticTokensRangeRequest||(Ae.SemanticTokensRangeRequest={}));var Zv;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=_n.MessageDirection.clientToServer,t.type=new _n.ProtocolRequestType0(t.method)})(Zv=Ae.SemanticTokensRefreshRequest||(Ae.SemanticTokensRefreshRequest={}))});var Jf=S(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.ShowDocumentRequest=void 0;var Qf=Se(),ey;(function(t){t.method="window/showDocument",t.messageDirection=Qf.MessageDirection.serverToClient,t.type=new Qf.ProtocolRequestType(t.method)})(ey=xi.ShowDocumentRequest||(xi.ShowDocumentRequest={}))});var Zf=S(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.LinkedEditingRangeRequest=void 0;var Yf=Se(),ty;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=Yf.MessageDirection.clientToServer,t.type=new Yf.ProtocolRequestType(t.method)})(ty=Ei.LinkedEditingRangeRequest||(Ei.LinkedEditingRangeRequest={}))});var eh=S(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.WillDeleteFilesRequest=we.DidDeleteFilesNotification=we.DidRenameFilesNotification=we.WillRenameFilesRequest=we.DidCreateFilesNotification=we.WillCreateFilesRequest=we.FileOperationPatternKind=void 0;var Ot=Se(),ny;(function(t){t.file="file",t.folder="folder"})(ny=we.FileOperationPatternKind||(we.FileOperationPatternKind={}));var ry;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Ot.MessageDirection.clientToServer,t.type=new Ot.ProtocolRequestType(t.method)})(ry=we.WillCreateFilesRequest||(we.WillCreateFilesRequest={}));var iy;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Ot.MessageDirection.clientToServer,t.type=new Ot.ProtocolNotificationType(t.method)})(iy=we.DidCreateFilesNotification||(we.DidCreateFilesNotification={}));var sy;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Ot.MessageDirection.clientToServer,t.type=new Ot.ProtocolRequestType(t.method)})(sy=we.WillRenameFilesRequest||(we.WillRenameFilesRequest={}));var oy;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Ot.MessageDirection.clientToServer,t.type=new Ot.ProtocolNotificationType(t.method)})(oy=we.DidRenameFilesNotification||(we.DidRenameFilesNotification={}));var ay;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Ot.MessageDirection.clientToServer,t.type=new Ot.ProtocolNotificationType(t.method)})(ay=we.DidDeleteFilesNotification||(we.DidDeleteFilesNotification={}));var cy;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Ot.MessageDirection.clientToServer,t.type=new Ot.ProtocolRequestType(t.method)})(cy=we.WillDeleteFilesRequest||(we.WillDeleteFilesRequest={}))});var nh=S(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.MonikerRequest=Bt.MonikerKind=Bt.UniquenessLevel=void 0;var th=Se(),uy;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(uy=Bt.UniquenessLevel||(Bt.UniquenessLevel={}));var ly;(function(t){t.$import="import",t.$export="export",t.local="local"})(ly=Bt.MonikerKind||(Bt.MonikerKind={}));var dy;(function(t){t.method="textDocument/moniker",t.messageDirection=th.MessageDirection.clientToServer,t.type=new th.ProtocolRequestType(t.method)})(dy=Bt.MonikerRequest||(Bt.MonikerRequest={}))});var rh=S(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.TypeHierarchySubtypesRequest=Vt.TypeHierarchySupertypesRequest=Vt.TypeHierarchyPrepareRequest=void 0;var Lr=Se(),fy;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=Lr.MessageDirection.clientToServer,t.type=new Lr.ProtocolRequestType(t.method)})(fy=Vt.TypeHierarchyPrepareRequest||(Vt.TypeHierarchyPrepareRequest={}));var hy;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=Lr.MessageDirection.clientToServer,t.type=new Lr.ProtocolRequestType(t.method)})(hy=Vt.TypeHierarchySupertypesRequest||(Vt.TypeHierarchySupertypesRequest={}));var py;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=Lr.MessageDirection.clientToServer,t.type=new Lr.ProtocolRequestType(t.method)})(py=Vt.TypeHierarchySubtypesRequest||(Vt.TypeHierarchySubtypesRequest={}))});var ih=S(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.InlineValueRefreshRequest=Fn.InlineValueRequest=void 0;var Ls=Se(),gy;(function(t){t.method="textDocument/inlineValue",t.messageDirection=Ls.MessageDirection.clientToServer,t.type=new Ls.ProtocolRequestType(t.method)})(gy=Fn.InlineValueRequest||(Fn.InlineValueRequest={}));var my;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=Ls.MessageDirection.clientToServer,t.type=new Ls.ProtocolRequestType0(t.method)})(my=Fn.InlineValueRefreshRequest||(Fn.InlineValueRefreshRequest={}))});var sh=S(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.InlayHintRefreshRequest=Xt.InlayHintResolveRequest=Xt.InlayHintRequest=void 0;var Ar=Se(),vy;(function(t){t.method="textDocument/inlayHint",t.messageDirection=Ar.MessageDirection.clientToServer,t.type=new Ar.ProtocolRequestType(t.method)})(vy=Xt.InlayHintRequest||(Xt.InlayHintRequest={}));var yy;(function(t){t.method="inlayHint/resolve",t.messageDirection=Ar.MessageDirection.clientToServer,t.type=new Ar.ProtocolRequestType(t.method)})(yy=Xt.InlayHintResolveRequest||(Xt.InlayHintResolveRequest={}));var Cy;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=Ar.MessageDirection.clientToServer,t.type=new Ar.ProtocolRequestType0(t.method)})(Cy=Xt.InlayHintRefreshRequest||(Xt.InlayHintRefreshRequest={}))});var ah=S(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.DiagnosticRefreshRequest=Qe.WorkspaceDiagnosticRequest=Qe.DocumentDiagnosticRequest=Qe.DocumentDiagnosticReportKind=Qe.DiagnosticServerCancellationData=void 0;var oh=er(),_y=Os(),jr=Se(),Dy;(function(t){function e(n){let r=n;return r&&_y.boolean(r.retriggerRequest)}t.is=e})(Dy=Qe.DiagnosticServerCancellationData||(Qe.DiagnosticServerCancellationData={}));var Ry;(function(t){t.Full="full",t.Unchanged="unchanged"})(Ry=Qe.DocumentDiagnosticReportKind||(Qe.DocumentDiagnosticReportKind={}));var by;(function(t){t.method="textDocument/diagnostic",t.messageDirection=jr.MessageDirection.clientToServer,t.type=new jr.ProtocolRequestType(t.method),t.partialResult=new oh.ProgressType})(by=Qe.DocumentDiagnosticRequest||(Qe.DocumentDiagnosticRequest={}));var Sy;(function(t){t.method="workspace/diagnostic",t.messageDirection=jr.MessageDirection.clientToServer,t.type=new jr.ProtocolRequestType(t.method),t.partialResult=new oh.ProgressType})(Sy=Qe.WorkspaceDiagnosticRequest||(Qe.WorkspaceDiagnosticRequest={}));var wy;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=jr.MessageDirection.clientToServer,t.type=new jr.ProtocolRequestType0(t.method)})(wy=Qe.DiagnosticRefreshRequest||(Qe.DiagnosticRefreshRequest={}))});var lh=S(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.DidCloseNotebookDocumentNotification=ie.DidSaveNotebookDocumentNotification=ie.DidChangeNotebookDocumentNotification=ie.NotebookCellArrayChange=ie.DidOpenNotebookDocumentNotification=ie.NotebookDocumentSyncRegistrationType=ie.NotebookDocument=ie.NotebookCell=ie.ExecutionSummary=ie.NotebookCellKind=void 0;var ki=(ks(),ds(Es)),Qt=Os(),un=Se(),ch;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}t.is=e})(ch=ie.NotebookCellKind||(ie.NotebookCellKind={}));var uh;(function(t){function e(i,s){let o={executionOrder:i};return(s===!0||s===!1)&&(o.success=s),o}t.create=e;function n(i){let s=i;return Qt.objectLiteral(s)&&ki.uinteger.is(s.executionOrder)&&(s.success===void 0||Qt.boolean(s.success))}t.is=n;function r(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}t.equals=r})(uh=ie.ExecutionSummary||(ie.ExecutionSummary={}));var Gc;(function(t){function e(s,o){return{kind:s,document:o}}t.create=e;function n(s){let o=s;return Qt.objectLiteral(o)&&ch.is(o.kind)&&ki.DocumentUri.is(o.document)&&(o.metadata===void 0||Qt.objectLiteral(o.metadata))}t.is=n;function r(s,o){let a=new Set;return s.document!==o.document&&a.add("document"),s.kind!==o.kind&&a.add("kind"),s.executionSummary!==o.executionSummary&&a.add("executionSummary"),(s.metadata!==void 0||o.metadata!==void 0)&&!i(s.metadata,o.metadata)&&a.add("metadata"),(s.executionSummary!==void 0||o.executionSummary!==void 0)&&!uh.equals(s.executionSummary,o.executionSummary)&&a.add("executionSummary"),a}t.diff=r;function i(s,o){if(s===o)return!0;if(s==null||o===null||o===void 0||typeof s!=typeof o||typeof s!="object")return!1;let a=Array.isArray(s),u=Array.isArray(o);if(a!==u)return!1;if(a&&u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++)if(!i(s[l],o[l]))return!1}if(Qt.objectLiteral(s)&&Qt.objectLiteral(o)){let l=Object.keys(s),h=Object.keys(o);if(l.length!==h.length||(l.sort(),h.sort(),!i(l,h)))return!1;for(let g=0;g<l.length;g++){let p=l[g];if(!i(s[p],o[p]))return!1}}return!0}})(Gc=ie.NotebookCell||(ie.NotebookCell={}));var Ty;(function(t){function e(r,i,s,o){return{uri:r,notebookType:i,version:s,cells:o}}t.create=e;function n(r){let i=r;return Qt.objectLiteral(i)&&Qt.string(i.uri)&&ki.integer.is(i.version)&&Qt.typedArray(i.cells,Gc.is)}t.is=n})(Ty=ie.NotebookDocument||(ie.NotebookDocument={}));var Oi;(function(t){t.method="notebookDocument/sync",t.messageDirection=un.MessageDirection.clientToServer,t.type=new un.RegistrationType(t.method)})(Oi=ie.NotebookDocumentSyncRegistrationType||(ie.NotebookDocumentSyncRegistrationType={}));var Py;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=un.MessageDirection.clientToServer,t.type=new un.ProtocolNotificationType(t.method),t.registrationMethod=Oi.method})(Py=ie.DidOpenNotebookDocumentNotification||(ie.DidOpenNotebookDocumentNotification={}));var qy;(function(t){function e(r){let i=r;return Qt.objectLiteral(i)&&ki.uinteger.is(i.start)&&ki.uinteger.is(i.deleteCount)&&(i.cells===void 0||Qt.typedArray(i.cells,Gc.is))}t.is=e;function n(r,i,s){let o={start:r,deleteCount:i};return s!==void 0&&(o.cells=s),o}t.create=n})(qy=ie.NotebookCellArrayChange||(ie.NotebookCellArrayChange={}));var xy;(function(t){t.method="notebookDocument/didChange",t.messageDirection=un.MessageDirection.clientToServer,t.type=new un.ProtocolNotificationType(t.method),t.registrationMethod=Oi.method})(xy=ie.DidChangeNotebookDocumentNotification||(ie.DidChangeNotebookDocumentNotification={}));var Ey;(function(t){t.method="notebookDocument/didSave",t.messageDirection=un.MessageDirection.clientToServer,t.type=new un.ProtocolNotificationType(t.method),t.registrationMethod=Oi.method})(Ey=ie.DidSaveNotebookDocumentNotification||(ie.DidSaveNotebookDocumentNotification={}));var ky;(function(t){t.method="notebookDocument/didClose",t.messageDirection=un.MessageDirection.clientToServer,t.type=new un.ProtocolNotificationType(t.method),t.registrationMethod=Oi.method})(ky=ie.DidCloseNotebookDocumentNotification||(ie.DidCloseNotebookDocumentNotification={}))});var Ch=S(f=>{"use strict";Object.defineProperty(f,"__esModule",{value:!0});f.WorkspaceSymbolRequest=f.CodeActionResolveRequest=f.CodeActionRequest=f.DocumentSymbolRequest=f.DocumentHighlightRequest=f.ReferencesRequest=f.DefinitionRequest=f.SignatureHelpRequest=f.SignatureHelpTriggerKind=f.HoverRequest=f.CompletionResolveRequest=f.CompletionRequest=f.CompletionTriggerKind=f.PublishDiagnosticsNotification=f.WatchKind=f.RelativePattern=f.FileChangeType=f.DidChangeWatchedFilesNotification=f.WillSaveTextDocumentWaitUntilRequest=f.WillSaveTextDocumentNotification=f.TextDocumentSaveReason=f.DidSaveTextDocumentNotification=f.DidCloseTextDocumentNotification=f.DidChangeTextDocumentNotification=f.TextDocumentContentChangeEvent=f.DidOpenTextDocumentNotification=f.TextDocumentSyncKind=f.TelemetryEventNotification=f.LogMessageNotification=f.ShowMessageRequest=f.ShowMessageNotification=f.MessageType=f.DidChangeConfigurationNotification=f.ExitNotification=f.ShutdownRequest=f.InitializedNotification=f.InitializeErrorCodes=f.InitializeRequest=f.WorkDoneProgressOptions=f.TextDocumentRegistrationOptions=f.StaticRegistrationOptions=f.PositionEncodingKind=f.FailureHandlingKind=f.ResourceOperationKind=f.UnregistrationRequest=f.RegistrationRequest=f.DocumentSelector=f.NotebookCellTextDocumentFilter=f.NotebookDocumentFilter=f.TextDocumentFilter=void 0;f.TypeHierarchySubtypesRequest=f.TypeHierarchyPrepareRequest=f.MonikerRequest=f.MonikerKind=f.UniquenessLevel=f.WillDeleteFilesRequest=f.DidDeleteFilesNotification=f.WillRenameFilesRequest=f.DidRenameFilesNotification=f.WillCreateFilesRequest=f.DidCreateFilesNotification=f.FileOperationPatternKind=f.LinkedEditingRangeRequest=f.ShowDocumentRequest=f.SemanticTokensRegistrationType=f.SemanticTokensRefreshRequest=f.SemanticTokensRangeRequest=f.SemanticTokensDeltaRequest=f.SemanticTokensRequest=f.TokenFormat=f.CallHierarchyPrepareRequest=f.CallHierarchyOutgoingCallsRequest=f.CallHierarchyIncomingCallsRequest=f.WorkDoneProgressCancelNotification=f.WorkDoneProgressCreateRequest=f.WorkDoneProgress=f.SelectionRangeRequest=f.DeclarationRequest=f.FoldingRangeRequest=f.ColorPresentationRequest=f.DocumentColorRequest=f.ConfigurationRequest=f.DidChangeWorkspaceFoldersNotification=f.WorkspaceFoldersRequest=f.TypeDefinitionRequest=f.ImplementationRequest=f.ApplyWorkspaceEditRequest=f.ExecuteCommandRequest=f.PrepareRenameRequest=f.RenameRequest=f.PrepareSupportDefaultBehavior=f.DocumentOnTypeFormattingRequest=f.DocumentRangeFormattingRequest=f.DocumentFormattingRequest=f.DocumentLinkResolveRequest=f.DocumentLinkRequest=f.CodeLensRefreshRequest=f.CodeLensResolveRequest=f.CodeLensRequest=f.WorkspaceSymbolResolveRequest=void 0;f.DidCloseNotebookDocumentNotification=f.DidSaveNotebookDocumentNotification=f.DidChangeNotebookDocumentNotification=f.NotebookCellArrayChange=f.DidOpenNotebookDocumentNotification=f.NotebookDocumentSyncRegistrationType=f.NotebookDocument=f.NotebookCell=f.ExecutionSummary=f.NotebookCellKind=f.DiagnosticRefreshRequest=f.WorkspaceDiagnosticRequest=f.DocumentDiagnosticRequest=f.DocumentDiagnosticReportKind=f.DiagnosticServerCancellationData=f.InlayHintRefreshRequest=f.InlayHintResolveRequest=f.InlayHintRequest=f.InlineValueRefreshRequest=f.InlineValueRequest=f.TypeHierarchySupertypesRequest=void 0;var k=Se(),dh=(ks(),ds(Es)),Je=Os(),Oy=Ff();Object.defineProperty(f,"ImplementationRequest",{enumerable:!0,get:function(){return Oy.ImplementationRequest}});var Iy=Mf();Object.defineProperty(f,"TypeDefinitionRequest",{enumerable:!0,get:function(){return Iy.TypeDefinitionRequest}});var fh=Lf();Object.defineProperty(f,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return fh.WorkspaceFoldersRequest}});Object.defineProperty(f,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return fh.DidChangeWorkspaceFoldersNotification}});var Fy=jf();Object.defineProperty(f,"ConfigurationRequest",{enumerable:!0,get:function(){return Fy.ConfigurationRequest}});var hh=$f();Object.defineProperty(f,"DocumentColorRequest",{enumerable:!0,get:function(){return hh.DocumentColorRequest}});Object.defineProperty(f,"ColorPresentationRequest",{enumerable:!0,get:function(){return hh.ColorPresentationRequest}});var Ny=Wf();Object.defineProperty(f,"FoldingRangeRequest",{enumerable:!0,get:function(){return Ny.FoldingRangeRequest}});var My=Kf();Object.defineProperty(f,"DeclarationRequest",{enumerable:!0,get:function(){return My.DeclarationRequest}});var Ly=Gf();Object.defineProperty(f,"SelectionRangeRequest",{enumerable:!0,get:function(){return Ly.SelectionRangeRequest}});var Bc=Bf();Object.defineProperty(f,"WorkDoneProgress",{enumerable:!0,get:function(){return Bc.WorkDoneProgress}});Object.defineProperty(f,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Bc.WorkDoneProgressCreateRequest}});Object.defineProperty(f,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Bc.WorkDoneProgressCancelNotification}});var Vc=Vf();Object.defineProperty(f,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Vc.CallHierarchyIncomingCallsRequest}});Object.defineProperty(f,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Vc.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(f,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Vc.CallHierarchyPrepareRequest}});var $r=Xf();Object.defineProperty(f,"TokenFormat",{enumerable:!0,get:function(){return $r.TokenFormat}});Object.defineProperty(f,"SemanticTokensRequest",{enumerable:!0,get:function(){return $r.SemanticTokensRequest}});Object.defineProperty(f,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return $r.SemanticTokensDeltaRequest}});Object.defineProperty(f,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return $r.SemanticTokensRangeRequest}});Object.defineProperty(f,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return $r.SemanticTokensRefreshRequest}});Object.defineProperty(f,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return $r.SemanticTokensRegistrationType}});var Ay=Jf();Object.defineProperty(f,"ShowDocumentRequest",{enumerable:!0,get:function(){return Ay.ShowDocumentRequest}});var jy=Zf();Object.defineProperty(f,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return jy.LinkedEditingRangeRequest}});var rr=eh();Object.defineProperty(f,"FileOperationPatternKind",{enumerable:!0,get:function(){return rr.FileOperationPatternKind}});Object.defineProperty(f,"DidCreateFilesNotification",{enumerable:!0,get:function(){return rr.DidCreateFilesNotification}});Object.defineProperty(f,"WillCreateFilesRequest",{enumerable:!0,get:function(){return rr.WillCreateFilesRequest}});Object.defineProperty(f,"DidRenameFilesNotification",{enumerable:!0,get:function(){return rr.DidRenameFilesNotification}});Object.defineProperty(f,"WillRenameFilesRequest",{enumerable:!0,get:function(){return rr.WillRenameFilesRequest}});Object.defineProperty(f,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return rr.DidDeleteFilesNotification}});Object.defineProperty(f,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return rr.WillDeleteFilesRequest}});var Xc=nh();Object.defineProperty(f,"UniquenessLevel",{enumerable:!0,get:function(){return Xc.UniquenessLevel}});Object.defineProperty(f,"MonikerKind",{enumerable:!0,get:function(){return Xc.MonikerKind}});Object.defineProperty(f,"MonikerRequest",{enumerable:!0,get:function(){return Xc.MonikerRequest}});var Qc=rh();Object.defineProperty(f,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Qc.TypeHierarchyPrepareRequest}});Object.defineProperty(f,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Qc.TypeHierarchySubtypesRequest}});Object.defineProperty(f,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Qc.TypeHierarchySupertypesRequest}});var ph=ih();Object.defineProperty(f,"InlineValueRequest",{enumerable:!0,get:function(){return ph.InlineValueRequest}});Object.defineProperty(f,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return ph.InlineValueRefreshRequest}});var Jc=sh();Object.defineProperty(f,"InlayHintRequest",{enumerable:!0,get:function(){return Jc.InlayHintRequest}});Object.defineProperty(f,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Jc.InlayHintResolveRequest}});Object.defineProperty(f,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Jc.InlayHintRefreshRequest}});var Ii=ah();Object.defineProperty(f,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Ii.DiagnosticServerCancellationData}});Object.defineProperty(f,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Ii.DocumentDiagnosticReportKind}});Object.defineProperty(f,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Ii.DocumentDiagnosticRequest}});Object.defineProperty(f,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Ii.WorkspaceDiagnosticRequest}});Object.defineProperty(f,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Ii.DiagnosticRefreshRequest}});var ln=lh();Object.defineProperty(f,"NotebookCellKind",{enumerable:!0,get:function(){return ln.NotebookCellKind}});Object.defineProperty(f,"ExecutionSummary",{enumerable:!0,get:function(){return ln.ExecutionSummary}});Object.defineProperty(f,"NotebookCell",{enumerable:!0,get:function(){return ln.NotebookCell}});Object.defineProperty(f,"NotebookDocument",{enumerable:!0,get:function(){return ln.NotebookDocument}});Object.defineProperty(f,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return ln.NotebookDocumentSyncRegistrationType}});Object.defineProperty(f,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return ln.DidOpenNotebookDocumentNotification}});Object.defineProperty(f,"NotebookCellArrayChange",{enumerable:!0,get:function(){return ln.NotebookCellArrayChange}});Object.defineProperty(f,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return ln.DidChangeNotebookDocumentNotification}});Object.defineProperty(f,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return ln.DidSaveNotebookDocumentNotification}});Object.defineProperty(f,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return ln.DidCloseNotebookDocumentNotification}});var gh;(function(t){function e(n){let r=n;return Je.string(r.language)||Je.string(r.scheme)||Je.string(r.pattern)}t.is=e})(gh=f.TextDocumentFilter||(f.TextDocumentFilter={}));var mh;(function(t){function e(n){let r=n;return Je.objectLiteral(r)&&(Je.string(r.notebookType)||Je.string(r.scheme)||Je.string(r.pattern))}t.is=e})(mh=f.NotebookDocumentFilter||(f.NotebookDocumentFilter={}));var vh;(function(t){function e(n){let r=n;return Je.objectLiteral(r)&&(Je.string(r.notebook)||mh.is(r.notebook))&&(r.language===void 0||Je.string(r.language))}t.is=e})(vh=f.NotebookCellTextDocumentFilter||(f.NotebookCellTextDocumentFilter={}));var yh;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Je.string(r)&&!gh.is(r)&&!vh.is(r))return!1;return!0}t.is=e})(yh=f.DocumentSelector||(f.DocumentSelector={}));var $y;(function(t){t.method="client/registerCapability",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolRequestType(t.method)})($y=f.RegistrationRequest||(f.RegistrationRequest={}));var Hy;(function(t){t.method="client/unregisterCapability",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolRequestType(t.method)})(Hy=f.UnregistrationRequest||(f.UnregistrationRequest={}));var Wy;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Wy=f.ResourceOperationKind||(f.ResourceOperationKind={}));var Uy;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Uy=f.FailureHandlingKind||(f.FailureHandlingKind={}));var Ky;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Ky=f.PositionEncodingKind||(f.PositionEncodingKind={}));var zy;(function(t){function e(n){let r=n;return r&&Je.string(r.id)&&r.id.length>0}t.hasId=e})(zy=f.StaticRegistrationOptions||(f.StaticRegistrationOptions={}));var Gy;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||yh.is(r.documentSelector))}t.is=e})(Gy=f.TextDocumentRegistrationOptions||(f.TextDocumentRegistrationOptions={}));var By;(function(t){function e(r){let i=r;return Je.objectLiteral(i)&&(i.workDoneProgress===void 0||Je.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&Je.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(By=f.WorkDoneProgressOptions||(f.WorkDoneProgressOptions={}));var Vy;(function(t){t.method="initialize",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(Vy=f.InitializeRequest||(f.InitializeRequest={}));var Xy;(function(t){t.unknownProtocolVersion=1})(Xy=f.InitializeErrorCodes||(f.InitializeErrorCodes={}));var Qy;(function(t){t.method="initialized",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(Qy=f.InitializedNotification||(f.InitializedNotification={}));var Jy;(function(t){t.method="shutdown",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType0(t.method)})(Jy=f.ShutdownRequest||(f.ShutdownRequest={}));var Yy;(function(t){t.method="exit",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType0(t.method)})(Yy=f.ExitNotification||(f.ExitNotification={}));var Zy;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(Zy=f.DidChangeConfigurationNotification||(f.DidChangeConfigurationNotification={}));var eC;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(eC=f.MessageType||(f.MessageType={}));var tC;(function(t){t.method="window/showMessage",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolNotificationType(t.method)})(tC=f.ShowMessageNotification||(f.ShowMessageNotification={}));var nC;(function(t){t.method="window/showMessageRequest",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolRequestType(t.method)})(nC=f.ShowMessageRequest||(f.ShowMessageRequest={}));var rC;(function(t){t.method="window/logMessage",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolNotificationType(t.method)})(rC=f.LogMessageNotification||(f.LogMessageNotification={}));var iC;(function(t){t.method="telemetry/event",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolNotificationType(t.method)})(iC=f.TelemetryEventNotification||(f.TelemetryEventNotification={}));var sC;(function(t){t.None=0,t.Full=1,t.Incremental=2})(sC=f.TextDocumentSyncKind||(f.TextDocumentSyncKind={}));var oC;(function(t){t.method="textDocument/didOpen",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(oC=f.DidOpenTextDocumentNotification||(f.DidOpenTextDocumentNotification={}));var aC;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(aC=f.TextDocumentContentChangeEvent||(f.TextDocumentContentChangeEvent={}));var cC;(function(t){t.method="textDocument/didChange",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(cC=f.DidChangeTextDocumentNotification||(f.DidChangeTextDocumentNotification={}));var uC;(function(t){t.method="textDocument/didClose",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(uC=f.DidCloseTextDocumentNotification||(f.DidCloseTextDocumentNotification={}));var lC;(function(t){t.method="textDocument/didSave",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(lC=f.DidSaveTextDocumentNotification||(f.DidSaveTextDocumentNotification={}));var dC;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(dC=f.TextDocumentSaveReason||(f.TextDocumentSaveReason={}));var fC;(function(t){t.method="textDocument/willSave",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(fC=f.WillSaveTextDocumentNotification||(f.WillSaveTextDocumentNotification={}));var hC;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(hC=f.WillSaveTextDocumentWaitUntilRequest||(f.WillSaveTextDocumentWaitUntilRequest={}));var pC;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(pC=f.DidChangeWatchedFilesNotification||(f.DidChangeWatchedFilesNotification={}));var gC;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(gC=f.FileChangeType||(f.FileChangeType={}));var mC;(function(t){function e(n){let r=n;return Je.objectLiteral(r)&&(dh.URI.is(r.baseUri)||dh.WorkspaceFolder.is(r.baseUri))&&Je.string(r.pattern)}t.is=e})(mC=f.RelativePattern||(f.RelativePattern={}));var vC;(function(t){t.Create=1,t.Change=2,t.Delete=4})(vC=f.WatchKind||(f.WatchKind={}));var yC;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolNotificationType(t.method)})(yC=f.PublishDiagnosticsNotification||(f.PublishDiagnosticsNotification={}));var CC;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(CC=f.CompletionTriggerKind||(f.CompletionTriggerKind={}));var _C;(function(t){t.method="textDocument/completion",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(_C=f.CompletionRequest||(f.CompletionRequest={}));var DC;(function(t){t.method="completionItem/resolve",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(DC=f.CompletionResolveRequest||(f.CompletionResolveRequest={}));var RC;(function(t){t.method="textDocument/hover",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(RC=f.HoverRequest||(f.HoverRequest={}));var bC;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(bC=f.SignatureHelpTriggerKind||(f.SignatureHelpTriggerKind={}));var SC;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(SC=f.SignatureHelpRequest||(f.SignatureHelpRequest={}));var wC;(function(t){t.method="textDocument/definition",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(wC=f.DefinitionRequest||(f.DefinitionRequest={}));var TC;(function(t){t.method="textDocument/references",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(TC=f.ReferencesRequest||(f.ReferencesRequest={}));var PC;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(PC=f.DocumentHighlightRequest||(f.DocumentHighlightRequest={}));var qC;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(qC=f.DocumentSymbolRequest||(f.DocumentSymbolRequest={}));var xC;(function(t){t.method="textDocument/codeAction",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(xC=f.CodeActionRequest||(f.CodeActionRequest={}));var EC;(function(t){t.method="codeAction/resolve",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(EC=f.CodeActionResolveRequest||(f.CodeActionResolveRequest={}));var kC;(function(t){t.method="workspace/symbol",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(kC=f.WorkspaceSymbolRequest||(f.WorkspaceSymbolRequest={}));var OC;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(OC=f.WorkspaceSymbolResolveRequest||(f.WorkspaceSymbolResolveRequest={}));var IC;(function(t){t.method="textDocument/codeLens",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(IC=f.CodeLensRequest||(f.CodeLensRequest={}));var FC;(function(t){t.method="codeLens/resolve",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(FC=f.CodeLensResolveRequest||(f.CodeLensResolveRequest={}));var NC;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolRequestType0(t.method)})(NC=f.CodeLensRefreshRequest||(f.CodeLensRefreshRequest={}));var MC;(function(t){t.method="textDocument/documentLink",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(MC=f.DocumentLinkRequest||(f.DocumentLinkRequest={}));var LC;(function(t){t.method="documentLink/resolve",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(LC=f.DocumentLinkResolveRequest||(f.DocumentLinkResolveRequest={}));var AC;(function(t){t.method="textDocument/formatting",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(AC=f.DocumentFormattingRequest||(f.DocumentFormattingRequest={}));var jC;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(jC=f.DocumentRangeFormattingRequest||(f.DocumentRangeFormattingRequest={}));var $C;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})($C=f.DocumentOnTypeFormattingRequest||(f.DocumentOnTypeFormattingRequest={}));var HC;(function(t){t.Identifier=1})(HC=f.PrepareSupportDefaultBehavior||(f.PrepareSupportDefaultBehavior={}));var WC;(function(t){t.method="textDocument/rename",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(WC=f.RenameRequest||(f.RenameRequest={}));var UC;(function(t){t.method="textDocument/prepareRename",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(UC=f.PrepareRenameRequest||(f.PrepareRenameRequest={}));var KC;(function(t){t.method="workspace/executeCommand",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(KC=f.ExecuteCommandRequest||(f.ExecuteCommandRequest={}));var zC;(function(t){t.method="workspace/applyEdit",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolRequestType("workspace/applyEdit")})(zC=f.ApplyWorkspaceEditRequest||(f.ApplyWorkspaceEditRequest={}))});var Dh=S(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.createProtocolConnection=void 0;var _h=er();function GC(t,e,n,r){return _h.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,_h.createMessageConnection)(t,e,n,r)}As.createProtocolConnection=GC});var Rh=S(lt=>{"use strict";var BC=lt&&lt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),js=lt&&lt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&BC(e,t,n)};Object.defineProperty(lt,"__esModule",{value:!0});lt.LSPErrorCodes=lt.createProtocolConnection=void 0;js(er(),lt);js((ks(),ds(Es)),lt);js(Se(),lt);js(Ch(),lt);var VC=Dh();Object.defineProperty(lt,"createProtocolConnection",{enumerable:!0,get:function(){return VC.createProtocolConnection}});var XC;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(XC=lt.LSPErrorCodes||(lt.LSPErrorCodes={}))});var G=S(dn=>{"use strict";var QC=dn&&dn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),bh=dn&&dn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&QC(e,t,n)};Object.defineProperty(dn,"__esModule",{value:!0});dn.createProtocolConnection=void 0;var JC=Ga();bh(Ga(),dn);bh(Rh(),dn);function YC(t,e,n,r){return(0,JC.createMessageConnection)(t,e,n,r)}dn.createProtocolConnection=YC});var Mi=S(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.forEach=nt.mapAsync=nt.map=nt.clearTestMode=nt.setTestMode=nt.Semaphore=nt.Delayer=void 0;var Ni=G(),Yc=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,n=this.defaultDelay){return this.task=e,n>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(n>=0||this.timeout===void 0)&&(this.timeout=(0,Ni.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},n>=0?n:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};nt.Delayer=Yc;var Zc=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Ni.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};nt.Semaphore=Zc;var eu=!1;function ZC(){eu=!0}nt.setTestMode=ZC;function e_(){eu=!1}nt.clearTestMode=e_;var Sh=15,Fi=class{constructor(e=Sh){this.yieldAfter=eu===!0?Math.max(e,2):Math.max(e,Sh),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,n=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||n<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function t_(t,e,n,r){if(t.length===0)return[];let i=new Array(t.length),s=new Fi(r==null?void 0:r.yieldAfter);function o(u){s.start();for(let l=u;l<t.length;l++)if(i[l]=e(t[l]),s.shouldYield())return r!=null&&r.yieldCallback&&r.yieldCallback(),l+1;return-1}let a=o(0);for(;a!==-1&&!(n!==void 0&&n.isCancellationRequested);)a=await new Promise(u=>{(0,Ni.RAL)().timer.setImmediate(()=>{u(o(a))})});return i}nt.map=t_;async function n_(t,e,n,r){if(t.length===0)return[];let i=new Array(t.length),s=new Fi(r==null?void 0:r.yieldAfter);async function o(u){s.start();for(let l=u;l<t.length;l++)if(i[l]=await e(t[l],n),s.shouldYield())return r!=null&&r.yieldCallback&&r.yieldCallback(),l+1;return-1}let a=await o(0);for(;a!==-1&&!(n!==void 0&&n.isCancellationRequested);)a=await new Promise(u=>{(0,Ni.RAL)().timer.setImmediate(()=>{u(o(a))})});return i}nt.mapAsync=n_;async function r_(t,e,n,r){if(t.length===0)return;let i=new Fi(r==null?void 0:r.yieldAfter);function s(a){i.start();for(let u=a;u<t.length;u++)if(e(t[u]),i.shouldYield())return r!=null&&r.yieldCallback&&r.yieldCallback(),u+1;return-1}let o=s(0);for(;o!==-1&&!(n!==void 0&&n.isCancellationRequested);)o=await new Promise(a=>{(0,Ni.RAL)().timer.setImmediate(()=>{a(s(o))})})}nt.forEach=r_});var ru=S(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});var i_=require("vscode"),tu=class extends i_.CompletionItem{constructor(e){super(e)}};nu.default=tu});var ou=S(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});var s_=require("vscode"),iu=class extends s_.CodeLens{constructor(e){super(e)}};su.default=iu});var uu=S(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});var o_=require("vscode"),au=class extends o_.DocumentLink{constructor(e,n){super(e,n)}};cu.default=au});var fu=S(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});var a_=require("vscode"),lu=class extends a_.CodeAction{constructor(e,n){super(e),this.data=n}};du.default=lu});var gu=S(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.ProtocolDiagnostic=ir.DiagnosticCode=void 0;var c_=require("vscode"),hu=Et(),u_;(function(t){function e(n){let r=n;return r!=null&&(hu.number(r.value)||hu.string(r.value))&&hu.string(r.target)}t.is=e})(u_=ir.DiagnosticCode||(ir.DiagnosticCode={}));var pu=class extends c_.Diagnostic{constructor(e,n,r,i){super(e,n,r),this.data=i,this.hasDiagnosticCode=!1}};ir.ProtocolDiagnostic=pu});var yu=S(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});var l_=require("vscode"),mu=class extends l_.CallHierarchyItem{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,o),a!==void 0&&(this.data=a)}};vu.default=mu});var Du=S(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});var d_=require("vscode"),Cu=class extends d_.TypeHierarchyItem{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,o),a!==void 0&&(this.data=a)}};_u.default=Cu});var Su=S(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});var $s=require("vscode"),Ru=class extends $s.SymbolInformation{constructor(e,n,r,i,s){let o=!(i instanceof $s.Uri);super(e,n,r,o?i:new $s.Location(i,new $s.Range(0,0,0,0))),this.hasRange=o,s!==void 0&&(this.data=s)}};bu.default=Ru});var Pu=S(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});var f_=require("vscode"),wu=class extends f_.InlayHint{constructor(e,n,r){super(e,n,r)}};Tu.default=wu});var Ph=S(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.createConverter=void 0;var je=require("vscode"),V=G(),Hr=Et(),wh=Mi(),h_=ru(),p_=ou(),g_=uu(),m_=fu(),Th=gu(),v_=yu(),y_=Du(),C_=Su(),__=Pu(),qu;(function(t){function e(n){let r=n;return r&&!!r.inserting&&!!r.replacing}t.is=e})(qu||(qu={}));function D_(t){let n=t||(d=>d.toString());function r(d){return n(d)}function i(d){return{uri:n(d.uri)}}function s(d){return{uri:n(d.uri),languageId:d.languageId,version:d.version,text:d.getText()}}function o(d){return{uri:n(d.uri),version:d.version}}function a(d){return{textDocument:s(d)}}function u(d){let R=d;return!!R.document&&!!R.contentChanges}function l(d){let R=d;return!!R.uri&&!!R.version}function h(d){if(l(d))return{textDocument:{uri:n(d.uri),version:d.version},contentChanges:[{text:d.getText()}]};if(u(d)){let R=d.document;return{textDocument:{uri:n(R.uri),version:R.version},contentChanges:d.contentChanges.map(J=>{let oe=J.range;return{range:{start:{line:oe.start.line,character:oe.start.character},end:{line:oe.end.line,character:oe.end.character}},rangeLength:J.rangeLength,text:J.text}})}}else throw Error("Unsupported text document change parameter")}function g(d){return{textDocument:i(d)}}function p(d,R=!1){let M={textDocument:i(d)};return R&&(M.text=d.getText()),M}function v(d){switch(d){case je.TextDocumentSaveReason.Manual:return V.TextDocumentSaveReason.Manual;case je.TextDocumentSaveReason.AfterDelay:return V.TextDocumentSaveReason.AfterDelay;case je.TextDocumentSaveReason.FocusOut:return V.TextDocumentSaveReason.FocusOut}return V.TextDocumentSaveReason.Manual}function y(d){return{textDocument:i(d.document),reason:v(d.reason)}}function _(d){return{files:d.files.map(R=>({uri:n(R)}))}}function b(d){return{files:d.files.map(R=>({oldUri:n(R.oldUri),newUri:n(R.newUri)}))}}function w(d){return{files:d.files.map(R=>({uri:n(R)}))}}function x(d){return{files:d.files.map(R=>({uri:n(R)}))}}function E(d){return{files:d.files.map(R=>({oldUri:n(R.oldUri),newUri:n(R.newUri)}))}}function F(d){return{files:d.files.map(R=>({uri:n(R)}))}}function z(d,R){return{textDocument:i(d),position:mt(R)}}function Ne(d){switch(d){case je.CompletionTriggerKind.TriggerCharacter:return V.CompletionTriggerKind.TriggerCharacter;case je.CompletionTriggerKind.TriggerForIncompleteCompletions:return V.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return V.CompletionTriggerKind.Invoked}}function De(d,R,M){return{textDocument:i(d),position:mt(R),context:{triggerKind:Ne(M.triggerKind),triggerCharacter:M.triggerCharacter}}}function gt(d){switch(d){case je.SignatureHelpTriggerKind.Invoke:return V.SignatureHelpTriggerKind.Invoked;case je.SignatureHelpTriggerKind.TriggerCharacter:return V.SignatureHelpTriggerKind.TriggerCharacter;case je.SignatureHelpTriggerKind.ContentChange:return V.SignatureHelpTriggerKind.ContentChange}}function Ze(d){return{label:d.label}}function Dt(d){return d.map(Ze)}function en(d){return{label:d.label,parameters:Dt(d.parameters)}}function At(d){return d.map(en)}function Pt(d){return d===void 0?d:{signatures:At(d.signatures),activeSignature:d.activeSignature,activeParameter:d.activeParameter}}function tn(d,R,M){return{textDocument:i(d),position:mt(R),context:{isRetrigger:M.isRetrigger,triggerCharacter:M.triggerCharacter,triggerKind:gt(M.triggerKind),activeSignatureHelp:Pt(M.activeSignatureHelp)}}}function mt(d){return{line:d.line,character:d.character}}function vt(d){return d==null?d:{line:d.line>V.uinteger.MAX_VALUE?V.uinteger.MAX_VALUE:d.line,character:d.character>V.uinteger.MAX_VALUE?V.uinteger.MAX_VALUE:d.character}}function Hn(d,R){return wh.map(d,vt,R)}function Ee(d){return d==null?d:{start:vt(d.start),end:vt(d.end)}}function st(d){return d==null?d:V.Location.create(r(d.uri),Ee(d.range))}function ot(d){switch(d){case je.DiagnosticSeverity.Error:return V.DiagnosticSeverity.Error;case je.DiagnosticSeverity.Warning:return V.DiagnosticSeverity.Warning;case je.DiagnosticSeverity.Information:return V.DiagnosticSeverity.Information;case je.DiagnosticSeverity.Hint:return V.DiagnosticSeverity.Hint}}function nn(d){if(!d)return;let R=[];for(let M of d){let J=at(M);J!==void 0&&R.push(J)}return R.length>0?R:void 0}function at(d){switch(d){case je.DiagnosticTag.Unnecessary:return V.DiagnosticTag.Unnecessary;case je.DiagnosticTag.Deprecated:return V.DiagnosticTag.Deprecated;default:return}}function si(d){return{message:d.message,location:st(d.location)}}function Cr(d){return d.map(si)}function _r(d){if(d!=null)return Hr.number(d)||Hr.string(d)?d:{value:d.value,target:r(d.target)}}function Wn(d){let R=V.Diagnostic.create(Ee(d.range),d.message),M=d instanceof Th.ProtocolDiagnostic?d:void 0;M!==void 0&&M.data!==void 0&&(R.data=M.data);let J=_r(d.code);return Th.DiagnosticCode.is(J)?M!==void 0&&M.hasDiagnosticCode?R.code=J:(R.code=J.value,R.codeDescription={href:J.target}):R.code=J,Hr.number(d.severity)&&(R.severity=ot(d.severity)),Array.isArray(d.tags)&&(R.tags=nn(d.tags)),d.relatedInformation&&(R.relatedInformation=Cr(d.relatedInformation)),d.source&&(R.source=d.source),R}function Un(d,R){return d==null?d:wh.map(d,Wn,R)}function oi(d,R){switch(d){case"$string":return R;case V.MarkupKind.PlainText:return{kind:d,value:R};case V.MarkupKind.Markdown:return{kind:d,value:R.value};default:return`Unsupported Markup content received. Kind is: ${d}`}}function Dr(d){switch(d){case je.CompletionItemTag.Deprecated:return V.CompletionItemTag.Deprecated}}function Rr(d){if(d===void 0)return d;let R=[];for(let M of d){let J=Dr(M);J!==void 0&&R.push(J)}return R}function qt(d,R){return R!==void 0?R:d+1}function rn(d,R=!1){let M,J;Hr.string(d.label)?M=d.label:(M=d.label.label,R&&(d.label.detail!==void 0||d.label.description!==void 0)&&(J={detail:d.label.detail,description:d.label.description}));let oe={label:M};J!==void 0&&(oe.labelDetails=J);let Be=d instanceof h_.default?d:void 0;d.detail&&(oe.detail=d.detail),d.documentation&&(!Be||Be.documentationFormat==="$string"?oe.documentation=d.documentation:oe.documentation=oi(Be.documentationFormat,d.documentation)),d.filterText&&(oe.filterText=d.filterText),br(oe,d),Hr.number(d.kind)&&(oe.kind=qt(d.kind,Be&&Be.originalItemKind)),d.sortText&&(oe.sortText=d.sortText),d.additionalTextEdits&&(oe.additionalTextEdits=En(d.additionalTextEdits)),d.commitCharacters&&(oe.commitCharacters=d.commitCharacters.slice()),d.command&&(oe.command=Wt(d.command)),(d.preselect===!0||d.preselect===!1)&&(oe.preselect=d.preselect);let pn=Rr(d.tags);if(Be){if(Be.data!==void 0&&(oe.data=Be.data),Be.deprecated===!0||Be.deprecated===!1){if(Be.deprecated===!0&&pn!==void 0&&pn.length>0){let ci=pn.indexOf(je.CompletionItemTag.Deprecated);ci!==-1&&pn.splice(ci,1)}oe.deprecated=Be.deprecated}Be.insertTextMode!==void 0&&(oe.insertTextMode=Be.insertTextMode)}return pn!==void 0&&pn.length>0&&(oe.tags=pn),oe.insertTextMode===void 0&&d.keepWhitespace===!0&&(oe.insertTextMode=V.InsertTextMode.adjustIndentation),oe}function br(d,R){let M=V.InsertTextFormat.PlainText,J,oe;R.textEdit?(J=R.textEdit.newText,oe=R.textEdit.range):R.insertText instanceof je.SnippetString?(M=V.InsertTextFormat.Snippet,J=R.insertText.value):J=R.insertText,R.range&&(oe=R.range),d.insertTextFormat=M,R.fromEdit&&J!==void 0&&oe!==void 0?d.textEdit=jt(J,oe):d.insertText=J}function jt(d,R){return qu.is(R)?V.InsertReplaceEdit.create(d,Ee(R.inserting),Ee(R.replacing)):{newText:d,range:Ee(R)}}function Kn(d){return{range:Ee(d.range),newText:d.newText}}function En(d){return d==null?d:d.map(Kn)}function $t(d){return d<=je.SymbolKind.TypeParameter?d+1:V.SymbolKind.Property}function xt(d){return d}function Ue(d){return d.map(xt)}function ai(d,R,M){return{textDocument:i(d),position:mt(R),context:{includeDeclaration:M.includeDeclaration}}}async function Rt(d,R){let M=V.CodeAction.create(d.title);if(d instanceof m_.default&&d.data!==void 0&&(M.data=d.data),d.kind!==void 0&&(M.kind=zn(d.kind)),d.diagnostics!==void 0&&(M.diagnostics=await Un(d.diagnostics,R)),d.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return d.command!==void 0&&(M.command=Wt(d.command)),d.isPreferred!==void 0&&(M.isPreferred=d.isPreferred),d.disabled!==void 0&&(M.disabled={reason:d.disabled.reason}),M}async function Ht(d,R){if(d==null)return d;let M;return d.only&&Hr.string(d.only.value)&&(M=[d.only.value]),V.CodeActionContext.create(await Un(d.diagnostics,R),M,Sr(d.triggerKind))}function Sr(d){switch(d){case je.CodeActionTriggerKind.Invoke:return V.CodeActionTriggerKind.Invoked;case je.CodeActionTriggerKind.Automatic:return V.CodeActionTriggerKind.Automatic;default:return}}function zn(d){if(d!=null)return d.value}function Gn(d){return d==null?d:V.InlineValueContext.create(d.frameId,Ee(d.stoppedLocation))}function Wt(d){let R=V.Command.create(d.title,d.command);return d.arguments&&(R.arguments=d.arguments),R}function sn(d){let R=V.CodeLens.create(Ee(d.range));return d.command&&(R.command=Wt(d.command)),d instanceof p_.default&&d.data&&(R.data=d.data),R}function m(d,R){let M={tabSize:d.tabSize,insertSpaces:d.insertSpaces};return R.trimTrailingWhitespace&&(M.trimTrailingWhitespace=!0),R.trimFinalNewlines&&(M.trimFinalNewlines=!0),R.insertFinalNewline&&(M.insertFinalNewline=!0),M}function P(d){return{textDocument:i(d)}}function O(d){return{textDocument:i(d)}}function L(d){let R=V.DocumentLink.create(Ee(d.range));d.target&&(R.target=r(d.target)),d.tooltip!==void 0&&(R.tooltip=d.tooltip);let M=d instanceof g_.default?d:void 0;return M&&M.data&&(R.data=M.data),R}function le(d){return{textDocument:i(d)}}function de(d){let R={name:d.name,kind:$t(d.kind),uri:r(d.uri),range:Ee(d.range),selectionRange:Ee(d.selectionRange)};return d.detail!==void 0&&d.detail.length>0&&(R.detail=d.detail),d.tags!==void 0&&(R.tags=Ue(d.tags)),d instanceof v_.default&&d.data!==void 0&&(R.data=d.data),R}function fe(d){let R={name:d.name,kind:$t(d.kind),uri:r(d.uri),range:Ee(d.range),selectionRange:Ee(d.selectionRange)};return d.detail!==void 0&&d.detail.length>0&&(R.detail=d.detail),d.tags!==void 0&&(R.tags=Ue(d.tags)),d instanceof y_.default&&d.data!==void 0&&(R.data=d.data),R}function be(d){let R=d instanceof C_.default?{name:d.name,kind:$t(d.kind),location:d.hasRange?st(d.location):{uri:n(d.location.uri)},data:d.data}:{name:d.name,kind:$t(d.kind),location:st(d.location)};return d.tags!==void 0&&(R.tags=Ue(d.tags)),d.containerName!==""&&(R.containerName=d.containerName),R}function ee(d){let R=typeof d.label=="string"?d.label:d.label.map(ve),M=V.InlayHint.create(vt(d.position),R);return d.kind!==void 0&&(M.kind=d.kind),d.textEdits!==void 0&&(M.textEdits=En(d.textEdits)),d.tooltip!==void 0&&(M.tooltip=te(d.tooltip)),d.paddingLeft!==void 0&&(M.paddingLeft=d.paddingLeft),d.paddingRight!==void 0&&(M.paddingRight=d.paddingRight),d instanceof __.default&&d.data!==void 0&&(M.data=d.data),M}function ve(d){let R=V.InlayHintLabelPart.create(d.value);return d.location!==void 0&&(R.location=st(d.location)),d.command!==void 0&&(R.command=Wt(d.command)),d.tooltip!==void 0&&(R.tooltip=te(d.tooltip)),R}function te(d){return typeof d=="string"?d:{kind:V.MarkupKind.Markdown,value:d.value}}return{asUri:r,asTextDocumentIdentifier:i,asTextDocumentItem:s,asVersionedTextDocumentIdentifier:o,asOpenTextDocumentParams:a,asChangeTextDocumentParams:h,asCloseTextDocumentParams:g,asSaveTextDocumentParams:p,asWillSaveTextDocumentParams:y,asDidCreateFilesParams:_,asDidRenameFilesParams:b,asDidDeleteFilesParams:w,asWillCreateFilesParams:x,asWillRenameFilesParams:E,asWillDeleteFilesParams:F,asTextDocumentPositionParams:z,asCompletionParams:De,asSignatureHelpParams:tn,asWorkerPosition:mt,asRange:Ee,asPosition:vt,asPositions:Hn,asLocation:st,asDiagnosticSeverity:ot,asDiagnosticTag:at,asDiagnostic:Wn,asDiagnostics:Un,asCompletionItem:rn,asTextEdit:Kn,asSymbolKind:$t,asSymbolTag:xt,asSymbolTags:Ue,asReferenceParams:ai,asCodeAction:Rt,asCodeActionContext:Ht,asInlineValueContext:Gn,asCommand:Wt,asCodeLens:sn,asFormattingOptions:m,asDocumentSymbolParams:P,asCodeLensParams:O,asDocumentLink:L,asDocumentLinkParams:le,asCallHierarchyItem:de,asTypeHierarchyItem:fe,asInlayHint:ee,asWorkspaceSymbol:be}}Hs.createConverter=D_});var Eh=S(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.createConverter=void 0;var N=require("vscode"),K=G(),It=Et(),ce=Mi(),R_=ru(),b_=ou(),S_=uu(),w_=fu(),qh=gu(),T_=yu(),P_=Du(),q_=Su(),x_=Pu(),xh=G(),Ws;(function(t){function e(n){let r=n;return r&&It.string(r.language)&&It.string(r.value)}t.is=e})(Ws||(Ws={}));function E_(t,e,n){let i=t||(c=>N.Uri.parse(c));function s(c){return i(c)}function o(c){let C=[];for(let q of c)if(typeof q=="string")C.push(q);else if(xh.NotebookCellTextDocumentFilter.is(q))if(typeof q.notebook=="string")C.push({notebookType:q.notebook,language:q.language});else{let H=q.notebook.notebookType??"*";C.push({notebookType:H,scheme:q.notebook.scheme,pattern:q.notebook.pattern,language:q.language})}else xh.TextDocumentFilter.is(q)&&C.push({language:q.language,scheme:q.scheme,pattern:q.pattern});return C}async function a(c,C){return ce.map(c,l,C)}function u(c){let C=new Array(c.length);for(let q=0;q<c.length;q++)C[q]=l(c[q]);return C}function l(c){let C=new qh.ProtocolDiagnostic(y(c.range),c.message,b(c.severity),c.data);if(c.code!==void 0){if(typeof c.code=="string"||typeof c.code=="number")K.CodeDescription.is(c.codeDescription)?C.code={value:c.code,target:s(c.codeDescription.href)}:C.code=c.code;else if(qh.DiagnosticCode.is(c.code)){C.hasDiagnosticCode=!0;let q=c.code;C.code={value:q.value,target:s(q.target)}}}return c.source&&(C.source=c.source),c.relatedInformation&&(C.relatedInformation=h(c.relatedInformation)),Array.isArray(c.tags)&&(C.tags=g(c.tags)),C}function h(c){let C=new Array(c.length);for(let q=0;q<c.length;q++){let H=c[q];C[q]=new N.DiagnosticRelatedInformation(at(H.location),H.message)}return C}function g(c){if(!c)return;let C=[];for(let q of c){let H=p(q);H!==void 0&&C.push(H)}return C.length>0?C:void 0}function p(c){switch(c){case K.DiagnosticTag.Unnecessary:return N.DiagnosticTag.Unnecessary;case K.DiagnosticTag.Deprecated:return N.DiagnosticTag.Deprecated;default:return}}function v(c){return c?new N.Position(c.line,c.character):void 0}function y(c){return c?new N.Range(c.start.line,c.start.character,c.end.line,c.end.character):void 0}async function _(c,C){return ce.map(c,q=>new N.Range(q.start.line,q.start.character,q.end.line,q.end.character),C)}function b(c){if(c==null)return N.DiagnosticSeverity.Error;switch(c){case K.DiagnosticSeverity.Error:return N.DiagnosticSeverity.Error;case K.DiagnosticSeverity.Warning:return N.DiagnosticSeverity.Warning;case K.DiagnosticSeverity.Information:return N.DiagnosticSeverity.Information;case K.DiagnosticSeverity.Hint:return N.DiagnosticSeverity.Hint}return N.DiagnosticSeverity.Error}function w(c){if(It.string(c))return E(c);if(Ws.is(c))return E().appendCodeblock(c.value,c.language);if(Array.isArray(c)){let C=[];for(let q of c){let H=E();Ws.is(q)?H.appendCodeblock(q.value,q.language):H.appendMarkdown(q),C.push(H)}return C}else return E(c)}function x(c){if(It.string(c))return c;switch(c.kind){case K.MarkupKind.Markdown:return E(c.value);case K.MarkupKind.PlainText:return c.value;default:return`Unsupported Markup content received. Kind is: ${c.kind}`}}function E(c){let C;if(c===void 0||typeof c=="string")C=new N.MarkdownString(c);else switch(c.kind){case K.MarkupKind.Markdown:C=new N.MarkdownString(c.value);break;case K.MarkupKind.PlainText:C=new N.MarkdownString,C.appendText(c.value);break;default:C=new N.MarkdownString,C.appendText(`Unsupported Markup content received. Kind is: ${c.kind}`);break}return C.isTrusted=e,C.supportHtml=n,C}function F(c){if(!!c)return new N.Hover(w(c.contents),y(c.range))}async function z(c,C,q){if(!c)return;if(Array.isArray(c))return ce.map(c,on=>Dt(on,C),q);let H=c,{defaultRange:Ve,commitCharacters:Me}=Ne(H,C),pe=await ce.map(H.items,on=>{var he,Bn,ui;return Dt(on,Me,Ve,(he=H.itemDefaults)==null?void 0:he.insertTextMode,(Bn=H.itemDefaults)==null?void 0:Bn.insertTextFormat,(ui=H.itemDefaults)==null?void 0:ui.data)},q);return new N.CompletionList(pe,H.isIncomplete)}function Ne(c,C){var Ve,Me;let q=(Ve=c.itemDefaults)==null?void 0:Ve.editRange,H=((Me=c.itemDefaults)==null?void 0:Me.commitCharacters)??C;return K.Range.is(q)?{defaultRange:y(q),commitCharacters:H}:q!==void 0?{defaultRange:{inserting:y(q.insert),replacing:y(q.replace)},commitCharacters:H}:{defaultRange:void 0,commitCharacters:H}}function De(c){return K.CompletionItemKind.Text<=c&&c<=K.CompletionItemKind.TypeParameter?[c-1,void 0]:[N.CompletionItemKind.Text,c]}function gt(c){switch(c){case K.CompletionItemTag.Deprecated:return N.CompletionItemTag.Deprecated}}function Ze(c){if(c==null)return[];let C=[];for(let q of c){let H=gt(q);H!==void 0&&C.push(H)}return C}function Dt(c,C,q,H,Ve,Me){let pe=Ze(c.tags),on=en(c),he=new R_.default(on);c.detail&&(he.detail=c.detail),c.documentation&&(he.documentation=x(c.documentation),he.documentationFormat=It.string(c.documentation)?"$string":c.documentation.kind),c.filterText&&(he.filterText=c.filterText);let Bn=At(c,q,Ve);if(Bn&&(he.insertText=Bn.text,he.range=Bn.range,he.fromEdit=Bn.fromEdit),It.number(c.kind)){let[Rm,Qd]=De(c.kind);he.kind=Rm,Qd&&(he.originalItemKind=Qd)}c.sortText&&(he.sortText=c.sortText),c.additionalTextEdits&&(he.additionalTextEdits=vt(c.additionalTextEdits));let ui=c.commitCharacters!==void 0?It.stringArray(c.commitCharacters)?c.commitCharacters:void 0:C;ui&&(he.commitCharacters=ui.slice()),c.command&&(he.command=Ue(c.command)),(c.deprecated===!0||c.deprecated===!1)&&(he.deprecated=c.deprecated,c.deprecated===!0&&pe.push(N.CompletionItemTag.Deprecated)),(c.preselect===!0||c.preselect===!1)&&(he.preselect=c.preselect);let Xd=c.data??Me;Xd!==void 0&&(he.data=Xd),pe.length>0&&(he.tags=pe);let $o=c.insertTextMode??H;return $o!==void 0&&(he.insertTextMode=$o,$o===K.InsertTextMode.asIs&&(he.keepWhitespace=!0)),he}function en(c){return K.CompletionItemLabelDetails.is(c.labelDetails)?{label:c.label,detail:c.labelDetails.detail,description:c.labelDetails.description}:c.label}function At(c,C,q){let H=c.insertTextFormat??q;if(c.textEdit!==void 0||C!==void 0){let[Ve,Me]=c.textEdit!==void 0?Pt(c.textEdit):[C,c.textEditText??c.label];return H===K.InsertTextFormat.Snippet?{text:new N.SnippetString(Me),range:Ve,fromEdit:!0}:{text:Me,range:Ve,fromEdit:!0}}else return c.insertText?H===K.InsertTextFormat.Snippet?{text:new N.SnippetString(c.insertText),fromEdit:!1}:{text:c.insertText,fromEdit:!1}:void 0}function Pt(c){return K.InsertReplaceEdit.is(c)?[{inserting:y(c.insert),replacing:y(c.replace)},c.newText]:[y(c.range),c.newText]}function tn(c){if(!!c)return new N.TextEdit(y(c.range),c.newText)}async function mt(c,C){if(!!c)return ce.map(c,tn,C)}function vt(c){if(!c)return;let C=new Array(c.length);for(let q=0;q<c.length;q++)C[q]=tn(c[q]);return C}async function Hn(c,C){if(!c)return;let q=new N.SignatureHelp;return It.number(c.activeSignature)?q.activeSignature=c.activeSignature:q.activeSignature=0,It.number(c.activeParameter)?q.activeParameter=c.activeParameter:q.activeParameter=0,c.signatures&&(q.signatures=await Ee(c.signatures,C)),q}async function Ee(c,C){return ce.mapAsync(c,st,C)}async function st(c,C){let q=new N.SignatureInformation(c.label);return c.documentation!==void 0&&(q.documentation=x(c.documentation)),c.parameters!==void 0&&(q.parameters=await ot(c.parameters,C)),c.activeParameter!==void 0&&(q.activeParameter=c.activeParameter),q}function ot(c,C){return ce.map(c,nn,C)}function nn(c){let C=new N.ParameterInformation(c.label);return c.documentation&&(C.documentation=x(c.documentation)),C}function at(c){return c?new N.Location(i(c.uri),y(c.range)):void 0}async function si(c,C){if(!!c)return Wn(c,C)}async function Cr(c,C){if(!!c)return Wn(c,C)}function _r(c){if(!c)return;let C={targetUri:i(c.targetUri),targetRange:y(c.targetRange),originSelectionRange:y(c.originSelectionRange),targetSelectionRange:y(c.targetSelectionRange)};if(!C.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return C}async function Wn(c,C){if(!!c)if(It.array(c)){if(c.length===0)return[];if(K.LocationLink.is(c[0])){let q=c;return ce.map(q,_r,C)}else{let q=c;return ce.map(q,at,C)}}else return K.LocationLink.is(c)?[_r(c)]:at(c)}async function Un(c,C){if(!!c)return ce.map(c,at,C)}async function oi(c,C){if(!!c)return ce.map(c,Dr,C)}function Dr(c){let C=new N.DocumentHighlight(y(c.range));return It.number(c.kind)&&(C.kind=Rr(c.kind)),C}function Rr(c){switch(c){case K.DocumentHighlightKind.Text:return N.DocumentHighlightKind.Text;case K.DocumentHighlightKind.Read:return N.DocumentHighlightKind.Read;case K.DocumentHighlightKind.Write:return N.DocumentHighlightKind.Write}return N.DocumentHighlightKind.Text}async function qt(c,C){if(!!c)return ce.map(c,Kn,C)}function rn(c){return c<=K.SymbolKind.TypeParameter?c-1:N.SymbolKind.Property}function br(c){switch(c){case K.SymbolTag.Deprecated:return N.SymbolTag.Deprecated;default:return}}function jt(c){if(c==null)return;let C=[];for(let q of c){let H=br(q);H!==void 0&&C.push(H)}return C.length===0?void 0:C}function Kn(c){let C=c.data,q=c.location,H=q.range===void 0||C!==void 0?new q_.default(c.name,rn(c.kind),c.containerName??"",q.range===void 0?i(q.uri):new N.Location(i(c.location.uri),y(q.range)),C):new N.SymbolInformation(c.name,rn(c.kind),c.containerName??"",new N.Location(i(c.location.uri),y(q.range)));return xt(H,c),H}async function En(c,C){if(c!=null)return ce.map(c,$t,C)}function $t(c){let C=new N.DocumentSymbol(c.name,c.detail||"",rn(c.kind),y(c.range),y(c.selectionRange));if(xt(C,c),c.children!==void 0&&c.children.length>0){let q=[];for(let H of c.children)q.push($t(H));C.children=q}return C}function xt(c,C){c.tags=jt(C.tags),C.deprecated&&(c.tags?c.tags.includes(N.SymbolTag.Deprecated)||(c.tags=c.tags.concat(N.SymbolTag.Deprecated)):c.tags=[N.SymbolTag.Deprecated])}function Ue(c){let C={title:c.title,command:c.command};return c.arguments&&(C.arguments=c.arguments),C}async function ai(c,C){if(!!c)return ce.map(c,Ue,C)}let Rt=new Map;Rt.set(K.CodeActionKind.Empty,N.CodeActionKind.Empty),Rt.set(K.CodeActionKind.QuickFix,N.CodeActionKind.QuickFix),Rt.set(K.CodeActionKind.Refactor,N.CodeActionKind.Refactor),Rt.set(K.CodeActionKind.RefactorExtract,N.CodeActionKind.RefactorExtract),Rt.set(K.CodeActionKind.RefactorInline,N.CodeActionKind.RefactorInline),Rt.set(K.CodeActionKind.RefactorRewrite,N.CodeActionKind.RefactorRewrite),Rt.set(K.CodeActionKind.Source,N.CodeActionKind.Source),Rt.set(K.CodeActionKind.SourceOrganizeImports,N.CodeActionKind.SourceOrganizeImports);function Ht(c){if(c==null)return;let C=Rt.get(c);if(C)return C;let q=c.split(".");C=N.CodeActionKind.Empty;for(let H of q)C=C.append(H);return C}function Sr(c){if(c!=null)return c.map(C=>Ht(C))}async function zn(c,C){if(c==null)return;let q=new w_.default(c.title,c.data);return c.kind!==void 0&&(q.kind=Ht(c.kind)),c.diagnostics!==void 0&&(q.diagnostics=u(c.diagnostics)),c.edit!==void 0&&(q.edit=await m(c.edit,C)),c.command!==void 0&&(q.command=Ue(c.command)),c.isPreferred!==void 0&&(q.isPreferred=c.isPreferred),c.disabled!==void 0&&(q.disabled={reason:c.disabled.reason}),q}function Gn(c,C){return ce.mapAsync(c,async q=>K.Command.is(q)?Ue(q):zn(q,C),C)}function Wt(c){if(!c)return;let C=new b_.default(y(c.range));return c.command&&(C.command=Ue(c.command)),c.data!==void 0&&c.data!==null&&(C.data=c.data),C}async function sn(c,C){if(!!c)return ce.map(c,Wt,C)}async function m(c,C){if(!c)return;let q=new Map;if(c.changeAnnotations!==void 0){let Me=c.changeAnnotations;await ce.forEach(Object.keys(Me),pe=>{let on=P(Me[pe]);q.set(pe,on)},C)}let H=Me=>{if(Me!==void 0)return q.get(Me)},Ve=new N.WorkspaceEdit;if(c.documentChanges){let Me=c.documentChanges;await ce.forEach(Me,pe=>{if(K.CreateFile.is(pe))Ve.createFile(i(pe.uri),pe.options,H(pe.annotationId));else if(K.RenameFile.is(pe))Ve.renameFile(i(pe.oldUri),i(pe.newUri),pe.options,H(pe.annotationId));else if(K.DeleteFile.is(pe))Ve.deleteFile(i(pe.uri),pe.options,H(pe.annotationId));else if(K.TextDocumentEdit.is(pe)){let on=i(pe.textDocument.uri);for(let he of pe.edits)K.AnnotatedTextEdit.is(he)?Ve.replace(on,y(he.range),he.newText,H(he.annotationId)):Ve.replace(on,y(he.range),he.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(pe,void 0,4)}`)},C)}else if(c.changes){let Me=c.changes;await ce.forEach(Object.keys(Me),pe=>{Ve.set(i(pe),vt(Me[pe]))},C)}return Ve}function P(c){if(c!==void 0)return{label:c.label,needsConfirmation:!!c.needsConfirmation,description:c.description}}function O(c){let C=y(c.range),q=c.target?s(c.target):void 0,H=new S_.default(C,q);return c.tooltip!==void 0&&(H.tooltip=c.tooltip),c.data!==void 0&&c.data!==null&&(H.data=c.data),H}async function L(c,C){if(!!c)return ce.map(c,O,C)}function le(c){return new N.Color(c.red,c.green,c.blue,c.alpha)}function de(c){return new N.ColorInformation(y(c.range),le(c.color))}async function fe(c,C){if(!!c)return ce.map(c,de,C)}function be(c){let C=new N.ColorPresentation(c.label);return C.additionalTextEdits=vt(c.additionalTextEdits),c.textEdit&&(C.textEdit=tn(c.textEdit)),C}async function ee(c,C){if(!!c)return ce.map(c,be,C)}function ve(c){if(c)switch(c){case K.FoldingRangeKind.Comment:return N.FoldingRangeKind.Comment;case K.FoldingRangeKind.Imports:return N.FoldingRangeKind.Imports;case K.FoldingRangeKind.Region:return N.FoldingRangeKind.Region}}function te(c){return new N.FoldingRange(c.startLine,c.endLine,ve(c.kind))}async function d(c,C){if(!!c)return ce.map(c,te,C)}function R(c){return new N.SelectionRange(y(c.range),c.parent?R(c.parent):void 0)}async function M(c,C){return Array.isArray(c)?ce.map(c,R,C):[]}function J(c){return K.InlineValueText.is(c)?new N.InlineValueText(y(c.range),c.text):K.InlineValueVariableLookup.is(c)?new N.InlineValueVariableLookup(y(c.range),c.variableName,c.caseSensitiveLookup):new N.InlineValueEvaluatableExpression(y(c.range),c.expression)}async function oe(c,C){return Array.isArray(c)?ce.map(c,J,C):[]}async function Be(c,C){let q=typeof c.label=="string"?c.label:await ce.map(c.label,pn,C),H=new x_.default(v(c.position),q);return c.kind!==void 0&&(H.kind=c.kind),c.textEdits!==void 0&&(H.textEdits=await mt(c.textEdits,C)),c.tooltip!==void 0&&(H.tooltip=ci(c.tooltip)),c.paddingLeft!==void 0&&(H.paddingLeft=c.paddingLeft),c.paddingRight!==void 0&&(H.paddingRight=c.paddingRight),c.data!==void 0&&(H.data=c.data),H}function pn(c){let C=new N.InlayHintLabelPart(c.value);return c.location!==void 0&&(C.location=at(c.location)),c.tooltip!==void 0&&(C.tooltip=ci(c.tooltip)),c.command!==void 0&&(C.command=Ue(c.command)),C}function ci(c){return typeof c=="string"?c:E(c)}async function dm(c,C){if(!!Array.isArray(c))return ce.mapAsync(c,Be,C)}function us(c){if(c===null)return;let C=new T_.default(rn(c.kind),c.name,c.detail||"",s(c.uri),y(c.range),y(c.selectionRange),c.data);return c.tags!==void 0&&(C.tags=jt(c.tags)),C}async function fm(c,C){if(c!==null)return ce.map(c,us,C)}async function zd(c,C){return new N.CallHierarchyIncomingCall(us(c.from),await _(c.fromRanges,C))}async function hm(c,C){if(c!==null)return ce.mapAsync(c,zd,C)}async function Gd(c,C){return new N.CallHierarchyOutgoingCall(us(c.to),await _(c.fromRanges,C))}async function pm(c,C){if(c!==null)return ce.mapAsync(c,Gd,C)}async function gm(c,C){if(c!=null)return new N.SemanticTokens(new Uint32Array(c.data),c.resultId)}function Bd(c){return new N.SemanticTokensEdit(c.start,c.deleteCount,c.data!==void 0?new Uint32Array(c.data):void 0)}async function mm(c,C){if(c!=null)return new N.SemanticTokensEdits(c.edits.map(Bd),c.resultId)}function vm(c){return c}async function ym(c,C){if(c!=null)return new N.LinkedEditingRanges(await _(c.ranges,C),Cm(c.wordPattern))}function Cm(c){if(c!=null)return new RegExp(c)}function Vd(c){if(c===null)return;let C=new P_.default(rn(c.kind),c.name,c.detail||"",s(c.uri),y(c.range),y(c.selectionRange),c.data);return c.tags!==void 0&&(C.tags=jt(c.tags)),C}async function _m(c,C){if(c!==null)return ce.map(c,Vd,C)}function Dm(c){if(It.string(c))return c;if(K.RelativePattern.is(c)){if(K.URI.is(c.baseUri))return new N.RelativePattern(s(c.baseUri),c.pattern);if(K.WorkspaceFolder.is(c.baseUri)){let C=N.workspace.getWorkspaceFolder(s(c.baseUri.uri));return C!==void 0?new N.RelativePattern(C,c.pattern):void 0}}}return{asUri:s,asDocumentSelector:o,asDiagnostics:a,asDiagnostic:l,asRange:y,asRanges:_,asPosition:v,asDiagnosticSeverity:b,asDiagnosticTag:p,asHover:F,asCompletionResult:z,asCompletionItem:Dt,asTextEdit:tn,asTextEdits:mt,asSignatureHelp:Hn,asSignatureInformations:Ee,asSignatureInformation:st,asParameterInformations:ot,asParameterInformation:nn,asDeclarationResult:si,asDefinitionResult:Cr,asLocation:at,asReferences:Un,asDocumentHighlights:oi,asDocumentHighlight:Dr,asDocumentHighlightKind:Rr,asSymbolKind:rn,asSymbolTag:br,asSymbolTags:jt,asSymbolInformations:qt,asSymbolInformation:Kn,asDocumentSymbols:En,asDocumentSymbol:$t,asCommand:Ue,asCommands:ai,asCodeAction:zn,asCodeActionKind:Ht,asCodeActionKinds:Sr,asCodeActionResult:Gn,asCodeLens:Wt,asCodeLenses:sn,asWorkspaceEdit:m,asDocumentLink:O,asDocumentLinks:L,asFoldingRangeKind:ve,asFoldingRange:te,asFoldingRanges:d,asColor:le,asColorInformation:de,asColorInformations:fe,asColorPresentation:be,asColorPresentations:ee,asSelectionRange:R,asSelectionRanges:M,asInlineValue:J,asInlineValues:oe,asInlayHint:Be,asInlayHints:dm,asSemanticTokensLegend:vm,asSemanticTokens:gm,asSemanticTokensEdit:Bd,asSemanticTokensEdits:mm,asCallHierarchyItem:us,asCallHierarchyItems:fm,asCallHierarchyIncomingCall:zd,asCallHierarchyIncomingCalls:hm,asCallHierarchyOutgoingCall:Gd,asCallHierarchyOutgoingCalls:pm,asLinkedEditingRanges:ym,asTypeHierarchyItem:Vd,asTypeHierarchyItems:_m,asGlobPattern:Dm}}Us.createConverter=E_});var Te=S(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.generateUuid=Ft.parse=Ft.isUUID=Ft.v4=Ft.empty=void 0;var Li=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},X=class extends Li{constructor(){super([X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),"-",X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),"-","4",X._randomHex(),X._randomHex(),X._randomHex(),"-",X._oneOf(X._timeHighBits),X._randomHex(),X._randomHex(),X._randomHex(),"-",X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return X._oneOf(X._chars)}};X._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];X._timeHighBits=["8","9","a","b"];Ft.empty=new Li("00000000-0000-0000-0000-000000000000");function kh(){return new X}Ft.v4=kh;var k_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Oh(t){return k_.test(t)}Ft.isUUID=Oh;function O_(t){if(!Oh(t))throw new Error("invalid uuid");return new Li(t)}Ft.parse=O_;function I_(){return kh().asHex()}Ft.generateUuid=I_});var Eu=S(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.ProgressPart=void 0;var Ih=require("vscode"),Fh=G(),Nh=Et(),xu=class{constructor(e,n,r){this._client=e,this._token=n,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(Fh.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&Ih.window.withProgress({location:Ih.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(n,r)=>{if(this._lspProgressDisposable!==void 0)return this._progress=n,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Fh.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})})}report(e){if(this._infinite&&Nh.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(Nh.number(e.percentage)){let n=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,n-this._reported);this._reported+=r,this._progress!==void 0&&this._progress.report({message:e.message,increment:r})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};Ks.ProgressPart=xu});var re=S($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.WorkspaceFeature=$e.TextDocumentLanguageFeature=$e.TextDocumentEventFeature=$e.DynamicDocumentFeature=$e.DynamicFeature=$e.StaticFeature=$e.ensure=$e.LSPCancellationError=void 0;var sr=require("vscode"),ku=G(),dt=Et(),Mh=Te(),Ou=class extends sr.CancellationError{constructor(e){super(),this.data=e}};$e.LSPCancellationError=Ou;function F_(t,e){return t[e]===void 0&&(t[e]={}),t[e]}$e.ensure=F_;var N_;(function(t){function e(n){let r=n;return r!=null&&dt.func(r.fillClientCapabilities)&&dt.func(r.initialize)&&dt.func(r.getState)&&dt.func(r.dispose)&&(r.fillInitializeParams===void 0||dt.func(r.fillInitializeParams))}t.is=e})(N_=$e.StaticFeature||($e.StaticFeature={}));var M_;(function(t){function e(n){let r=n;return r!=null&&dt.func(r.fillClientCapabilities)&&dt.func(r.initialize)&&dt.func(r.getState)&&dt.func(r.dispose)&&(r.fillInitializeParams===void 0||dt.func(r.fillInitializeParams))&&dt.func(r.register)&&dt.func(r.unregister)&&r.registrationType!==void 0}t.is=e})(M_=$e.DynamicFeature||($e.DynamicFeature={}));var Ai=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),n=0;for(let i of e){n++;for(let s of sr.workspace.textDocuments)if(sr.languages.match(i,s)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let r=n>0;return{kind:"document",id:this.registrationType.method,registrations:r,matches:!1}}};$e.DynamicDocumentFeature=Ai;var Iu=class extends Ai{constructor(e,n,r,i,s,o,a){super(e),this._event=n,this._type=r,this._middleware=i,this._createParams=s,this._textDocument=o,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new sr.EventEmitter}static textDocumentFilter(e,n){for(let r of e)if(sr.languages.match(r,n)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(n=>{this.callback(n).catch(r=>{this._client.error(`Sending document notification ${this._type.method} failed.`,r)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let n=async r=>{let i=this._createParams(r);await this._client.sendNotification(this._type,i).catch(),this.notificationSent(r,this._type,i)};if(this.matches(e)){let r=this._middleware();return r?r(e,i=>n(i)):n(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,n,r){this._onNotificationSent.fire({original:e,type:n,params:r})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let n of this._selectors.values())if(sr.languages.match(n,e)>0)return{send:r=>this.callback(r)}}};$e.TextDocumentEventFeature=Iu;var Fu=class extends Ai{constructor(e,n){super(e),this._registrationType=n,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let n=e.data.registerOptions.documentSelector;n!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(n))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:n[0],data:e,provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,n){if(n){if(ku.TextDocumentRegistrationOptions.is(n)){let r=ku.StaticRegistrationOptions.hasId(n)?n.id:Mh.generateUuid(),i=n.documentSelector||e;if(i)return[r,Object.assign({},n,{documentSelector:i})]}else if(dt.boolean(n)&&n===!0||ku.WorkDoneProgressOptions.is(n)){if(!e)return[void 0,void 0];let r=dt.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e});return[Mh.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,n){if(!(!e||!n))return dt.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e})}getProvider(e){for(let n of this._registrations.values()){let r=n.data.registerOptions.documentSelector;if(r!==null&&sr.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(r),e)>0)return n.provider}}getAllProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};$e.TextDocumentLanguageFeature=Fu;var Nu=class{constructor(e,n){this._client=e,this._registrationType=n,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let n=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:n[0],provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};$e.WorkspaceFeature=Nu});var Ah=S((rw,Lh)=>{Lh.exports=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=e(t[r],r);L_(i)?n.push.apply(n,i):n.push(i)}return n};var L_=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var Uh=S((iw,Wh)=>{"use strict";Wh.exports=$h;function $h(t,e,n){t instanceof RegExp&&(t=jh(t,n)),e instanceof RegExp&&(e=jh(e,n));var r=Hh(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function jh(t,e){var n=e.match(t);return n?n[0]:null}$h.range=Hh;function Hh(t,e,n){var r,i,s,o,a,u=n.indexOf(t),l=n.indexOf(e,u+1),h=u;if(u>=0&&l>0){if(t===e)return[u,l];for(r=[],s=n.length;h>=0&&!a;)h==u?(r.push(h),u=n.indexOf(t,h+1)):r.length==1?a=[r.pop(),l]:(i=r.pop(),i<s&&(s=i,o=l),l=n.indexOf(e,h+1)),h=u<l&&u>=0?u:l;r.length&&(a=[s,o])}return a}});var Jh=S((sw,Qh)=>{var A_=Ah(),Kh=Uh();Qh.exports=H_;var zh="\0SLASH"+Math.random()+"\0",Gh="\0OPEN"+Math.random()+"\0",Lu="\0CLOSE"+Math.random()+"\0",Bh="\0COMMA"+Math.random()+"\0",Vh="\0PERIOD"+Math.random()+"\0";function Mu(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function j_(t){return t.split("\\\\").join(zh).split("\\{").join(Gh).split("\\}").join(Lu).split("\\,").join(Bh).split("\\.").join(Vh)}function $_(t){return t.split(zh).join("\\").split(Gh).join("{").split(Lu).join("}").split(Bh).join(",").split(Vh).join(".")}function Xh(t){if(!t)return[""];var e=[],n=Kh("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,o=r.split(",");o[o.length-1]+="{"+i+"}";var a=Xh(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function H_(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Wr(j_(t),!0).map($_)):[]}function W_(t){return"{"+t+"}"}function U_(t){return/^-?0\d/.test(t)}function K_(t,e){return t<=e}function z_(t,e){return t>=e}function Wr(t,e){var n=[],r=Kh("{","}",t);if(!r||/\$$/.test(r.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),o=i||s,a=r.body.indexOf(",")>=0;if(!o&&!a)return r.post.match(/,.*\}/)?(t=r.pre+"{"+r.body+Lu+r.post,Wr(t)):[t];var u;if(o)u=r.body.split(/\.\./);else if(u=Xh(r.body),u.length===1&&(u=Wr(u[0],!1).map(W_),u.length===1)){var h=r.post.length?Wr(r.post,!1):[""];return h.map(function(en){return r.pre+u[0]+en})}var l=r.pre,h=r.post.length?Wr(r.post,!1):[""],g;if(o){var p=Mu(u[0]),v=Mu(u[1]),y=Math.max(u[0].length,u[1].length),_=u.length==3?Math.abs(Mu(u[2])):1,b=K_,w=v<p;w&&(_*=-1,b=z_);var x=u.some(U_);g=[];for(var E=p;b(E,v);E+=_){var F;if(s)F=String.fromCharCode(E),F==="\\"&&(F="");else if(F=String(E),x){var z=y-F.length;if(z>0){var Ne=new Array(z+1).join("0");E<0?F="-"+Ne+F.slice(1):F=Ne+F}}g.push(F)}}else g=A_(u,function(Dt){return Wr(Dt,!1)});for(var De=0;De<g.length;De++)for(var gt=0;gt<h.length;gt++){var Ze=l+g[De]+h[gt];(!e||o||Ze)&&n.push(Ze)}return n}});var Bs=S((ow,np)=>{np.exports=bt;bt.Minimatch=Ye;var ji=function(){try{return require("path")}catch{}}()||{sep:"/"};bt.sep=ji.sep;var $u=bt.GLOBSTAR=Ye.GLOBSTAR={},G_=Jh(),Yh={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Au="[^/]",ju=Au+"*?",B_="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",V_="(?:(?!(?:\\/|^)\\.).)*?",Zh=X_("().*{}+?[]^$\\!");function X_(t){return t.split("").reduce(function(e,n){return e[n]=!0,e},{})}var ep=/\/+/;bt.filter=Q_;function Q_(t,e){return e=e||{},function(n,r,i){return bt(n,t,e)}}function Nn(t,e){e=e||{};var n={};return Object.keys(t).forEach(function(r){n[r]=t[r]}),Object.keys(e).forEach(function(r){n[r]=e[r]}),n}bt.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return bt;var e=bt,n=function(i,s,o){return e(i,s,Nn(t,o))};return n.Minimatch=function(i,s){return new e.Minimatch(i,Nn(t,s))},n.Minimatch.defaults=function(i){return e.defaults(Nn(t,i)).Minimatch},n.filter=function(i,s){return e.filter(i,Nn(t,s))},n.defaults=function(i){return e.defaults(Nn(t,i))},n.makeRe=function(i,s){return e.makeRe(i,Nn(t,s))},n.braceExpand=function(i,s){return e.braceExpand(i,Nn(t,s))},n.match=function(r,i,s){return e.match(r,i,Nn(t,s))},n};Ye.defaults=function(t){return bt.defaults(t).Minimatch};function bt(t,e,n){return Gs(e),n||(n={}),!n.nocomment&&e.charAt(0)==="#"?!1:new Ye(e,n).match(t)}function Ye(t,e){if(!(this instanceof Ye))return new Ye(t,e);Gs(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&ji.sep!=="/"&&(t=t.split(ji.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}Ye.prototype.debug=function(){};Ye.prototype.make=J_;function J_(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,n),n=this.globParts=n.map(function(r){return r.split(ep)}),this.debug(this.pattern,n),n=n.map(function(r,i,s){return r.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,n),this.set=n}Ye.prototype.parseNegate=Y_;function Y_(){var t=this.pattern,e=!1,n=this.options,r=0;if(!n.nonegate){for(var i=0,s=t.length;i<s&&t.charAt(i)==="!";i++)e=!e,r++;r&&(this.pattern=t.substr(r)),this.negate=e}}bt.braceExpand=function(t,e){return tp(t,e)};Ye.prototype.braceExpand=tp;function tp(t,e){return e||(this instanceof Ye?e=this.options:e={}),t=typeof t>"u"?this.pattern:t,Gs(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:G_(t)}var Z_=1024*64,Gs=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>Z_)throw new TypeError("pattern is too long")};Ye.prototype.parse=eD;var zs={};function eD(t,e){Gs(t);var n=this.options;if(t==="**")if(n.noglobstar)t="*";else return $u;if(t==="")return"";var r="",i=!!n.nocase,s=!1,o=[],a=[],u,l=!1,h=-1,g=-1,p=t.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",v=this;function y(){if(u){switch(u){case"*":r+=ju,i=!0;break;case"?":r+=Au,i=!0;break;default:r+="\\"+u;break}v.debug("clearStateChar %j %j",u,r),u=!1}}for(var _=0,b=t.length,w;_<b&&(w=t.charAt(_));_++){if(this.debug("%s	%s %s %j",t,_,r,w),s&&Zh[w]){r+="\\"+w,s=!1;continue}switch(w){case"/":return!1;case"\\":y(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,_,r,w),l){this.debug("  in class"),w==="!"&&_===g+1&&(w="^"),r+=w;continue}v.debug("call clearStateChar %j",u),y(),u=w,n.noext&&y();continue;case"(":if(l){r+="(";continue}if(!u){r+="\\(";continue}o.push({type:u,start:_-1,reStart:r.length,open:Yh[u].open,close:Yh[u].close}),r+=u==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",u,r),u=!1;continue;case")":if(l||!o.length){r+="\\)";continue}y(),i=!0;var x=o.pop();r+=x.close,x.type==="!"&&a.push(x),x.reEnd=r.length;continue;case"|":if(l||!o.length||s){r+="\\|",s=!1;continue}y(),r+="|";continue;case"[":if(y(),l){r+="\\"+w;continue}l=!0,g=_,h=r.length,r+=w;continue;case"]":if(_===g+1||!l){r+="\\"+w,s=!1;continue}var E=t.substring(g+1,_);try{RegExp("["+E+"]")}catch{var F=this.parse(E,zs);r=r.substr(0,h)+"\\["+F[0]+"\\]",i=i||F[1],l=!1;continue}i=!0,l=!1,r+=w;continue;default:y(),s?s=!1:Zh[w]&&!(w==="^"&&l)&&(r+="\\"),r+=w}}for(l&&(E=t.substr(g+1),F=this.parse(E,zs),r=r.substr(0,h)+"\\["+F[0],i=i||F[1]),x=o.pop();x;x=o.pop()){var z=r.slice(x.reStart+x.open.length);this.debug("setting tail",r,x),z=z.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(ot,nn,at){return at||(at="\\"),nn+nn+at+"|"}),this.debug(`tail=%j
   %s`,z,z,x,r);var Ne=x.type==="*"?ju:x.type==="?"?Au:"\\"+x.type;i=!0,r=r.slice(0,x.reStart)+Ne+"\\("+z}y(),s&&(r+="\\\\");var De=!1;switch(r.charAt(0)){case"[":case".":case"(":De=!0}for(var gt=a.length-1;gt>-1;gt--){var Ze=a[gt],Dt=r.slice(0,Ze.reStart),en=r.slice(Ze.reStart,Ze.reEnd-8),At=r.slice(Ze.reEnd-8,Ze.reEnd),Pt=r.slice(Ze.reEnd);At+=Pt;var tn=Dt.split("(").length-1,mt=Pt;for(_=0;_<tn;_++)mt=mt.replace(/\)[+*?]?/,"");Pt=mt;var vt="";Pt===""&&e!==zs&&(vt="$");var Hn=Dt+en+Pt+vt+At;r=Hn}if(r!==""&&i&&(r="(?=.)"+r),De&&(r=p+r),e===zs)return[r,i];if(!i)return nD(t);var Ee=n.nocase?"i":"";try{var st=new RegExp("^"+r+"$",Ee)}catch{return new RegExp("$.")}return st._glob=t,st._src=r,st}bt.makeRe=function(t,e){return new Ye(t,e||{}).makeRe()};Ye.prototype.makeRe=tD;function tD(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?ju:e.dot?B_:V_,r=e.nocase?"i":"",i=t.map(function(s){return s.map(function(o){return o===$u?n:typeof o=="string"?rD(o):o._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch{this.regexp=!1}return this.regexp}bt.match=function(t,e,n){n=n||{};var r=new Ye(e,n);return t=t.filter(function(i){return r.match(i)}),r.options.nonull&&!t.length&&t.push(e),t};Ye.prototype.match=function(e,n){if(typeof n>"u"&&(n=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;var r=this.options;ji.sep!=="/"&&(e=e.split(ji.sep).join("/")),e=e.split(ep),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var s,o;for(o=e.length-1;o>=0&&(s=e[o],!s);o--);for(o=0;o<i.length;o++){var a=i[o],u=e;r.matchBase&&a.length===1&&(u=[s]);var l=this.matchOne(u,a,n);if(l)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate};Ye.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,s=0,o=t.length,a=e.length;i<o&&s<a;i++,s++){this.debug("matchOne loop");var u=e[s],l=t[i];if(this.debug(e,u,l),u===!1)return!1;if(u===$u){this.debug("GLOBSTAR",[e,u,l]);var h=i,g=s+1;if(g===a){for(this.debug("** at the end");i<o;i++)if(t[i]==="."||t[i]===".."||!r.dot&&t[i].charAt(0)===".")return!1;return!0}for(;h<o;){var p=t[h];if(this.debug(`
globstar while`,t,h,e,g,p),this.matchOne(t.slice(h),e.slice(g),n))return this.debug("globstar found match!",h,o,p),!0;if(p==="."||p===".."||!r.dot&&p.charAt(0)==="."){this.debug("dot detected!",t,h,e,g);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(n&&(this.debug(`
>>> no match, partial?`,t,h,e,g),h===o))}var v;if(typeof u=="string"?(v=l===u,this.debug("string match",u,l,v)):(v=l.match(u),this.debug("pattern match",u,l,v)),!v)return!1}if(i===o&&s===a)return!0;if(i===o)return n;if(s===a)return i===o-1&&t[i]==="";throw new Error("wtf?")};function nD(t){return t.replace(/\\(.)/g,"$1")}function rD(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var Vu=S(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.DiagnosticFeature=fn.DiagnosticPullMode=fn.vsdiag=void 0;var iD=Bs(),Y=require("vscode"),Ie=G(),sD=Te(),Hu=re();function Vs(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Jt;(function(t){let e;(function(n){n.full="full",n.unChanged="unChanged"})(e=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={}))})(Jt=fn.vsdiag||(fn.vsdiag={}));var Wu;(function(t){t.onType="onType",t.onSave="onSave"})(Wu=fn.DiagnosticPullMode||(fn.DiagnosticPullMode={}));var rt;(function(t){t.active="open",t.reschedule="reschedule",t.outDated="drop"})(rt||(rt={}));var or=class{constructor(){this.open=new Set,this._onOpen=new Y.EventEmitter,this._onClose=new Y.EventEmitter,or.fillTabResources(this.open);let e=n=>{if(n.closed.length===0&&n.opened.length===0)return;let r=this.open,i=new Set;or.fillTabResources(i);let s=new Set,o=new Set(i);for(let a of r.values())i.has(a)?o.delete(a):s.add(a);if(this.open=i,s.size>0){let a=new Set;for(let u of s)a.add(Y.Uri.parse(u));this._onClose.fire(a)}if(o.size>0){let a=new Set;for(let u of o)a.add(Y.Uri.parse(u));this._onOpen.fire(a)}};Y.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=Y.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){var n,r;return e instanceof Y.Uri?((n=Y.window.activeTextEditor)==null?void 0:n.document.uri)===e:((r=Y.window.activeTextEditor)==null?void 0:r.document)===e}isVisible(e){let n=e instanceof Y.Uri?e:e.uri;return this.open.has(n.toString())}getTabResources(){let e=new Set;return or.fillTabResources(new Set,e),e}static fillTabResources(e,n){let r=e??new Set;for(let i of Y.window.tabGroups.all)for(let s of i.tabs){let o=s.input,a;o instanceof Y.TabInputText?a=o.uri:o instanceof Y.TabInputTextDiff&&(a=o.modified),a!==void 0&&!r.has(a.toString())&&(r.add(a.toString()),n!==void 0&&n.add(a))}}},ze;(function(t){t[t.document=1]="document",t[t.workspace=2]="workspace"})(ze||(ze={}));var Uu=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,n,r){let i=e===ze.document?this.documentPullStates:this.workspacePullStates,[s,o,a]=n instanceof Y.Uri?[n.toString(),n,r]:[n.uri.toString(),n.uri,n.version],u=i.get(s);return u===void 0&&(u={document:o,pulledVersion:a,resultId:void 0},i.set(s,u)),u}update(e,n,r,i){let s=e===ze.document?this.documentPullStates:this.workspacePullStates,[o,a,u,l]=n instanceof Y.Uri?[n.toString(),n,r,i]:[n.uri.toString(),n.uri,n.version,r],h=s.get(o);h===void 0?(h={document:a,pulledVersion:u,resultId:l},s.set(o,h)):(h.pulledVersion=u,h.resultId=l)}unTrack(e,n){let r=n instanceof Y.Uri?n.toString():n.uri.toString();(e===ze.document?this.documentPullStates:this.workspacePullStates).delete(r)}tracks(e,n){let r=n instanceof Y.Uri?n.toString():n.uri.toString();return(e===ze.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,n){var s;let r=n instanceof Y.Uri?n.toString():n.uri.toString();return(s=(e===ze.document?this.documentPullStates:this.workspacePullStates).get(r))==null?void 0:s.resultId}getAllResultIds(){let e=[];for(let[n,r]of this.workspacePullStates)this.documentPullStates.has(n)&&(r=this.documentPullStates.get(n)),r.resultId!==void 0&&e.push({uri:n,value:r.resultId});return e}},Ku=class{constructor(e,n,r){this.client=e,this.tabs=n,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new Y.EventEmitter,this.provider=this.createProvider(),this.diagnostics=Y.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new Uu,this.workspaceErrorCounter=0}knows(e,n){return this.documentStates.tracks(e,n)}forget(e,n){this.documentStates.unTrack(e,n)}pull(e,n){if(this.isDisposed)return;let r=e instanceof Y.Uri?e:e.uri;this.pullAsync(e).then(()=>{n&&n()},i=>{this.client.error(`Document pull failed for text document ${r.toString()}`,i,!1)})}async pullAsync(e,n){if(this.isDisposed)return;let r=e instanceof Y.Uri,i=r?e:e.uri,s=i.toString();n=r?n:e.version;let o=this.openRequests.get(s),a=r?this.documentStates.track(ze.document,e,n):this.documentStates.track(ze.document,e);if(o===void 0){let u=new Y.CancellationTokenSource;this.openRequests.set(s,{state:rt.active,document:e,version:n,tokenSource:u});let l,h;try{l=await this.provider.provideDiagnostics(e,a.resultId,u.token)??{kind:Jt.DocumentDiagnosticReportKind.full,items:[]}}catch(g){if(g instanceof Hu.LSPCancellationError&&Ie.DiagnosticServerCancellationData.is(g.data)&&g.data.retriggerRequest===!1&&(h={state:rt.outDated,document:e}),h===void 0&&g instanceof Y.CancellationError)h={state:rt.reschedule,document:e};else throw g}if(h=h??this.openRequests.get(s),h===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${s}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(s),!this.tabs.isVisible(e)){this.documentStates.unTrack(ze.document,e);return}if(h.state===rt.outDated)return;l!==void 0&&(l.kind===Jt.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,l.items),a.pulledVersion=n,a.resultId=l.resultId),h.state===rt.reschedule&&this.pull(e)}else o.state===rt.active?(o.tokenSource.cancel(),this.openRequests.set(s,{state:rt.reschedule,document:o.document})):o.state===rt.outDated&&this.openRequests.set(s,{state:rt.reschedule,document:o.document})}forgetDocument(e){let n=e instanceof Y.Uri?e:e.uri,r=n.toString(),i=this.openRequests.get(r);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(r,{state:rt.reschedule,document:e}):this.pull(e,()=>{this.forget(ze.document,e)}):(i!==void 0&&(i.state===rt.active&&i.tokenSource.cancel(),this.openRequests.set(r,{state:rt.outDated,document:e})),this.diagnostics.delete(n),this.forget(ze.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,Ie.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof Hu.LSPCancellationError)&&!Ie.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,Ie.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new Y.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(n=>({uri:this.client.protocol2CodeConverter.asUri(n.uri),value:n.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,n=>{if(!(!n||this.isDisposed))for(let r of n.items)r.kind===Jt.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(ze.document,r.uri)||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(ze.workspace,r.uri,r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(n,r,i)=>{let s=(a,u,l)=>{let h={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a instanceof Y.Uri?a:a.uri)},previousResultId:u};return this.isDisposed===!0||!this.client.isRunning()?{kind:Jt.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(Ie.DocumentDiagnosticRequest.type,h,l).then(async g=>g==null||this.isDisposed||l.isCancellationRequested?{kind:Jt.DocumentDiagnosticReportKind.full,items:[]}:g.kind===Ie.DocumentDiagnosticReportKind.Full?{kind:Jt.DocumentDiagnosticReportKind.full,resultId:g.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(g.items,l)}:{kind:Jt.DocumentDiagnosticReportKind.unChanged,resultId:g.resultId},g=>this.client.handleFailedRequest(Ie.DocumentDiagnosticRequest.type,l,g,{kind:Jt.DocumentDiagnosticReportKind.full,items:[]}))},o=this.client.middleware;return o.provideDiagnostics?o.provideDiagnostics(n,r,i,s):s(n,r,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(n,r,i)=>{let s=async l=>l.kind===Ie.DocumentDiagnosticReportKind.Full?{kind:Jt.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(l.uri),resultId:l.resultId,version:l.version,items:await this.client.protocol2CodeConverter.asDiagnostics(l.items,r)}:{kind:Jt.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(l.uri),resultId:l.resultId,version:l.version},o=l=>{let h=[];for(let g of l)h.push({uri:this.client.code2ProtocolConverter.asUri(g.uri),value:g.value});return h},a=(l,h)=>{let g=(0,sD.generateUuid)(),p=this.client.onProgress(Ie.WorkspaceDiagnosticRequest.partialResult,g,async y=>{if(y==null){i(null);return}let _={items:[]};for(let b of y.items)try{_.items.push(await s(b))}catch(w){this.client.error("Converting workspace diagnostics failed.",w)}i(_)}),v={identifier:this.options.identifier,previousResultIds:o(l),partialResultToken:g};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(Ie.WorkspaceDiagnosticRequest.type,v,h).then(async y=>{if(h.isCancellationRequested)return{items:[]};let _={items:[]};for(let b of y.items)_.items.push(await s(b));return p.dispose(),i(_),{items:[]}},y=>(p.dispose(),this.client.handleFailedRequest(Ie.DocumentDiagnosticRequest.type,h,y,{items:[]})))},u=this.client.middleware;return u.provideWorkspaceDiagnostics?u.provideWorkspaceDiagnostics(n,r,i,a):a(n,r,i)}),e}dispose(){var e,n;this.isDisposed=!0,(e=this.workspaceCancellation)==null||e.cancel(),(n=this.workspaceTimeout)==null||n.dispose();for(let[r,i]of this.openRequests)i.state===rt.active&&i.tokenSource.cancel(),this.openRequests.set(r,{state:rt.outDated,document:i.document});this.diagnostics.dispose()}},zu=class{constructor(e){this.diagnosticRequestor=e,this.documents=new Ie.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let n=e instanceof Y.Uri?e.toString():e.uri.toString();this.documents.has(n)||(this.documents.set(n,e,Ie.Touch.Last),this.trigger())}remove(e){let n=e instanceof Y.Uri?e.toString():e.uri.toString();this.documents.has(n)&&(this.documents.delete(n),this.diagnosticRequestor.pull(e)),this.documents.size===0?this.stop():e===this.endDocument&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,Ie.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let n=e instanceof Y.Uri?e.toString():e.uri.toString();this.diagnosticRequestor.pull(e),this.documents.set(n,e,Ie.Touch.Last),e===this.endDocument&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){var e;(e=this.intervalHandle)==null||e.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}},Gu=class{constructor(e,n,r){var y;let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},s=e.protocol2CodeConverter.asDocumentSelector(r.documentSelector),o=[],a=_=>{let b=r.documentSelector;if(i.match!==void 0)return i.match(b,_);for(let w of b)if(!!Ie.TextDocumentFilter.is(w)){if(typeof w=="string"||w.language!==void 0&&w.language!=="*"||w.scheme!==void 0&&w.scheme!=="*"&&w.scheme!==_.scheme)return!1;if(w.pattern!==void 0){let x=new iD.Minimatch(w.pattern,{noext:!0});if(!x.makeRe()||!x.match(_.fsPath))return!1}}return!0},u=_=>_ instanceof Y.Uri?a(_):Y.languages.match(s,_)>0&&n.isVisible(_),l=_=>{var b;return _ instanceof Y.Uri?((b=this.activeTextDocument)==null?void 0:b.uri.toString())===_.toString():this.activeTextDocument===_};this.diagnosticRequestor=new Ku(e,n,r),this.backgroundScheduler=new zu(this.diagnosticRequestor);let h=_=>{!u(_)||!r.interFileDependencies||l(_)||this.backgroundScheduler.add(_)};this.activeTextDocument=(y=Y.window.activeTextEditor)==null?void 0:y.document,Y.window.onDidChangeActiveTextEditor(_=>{let b=this.activeTextDocument;this.activeTextDocument=_==null?void 0:_.document,b!==void 0&&h(b),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let g=e.getFeature(Ie.DidOpenTextDocumentNotification.method);o.push(g.onNotificationSent(_=>{let b=_.original;u(b)&&this.diagnosticRequestor.pull(b,()=>{h(b)})}));let p=new Set;for(let _ of Y.workspace.textDocuments)u(_)&&(this.diagnosticRequestor.pull(_,()=>{h(_)}),p.add(_.uri.toString()));if(i.onTabs===!0)for(let _ of n.getTabResources())!p.has(_.toString())&&u(_)&&this.diagnosticRequestor.pull(_,()=>{h(_)});if(n.onOpen(_=>{for(let b of _)u(b)&&!this.diagnosticRequestor.knows(ze.document,b)&&this.diagnosticRequestor.pull(b,()=>{h(b)})}),i.onChange===!0){let _=e.getFeature(Ie.DidChangeTextDocumentNotification.method);o.push(_.onNotificationSent(async b=>{let w=b.original.document;(i.filter===void 0||!i.filter(w,Wu.onType))&&this.diagnosticRequestor.knows(ze.document,w)&&b.original.contentChanges.length>0&&this.diagnosticRequestor.pull(w,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let _=e.getFeature(Ie.DidSaveTextDocumentNotification.method);o.push(_.onNotificationSent(b=>{let w=b.original;(i.filter===void 0||!i.filter(w,Wu.onSave))&&this.diagnosticRequestor.knows(ze.document,w)&&this.diagnosticRequestor.pull(b.original,()=>{this.backgroundScheduler.trigger()})}))}let v=e.getFeature(Ie.DidCloseTextDocumentNotification.method);o.push(v.onNotificationSent(_=>{this.cleanUpDocument(_.original)})),n.onClose(_=>{for(let b of _)this.cleanUpDocument(b)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let _ of Y.workspace.textDocuments)u(_)&&this.diagnosticRequestor.pull(_)}),r.workspaceDiagnostics===!0&&r.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=Y.Disposable.from(...o,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(ze.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},Bu=class extends Hu.TextDocumentLanguageFeature{constructor(e){super(e,Ie.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let n=Vs(Vs(e,"textDocument"),"diagnostic");n.dynamicRegistration=!0,n.relatedDocumentSupport=!1,Vs(Vs(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,n){this._client.onRequest(Ie.DiagnosticRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeDiagnosticsEmitter.fire()});let[i,s]=this.getRegistration(n,e.diagnosticProvider);!i||!s||this.register({id:i,registerOptions:s})}dispose(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new or);let n=new Gu(this._client,this.tabs,e);return[n.disposable,n]}};fn.DiagnosticFeature=Bu});var sp=S(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.NotebookDocumentSyncFeature=void 0;var it=require("vscode"),oD=Bs(),Dn=G(),aD=Te(),rp=Et();function ip(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Ur;(function(t){let e;(function(n){function r(p,v){return{version:p.version,uri:v.asUri(p.uri)}}n.asVersionedNotebookDocumentIdentifier=r;function i(p,v,y){let _=Dn.NotebookDocument.create(y.asUri(p.uri),p.notebookType,p.version,s(v,y));return Object.keys(p.metadata).length>0&&(_.metadata=o(p.metadata)),_}n.asNotebookDocument=i;function s(p,v){return p.map(y=>a(y,v))}n.asNotebookCells=s;function o(p){return l(new Set,p)}n.asMetadata=o;function a(p,v){let y=Dn.NotebookCell.create(u(p.kind),v.asUri(p.document.uri));return Object.keys(p.metadata).length>0&&(y.metadata=o(p.metadata)),p.executionSummary!==void 0&&rp.number(p.executionSummary.executionOrder)&&rp.boolean(p.executionSummary.success)&&(y.executionSummary={executionOrder:p.executionSummary.executionOrder,success:p.executionSummary.success}),y}n.asNotebookCell=a;function u(p){switch(p){case it.NotebookCellKind.Markup:return Dn.NotebookCellKind.Markup;case it.NotebookCellKind.Code:return Dn.NotebookCellKind.Code}}function l(p,v){if(p.has(v))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(v)){let y=[];for(let _ of v)if(_!==null&&typeof _=="object"||Array.isArray(_))y.push(l(p,_));else{if(_ instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");y.push(_)}return y}else{let y=Object.keys(v),_=Object.create(null);for(let b of y){let w=v[b];if(w!==null&&typeof w=="object"||Array.isArray(w))_[b]=l(p,w);else{if(w instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");_[b]=w}}return _}}function h(p,v){let y=v.asChangeTextDocumentParams(p);return{document:y.textDocument,changes:y.contentChanges}}n.asTextContentChange=h;function g(p,v){let y=Object.create(null);if(p.metadata&&(y.metadata=t.c2p.asMetadata(p.metadata)),p.cells!==void 0){let _=Object.create(null),b=p.cells;b.structure&&(_.structure={array:{start:b.structure.array.start,deleteCount:b.structure.array.deleteCount,cells:b.structure.array.cells!==void 0?b.structure.array.cells.map(w=>t.c2p.asNotebookCell(w,v)):void 0},didOpen:b.structure.didOpen!==void 0?b.structure.didOpen.map(w=>v.asOpenTextDocumentParams(w.document).textDocument):void 0,didClose:b.structure.didClose!==void 0?b.structure.didClose.map(w=>v.asCloseTextDocumentParams(w.document).textDocument):void 0}),b.data!==void 0&&(_.data=b.data.map(w=>t.c2p.asNotebookCell(w,v))),b.textContent!==void 0&&(_.textContent=b.textContent.map(w=>t.c2p.asTextContentChange(w,v))),Object.keys(_).length>0&&(y.cells=_)}return y}n.asNotebookDocumentChangeEvent=g})(e=t.c2p||(t.c2p={}))})(Ur||(Ur={}));var Xu;(function(t){function e(a,u,l){let h=a.length,g=u.length,p=0;for(;p<g&&p<h&&n(a[p],u[p],l);)p++;if(p<g&&p<h){let v=h-1,y=g-1;for(;v>=0&&y>=0&&n(a[v],u[y],l);)v--,y--;let _=v+1-p,b=p===y+1?void 0:u.slice(p,y+1);return b!==void 0?{start:p,deleteCount:_,cells:b}:{start:p,deleteCount:_}}else return p<g?{start:p,deleteCount:0,cells:u.slice(p)}:p<h?{start:p,deleteCount:h-p}:void 0}t.computeDiff=e;function n(a,u,l=!0){return a.kind!==u.kind||a.document.uri.toString()!==u.document.uri.toString()||a.document.languageId!==u.document.languageId||!r(a.executionSummary,u.executionSummary)?!1:!l||l&&s(a.metadata,u.metadata)}function r(a,u){return a===u?!0:a===void 0||u===void 0?!1:a.executionOrder===u.executionOrder&&a.success===u.success&&i(a.timing,u.timing)}function i(a,u){return a===u?!0:a===void 0||u===void 0?!1:a.startTime===u.startTime&&a.endTime===u.endTime}function s(a,u){if(a===u)return!0;if(a==null||u===null||u===void 0||typeof a!=typeof u||typeof a!="object")return!1;let l=Array.isArray(a),h=Array.isArray(u);if(l!==h)return!1;if(l&&h){if(a.length!==u.length)return!1;for(let g=0;g<a.length;g++)if(!s(a[g],u[g]))return!1}if(o(a)&&o(u)){let g=Object.keys(a),p=Object.keys(u);if(g.length!==p.length||(g.sort(),p.sort(),!s(g,p)))return!1;for(let v=0;v<g.length;v++){let y=g[v];if(!s(a[y],u[y]))return!1}return!0}return!1}function o(a){return a!==null&&typeof a=="object"}t.isObjectLiteral=o})(Xu||(Xu={}));var Qu;(function(t){function e(n,r){if(typeof n=="string")return n==="*"||r.notebookType===n;if(n.notebookType!==void 0&&n.notebookType!=="*"&&r.notebookType!==n.notebookType)return!1;let i=r.uri;if(n.scheme!==void 0&&n.scheme!=="*"&&i.scheme!==n.scheme)return!1;if(n.pattern!==void 0){let s=new oD.Minimatch(n.pattern,{noext:!0});if(!s.makeRe()||!s.match(i.fsPath))return!1}return!0}t.matchNotebook=e})(Qu||(Qu={}));var Xs;(function(t){function e(r){var o,a,u;let i=r.notebookSelector,s=[];for(let l of i){let h=(typeof l.notebook=="string"?l.notebook:(o=l.notebook)==null?void 0:o.notebookType)??"*",g=typeof l.notebook=="string"||(a=l.notebook)==null?void 0:a.scheme,p=typeof l.notebook=="string"||(u=l.notebook)==null?void 0:u.pattern;if(l.cells!==void 0)for(let v of l.cells)s.push(n(h,g,p,v.language));else s.push(n(h,g,p,void 0))}return s}t.asDocumentSelector=e;function n(r,i,s,o){return i===void 0&&s===void 0?{notebook:r,language:o}:{notebook:{notebookType:r,scheme:i,pattern:s},language:o}}})(Xs||(Xs={}));var Qs;(function(t){function e(n){return{cells:n,uris:new Set(n.map(r=>r.document.uri.toString()))}}t.create=e})(Qs||(Qs={}));var Kr=class{constructor(e,n){this.client=e,this.options=n,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(Xs.asDocumentSelector(n)),it.workspace.onDidOpenNotebookDocument(r=>{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of it.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);it.workspace.onDidChangeNotebookDocument(r=>this.didChangeNotebookDocument(r),void 0,this.disposables),this.options.save===!0&&it.workspace.onDidSaveNotebookDocument(r=>this.didSave(r),void 0,this.disposables),it.workspace.onDidCloseNotebookDocument(r=>{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}getState(){for(let e of it.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return it.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,n){if(it.languages.match(this.selector,n.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,n);if(r!==void 0){let s=r.uris.has(n.document.uri.toString());if(i&&s||!i&&!s)return;if(i){let o=this.getMatchingCells(e);if(o!==void 0){let a=this.asNotebookDocumentChangeEvent(e,void 0,r,o);a!==void 0&&this.doSendChange(a,o).catch(()=>{})}}}else i&&this.doSendOpen(e,[n]).catch(()=>{})}didChangeNotebookCellTextDocument(e,n){it.languages.match(this.selector,n.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[n]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,n){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0)return;let i=n.document.uri,s=r.cells.findIndex(o=>o.document.uri.toString()===i.toString());if(s!==-1)if(s===0&&r.cells.length===1)this.doSendClose(e,r.cells).catch(()=>{});else{let o=r.cells.slice(),a=o.splice(s,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:s,deleteCount:1},didClose:a}}},o).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,n=this.getMatchingCells(e),r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)if(n!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,r,n);i!==void 0&&this.doSendChange(i,n).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(n===void 0)return;this.doSendOpen(e,n).catch(()=>{})}}didChangeNotebookDocument(e){let n=e.notebook,r=this.notebookSyncInfo.get(n.uri.toString());if(r===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(n);if(i===void 0)return;this.didOpen(n,i,r)}else{let i=this.getMatchingCells(n);if(i===void 0){this.didClose(n,r);return}let s=this.asNotebookDocumentChangeEvent(e.notebook,e,r,i);s!==void 0&&this.doSendChange(s,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,n=this.notebookSyncInfo.get(e.uri.toString())){if(n===void 0)return;let r=e.getCells().filter(i=>n.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=>{})}async sendDidOpenNotebookDocument(e){let n=this.getMatchingCells(e);if(n!==void 0)return this.doSendOpen(e,n)}async doSendOpen(e,n){var s;let r=async(o,a)=>{let u=Ur.c2p.asNotebookDocument(o,a,this.client.code2ProtocolConverter),l=a.map(h=>this.client.code2ProtocolConverter.asTextDocumentItem(h.document));try{await this.client.sendNotification(Dn.DidOpenNotebookDocumentNotification.type,{notebookDocument:u,cellTextDocuments:l})}catch(h){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",h),h}},i=(s=this.client.middleware)==null?void 0:s.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),Qs.create(n)),(i==null?void 0:i.didOpen)!==void 0?i.didOpen(e,n,r):r(e,n)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,n=this.getMatchingCells(e.notebook)){var s,o;let r=async a=>{try{await this.client.sendNotification(Dn.DidChangeNotebookDocumentNotification.type,{notebookDocument:Ur.c2p.asVersionedNotebookDocumentIdentifier(a.notebook,this.client.code2ProtocolConverter),change:Ur.c2p.asNotebookDocumentChangeEvent(a,this.client.code2ProtocolConverter)})}catch(u){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",u),u}},i=(s=this.client.middleware)==null?void 0:s.notebooks;return((o=e.cells)==null?void 0:o.structure)!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),Qs.create(n??[])),(i==null?void 0:i.didChange)!==void 0?i==null?void 0:i.didChange(e,r):r(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){var i;let n=async s=>{try{await this.client.sendNotification(Dn.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)}})}catch(o){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",o),o}},r=(i=this.client.middleware)==null?void 0:i.notebooks;return(r==null?void 0:r.didSave)!==void 0?r.didSave(e,n):n(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,n){var s;let r=async(o,a)=>{try{await this.client.sendNotification(Dn.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:a.map(u=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(u.document))})}catch(u){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",u),u}},i=(s=this.client.middleware)==null?void 0:s.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),(i==null?void 0:i.didClose)!==void 0?i.didClose(e,n,r):r(e,n)}asNotebookDocumentChangeEvent(e,n,r,i){if(n!==void 0&&n.notebook!==e)throw new Error("Notebook must be identical");let s={notebook:e};(n==null?void 0:n.metadata)!==void 0&&(s.metadata=Ur.c2p.asMetadata(n.metadata));let o;if((n==null?void 0:n.cellChanges)!==void 0&&n.cellChanges.length>0){let a=[];o=new Set(i.map(u=>u.document.uri.toString()));for(let u of n.cellChanges)o.has(u.cell.document.uri.toString())&&(u.executionSummary!==void 0||u.metadata!==void 0)&&a.push(u.cell);a.length>0&&(s.cells=s.cells??{},s.cells.data=a)}if(((n==null?void 0:n.contentChanges)!==void 0&&n.contentChanges.length>0||n===void 0)&&r!==void 0&&i!==void 0){let a=r.cells,u=i,l=Xu.computeDiff(a,u,!1),h,g;if(l!==void 0){h=l.cells===void 0?new Map:new Map(l.cells.map(y=>[y.document.uri.toString(),y])),g=l.deleteCount===0?new Map:new Map(a.slice(l.start,l.start+l.deleteCount).map(y=>[y.document.uri.toString(),y]));for(let y of Array.from(g.keys()))h.has(y)&&(g.delete(y),h.delete(y));s.cells=s.cells??{};let p=[],v=[];if(h.size>0||g.size>0){for(let y of h.values())p.push(y);for(let y of g.values())v.push(y)}s.cells.structure={array:l,didOpen:p,didClose:v}}}return Object.keys(s).length>1?s:void 0}getMatchingCells(e,n=e.getCells()){if(this.options.notebookSelector!==void 0){for(let r of this.options.notebookSelector)if(r.notebook===void 0||Qu.matchNotebook(r.notebook,e)){let i=this.filterCells(e,n,r.cells);return i.length===0?void 0:i}}}cellMatches(e,n){let r=this.getMatchingCells(e,[n]);return r!==void 0&&r[0]===n}filterCells(e,n,r){var s;let i=r!==void 0?n.filter(o=>{let a=o.document.languageId;return r.some(u=>u.language==="*"||a===u.language)}):n;return typeof((s=this.client.clientOptions.notebookDocumentOptions)==null?void 0:s.filterCells)=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},Rn=class{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=Dn.NotebookDocumentSyncRegistrationType.type,it.workspace.onDidOpenTextDocument(n=>{if(n.uri.scheme!==Rn.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(n);if(!(r===void 0||i===void 0))for(let s of this.registrations.values())s instanceof Kr&&s.didOpenNotebookCellTextDocument(r,i)}),it.workspace.onDidChangeTextDocument(n=>{if(n.contentChanges.length===0)return;let r=n.document;if(r.uri.scheme!==Rn.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(r);if(i!==void 0)for(let s of this.registrations.values())s instanceof Kr&&s.didChangeNotebookCellTextDocument(i,n)}),it.workspace.onDidCloseTextDocument(n=>{if(n.uri.scheme!==Rn.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(n);if(!(r===void 0||i===void 0))for(let s of this.registrations.values())s instanceof Kr&&s.didCloseNotebookCellTextDocument(r,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let n=e.getState();if(n.kind==="document"&&n.registrations===!0&&n.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let n=ip(ip(e,"notebookDocument"),"synchronization");n.dynamicRegistration=!0,n.executionSummarySupport=!0}preInitialize(e){let n=e.notebookDocumentSync;n!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(Xs.asDocumentSelector(n)))}initialize(e){let n=e.notebookDocumentSync;if(n===void 0)return;let r=n.id??aD.generateUuid();this.register({id:r,registerOptions:n})}register(e){let n=new Kr(this.client,e.registerOptions);this.registrations.set(e.id,n)}unregister(e){let n=this.registrations.get(e);n&&n.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==Rn.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&it.languages.match(this.dedicatedChannel,e)>0)return!0;for(let n of this.registrations.values())if(n.handles(e))return!0;return!1}getProvider(e){for(let n of this.registrations.values())if(n.handles(e.document))return n}findNotebookDocumentAndCell(e){let n=e.uri.toString();for(let r of it.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===n)return[r,i];return[void 0,void 0]}};Js.NotebookDocumentSyncFeature=Rn;Rn.CellScheme="vscode-notebook-cell"});var ap=S(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.SyncConfigurationFeature=Mn.toJSONObject=Mn.ConfigurationFeature=void 0;var zr=require("vscode"),$i=G(),cD=Et(),uD=Te(),op=re(),Ju=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest($i.ConfigurationRequest.type,(n,r)=>{let i=o=>{let a=[];for(let u of o.items){let l=u.scopeUri!==void 0&&u.scopeUri!==null?this._client.protocol2CodeConverter.asUri(u.scopeUri):void 0;a.push(this.getConfiguration(l,u.section!==null?u.section:void 0))}return a},s=e.middleware.workspace;return s&&s.configuration?s.configuration(n,r,i):i(n,r)})}getConfiguration(e,n){let r=null;if(n){let i=n.lastIndexOf(".");if(i===-1)r=ar(zr.workspace.getConfiguration(void 0,e).get(n));else{let s=zr.workspace.getConfiguration(n.substr(0,i),e);s&&(r=ar(s.get(n.substr(i+1))))}}else{let i=zr.workspace.getConfiguration(void 0,e);r={};for(let s of Object.keys(i))i.has(s)&&(r[s]=ar(i.get(s)))}return r===void 0&&(r=null),r}dispose(){}};Mn.ConfigurationFeature=Ju;function ar(t){if(t){if(Array.isArray(t))return t.map(ar);if(typeof t=="object"){let e=Object.create(null);for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=ar(t[n]));return e}}return t}Mn.toJSONObject=ar;var Yu=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return $i.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,op.ensure)((0,op.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){var n;let e=(n=this._client.clientOptions.synchronize)==null?void 0:n.configurationSection;e!==void 0&&this.register({id:uD.generateUuid(),registerOptions:{section:e}})}register(e){let n=zr.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,n),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let n=this._listeners.get(e);n&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,n){var o;let r;if(cD.string(e)?r=[e]:r=e,r!==void 0&&n!==void 0&&!r.some(u=>n.affectsConfiguration(u)))return;let i=async a=>a===void 0?this._client.sendNotification($i.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification($i.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(a)}),s=(o=this._client.middleware.workspace)==null?void 0:o.didChangeConfiguration;(s?s(r,i):i(r)).catch(a=>{this._client.error(`Sending notification ${$i.DidChangeConfigurationNotification.type.method} failed`,a)})}extractSettingsInformation(e){function n(s,o){let a=s;for(let u=0;u<o.length-1;u++){let l=a[o[u]];l||(l=Object.create(null),a[o[u]]=l),a=l}return a}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],a=o.indexOf("."),u=null;if(a>=0?u=zr.workspace.getConfiguration(o.substr(0,a),r).get(o.substr(a+1)):u=zr.workspace.getConfiguration(void 0,r).get(o),u){let l=e[s].split(".");n(i,l)[l[l.length-1]]=ar(u)}}return i}};Mn.SyncConfigurationFeature=Yu});var cp=S(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.DidSaveTextDocumentFeature=yt.WillSaveWaitUntilFeature=yt.WillSaveFeature=yt.DidChangeTextDocumentFeature=yt.DidCloseTextDocumentFeature=yt.DidOpenTextDocumentFeature=void 0;var Nt=require("vscode"),We=G(),Pe=re(),lD=Mi(),Gr=Te(),Zu=class extends Pe.TextDocumentEventFeature{constructor(e,n){super(e,Nt.workspace.onDidOpenTextDocument,We.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),r=>r,Pe.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,Pe.ensure)((0,Pe.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:Gr.generateUuid(),registerOptions:{documentSelector:n}})}get registrationType(){return We.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let n=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);Nt.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&Nt.languages.match(n,r)>0&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));(s.didOpen?s.didOpen(r,o):o(r)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(i,r)}})}notificationSent(e,n,r){super.notificationSent(e,n,r),this._syncedDocuments.set(e.uri.toString(),e)}};yt.DidOpenTextDocumentFeature=Zu;var el=class extends Pe.TextDocumentEventFeature{constructor(e,n){super(e,Nt.workspace.onDidCloseTextDocument,We.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,r=>e.code2ProtocolConverter.asCloseTextDocumentParams(r),r=>r,Pe.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n}get registrationType(){return We.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,Pe.ensure)((0,Pe.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:Gr.generateUuid(),registerOptions:{documentSelector:n}})}notificationSent(e,n,r){super.notificationSent(e,n,r),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let n=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(Nt.languages.match(n,i)>0&&!this._selectorFilter(r,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(i.uri.toString()),(s.didClose?s.didClose(i,o):o(i)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}};yt.DidCloseTextDocumentFeature=el;var tl=class extends Pe.DynamicDocumentFeature{constructor(e){super(e),this._forcingDelivery=!1,this._changeData=new Map,this._onNotificationSent=new Nt.EventEmitter}get registrationType(){return We.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,Pe.ensure)((0,Pe.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.change!==void 0&&r.change!==We.TextDocumentSyncKind.None&&this.register({id:Gr.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},{syncKind:r.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=Nt.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let n=[];for(let r of this._changeData.values())if(Nt.languages.match(r.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let i=this._client.middleware;if(r.syncKind===We.TextDocumentSyncKind.Incremental){let s=async o=>{let a=this._client.code2ProtocolConverter.asChangeTextDocumentParams(o);await this._client.sendNotification(We.DidChangeTextDocumentNotification.type,a),this.notificationSent(o,We.DidChangeTextDocumentNotification.type,a)};n.push(i.didChange?i.didChange(e,o=>s(o)):s(e))}else if(r.syncKind===We.TextDocumentSyncKind.Full){let s=async o=>{let a=async u=>{let l=this._client.code2ProtocolConverter.asChangeTextDocumentParams(u.document);await this._client.sendNotification(We.DidChangeTextDocumentNotification.type,l),this.notificationSent(u,We.DidChangeTextDocumentNotification.type,l)};return this._changeDelayer?(this._changeDelayer.uri!==o.document.uri.toString()&&(await this.forceDelivery(),this._changeDelayer.uri=o.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>a(o))):(this._changeDelayer={uri:o.document.uri.toString(),delayer:new lD.Delayer(200)},this._changeDelayer.delayer.trigger(()=>a(o),-1))};n.push(i.didChange?i.didChange(e,o=>s(o)):s(e))}}return Promise.all(n).then(void 0,r=>{throw this._client.error(`Sending document notification ${We.DidChangeTextDocumentNotification.type.method} failed`,r),r})}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,n,r){this._onNotificationSent.fire({original:e,type:n,params:r})}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer!==void 0&&this._changeDelayer.delayer.cancel(),this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{return this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let n of this._changeData.values())if(Nt.languages.match(n.documentSelector,e)>0)return{send:r=>this.callback(r)}}};yt.DidChangeTextDocumentFeature=tl;var nl=class extends Pe.TextDocumentEventFeature{constructor(e){super(e,Nt.workspace.onWillSaveTextDocument,We.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,n=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(n),n=>n.document,(n,r)=>Pe.TextDocumentEventFeature.textDocumentFilter(n,r.document))}get registrationType(){return We.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let n=(0,Pe.ensure)((0,Pe.ensure)(e,"textDocument"),"synchronization");n.willSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSave&&this.register({id:Gr.generateUuid(),registerOptions:{documentSelector:n}})}};yt.WillSaveFeature=nl;var rl=class extends Pe.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return We.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let n=(0,Pe.ensure)((0,Pe.ensure)(e,"textDocument"),"synchronization");n.willSaveWaitUntil=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSaveWaitUntil&&this.register({id:Gr.generateUuid(),registerOptions:{documentSelector:n}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=Nt.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(Pe.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let n=this._client.middleware,r=i=>this._client.sendRequest(We.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async s=>{let o=await this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(n.willSaveWaitUntil?n.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};yt.WillSaveWaitUntilFeature=rl;var il=class extends Pe.TextDocumentEventFeature{constructor(e){super(e,Nt.workspace.onDidSaveTextDocument,We.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,n=>e.code2ProtocolConverter.asSaveTextDocumentParams(n,this._includeText),n=>n,Pe.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return We.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,Pe.ensure)((0,Pe.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;if(n&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:Gr.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}};yt.DidSaveTextDocumentFeature=il});var up=S(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.CompletionItemFeature=void 0;var dD=require("vscode"),ne=G(),sl=re(),fD=Te(),hD=[ne.CompletionItemKind.Text,ne.CompletionItemKind.Method,ne.CompletionItemKind.Function,ne.CompletionItemKind.Constructor,ne.CompletionItemKind.Field,ne.CompletionItemKind.Variable,ne.CompletionItemKind.Class,ne.CompletionItemKind.Interface,ne.CompletionItemKind.Module,ne.CompletionItemKind.Property,ne.CompletionItemKind.Unit,ne.CompletionItemKind.Value,ne.CompletionItemKind.Enum,ne.CompletionItemKind.Keyword,ne.CompletionItemKind.Snippet,ne.CompletionItemKind.Color,ne.CompletionItemKind.File,ne.CompletionItemKind.Reference,ne.CompletionItemKind.Folder,ne.CompletionItemKind.EnumMember,ne.CompletionItemKind.Constant,ne.CompletionItemKind.Struct,ne.CompletionItemKind.Event,ne.CompletionItemKind.Operator,ne.CompletionItemKind.TypeParameter],ol=class extends sl.TextDocumentLanguageFeature{constructor(e){super(e,ne.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let n=(0,sl.ensure)((0,sl.ensure)(e,"textDocument"),"completion");n.dynamicRegistration=!0,n.contextSupport=!0,n.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[ne.MarkupKind.Markdown,ne.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[ne.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[ne.InsertTextMode.asIs,ne.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},n.insertTextMode=ne.InsertTextMode.adjustIndentation,n.completionItemKind={valueSet:hD},n.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,n){let r=this.getRegistrationOptions(n,e.completionProvider);!r||this.register({id:fD.generateUuid(),registerOptions:r})}registerLanguageProvider(e,n){var a;this.labelDetailsSupport.set(n,!!((a=e.completionItem)!=null&&a.labelDetailsSupport));let r=e.triggerCharacters??[],i=e.allCommitCharacters,s=e.documentSelector,o={provideCompletionItems:(u,l,h,g)=>{let p=this._client,v=this._client.middleware,y=(_,b,w,x)=>p.sendRequest(ne.CompletionRequest.type,p.code2ProtocolConverter.asCompletionParams(_,b,w),x).then(E=>x.isCancellationRequested?null:p.protocol2CodeConverter.asCompletionResult(E,i,x),E=>p.handleFailedRequest(ne.CompletionRequest.type,x,E,null));return v.provideCompletionItem?v.provideCompletionItem(u,l,g,h,y):y(u,l,g,h)},resolveCompletionItem:e.resolveProvider?(u,l)=>{let h=this._client,g=this._client.middleware,p=(v,y)=>h.sendRequest(ne.CompletionResolveRequest.type,h.code2ProtocolConverter.asCompletionItem(v,!!this.labelDetailsSupport.get(n)),y).then(_=>y.isCancellationRequested?null:h.protocol2CodeConverter.asCompletionItem(_),_=>h.handleFailedRequest(ne.CompletionResolveRequest.type,y,_,v));return g.resolveCompletionItem?g.resolveCompletionItem(u,l,p):p(u,l)}:void 0};return[dD.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(s),o,...r),o]}};Ys.CompletionItemFeature=ol});var lp=S(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});Zs.HoverFeature=void 0;var pD=require("vscode"),Hi=G(),al=re(),gD=Te(),cl=class extends al.TextDocumentLanguageFeature{constructor(e){super(e,Hi.HoverRequest.type)}fillClientCapabilities(e){let n=(0,al.ensure)((0,al.ensure)(e,"textDocument"),"hover");n.dynamicRegistration=!0,n.contentFormat=[Hi.MarkupKind.Markdown,Hi.MarkupKind.PlainText]}initialize(e,n){let r=this.getRegistrationOptions(n,e.hoverProvider);!r||this.register({id:gD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideHover:(i,s,o)=>{let a=this._client,u=(h,g,p)=>a.sendRequest(Hi.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(h,g),p).then(v=>p.isCancellationRequested?null:a.protocol2CodeConverter.asHover(v),v=>a.handleFailedRequest(Hi.HoverRequest.type,p,v,null)),l=a.middleware;return l.provideHover?l.provideHover(i,s,o,u):u(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return pD.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Zs.HoverFeature=cl});var dp=S(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.DefinitionFeature=void 0;var mD=require("vscode"),ul=G(),ll=re(),vD=Te(),dl=class extends ll.TextDocumentLanguageFeature{constructor(e){super(e,ul.DefinitionRequest.type)}fillClientCapabilities(e){let n=(0,ll.ensure)((0,ll.ensure)(e,"textDocument"),"definition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.definitionProvider);!r||this.register({id:vD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDefinition:(i,s,o)=>{let a=this._client,u=(h,g,p)=>a.sendRequest(ul.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(h,g),p).then(v=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(v,p),v=>a.handleFailedRequest(ul.DefinitionRequest.type,p,v,null)),l=a.middleware;return l.provideDefinition?l.provideDefinition(i,s,o,u):u(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return mD.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};eo.DefinitionFeature=dl});var hp=S(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.SignatureHelpFeature=void 0;var fp=require("vscode"),Wi=G(),fl=re(),yD=Te(),hl=class extends fl.TextDocumentLanguageFeature{constructor(e){super(e,Wi.SignatureHelpRequest.type)}fillClientCapabilities(e){let n=(0,fl.ensure)((0,fl.ensure)(e,"textDocument"),"signatureHelp");n.dynamicRegistration=!0,n.signatureInformation={documentationFormat:[Wi.MarkupKind.Markdown,Wi.MarkupKind.PlainText]},n.signatureInformation.parameterInformation={labelOffsetSupport:!0},n.signatureInformation.activeParameterSupport=!0,n.contextSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.signatureHelpProvider);!r||this.register({id:yD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideSignatureHelp:(r,i,s,o)=>{let a=this._client,u=(h,g,p,v)=>a.sendRequest(Wi.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(h,g,p),v).then(y=>v.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(y,v),y=>a.handleFailedRequest(Wi.SignatureHelpRequest.type,v,y,null)),l=a.middleware;return l.provideSignatureHelp?l.provideSignatureHelp(r,i,o,s,u):u(r,i,o,s)}};return[this.registerProvider(e,n),n]}registerProvider(e,n){let r=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return fp.languages.registerSignatureHelpProvider(r,n,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return fp.languages.registerSignatureHelpProvider(r,n,i)}}};to.SignatureHelpFeature=hl});var pp=S(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.DocumentHighlightFeature=void 0;var CD=require("vscode"),pl=G(),gl=re(),_D=Te(),ml=class extends gl.TextDocumentLanguageFeature{constructor(e){super(e,pl.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,gl.ensure)((0,gl.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentHighlightProvider);!r||this.register({id:_D.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentHighlights:(i,s,o)=>{let a=this._client,u=(h,g,p)=>a.sendRequest(pl.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(h,g),p).then(v=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(v,p),v=>a.handleFailedRequest(pl.DocumentHighlightRequest.type,p,v,null)),l=a.middleware;return l.provideDocumentHighlights?l.provideDocumentHighlights(i,s,o,u):u(i,s,o)}};return[CD.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};no.DocumentHighlightFeature=ml});var Cl=S(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.DocumentSymbolFeature=hn.SupportedSymbolTags=hn.SupportedSymbolKinds=void 0;var DD=require("vscode"),ue=G(),vl=re(),RD=Te();hn.SupportedSymbolKinds=[ue.SymbolKind.File,ue.SymbolKind.Module,ue.SymbolKind.Namespace,ue.SymbolKind.Package,ue.SymbolKind.Class,ue.SymbolKind.Method,ue.SymbolKind.Property,ue.SymbolKind.Field,ue.SymbolKind.Constructor,ue.SymbolKind.Enum,ue.SymbolKind.Interface,ue.SymbolKind.Function,ue.SymbolKind.Variable,ue.SymbolKind.Constant,ue.SymbolKind.String,ue.SymbolKind.Number,ue.SymbolKind.Boolean,ue.SymbolKind.Array,ue.SymbolKind.Object,ue.SymbolKind.Key,ue.SymbolKind.Null,ue.SymbolKind.EnumMember,ue.SymbolKind.Struct,ue.SymbolKind.Event,ue.SymbolKind.Operator,ue.SymbolKind.TypeParameter];hn.SupportedSymbolTags=[ue.SymbolTag.Deprecated];var yl=class extends vl.TextDocumentLanguageFeature{constructor(e){super(e,ue.DocumentSymbolRequest.type)}fillClientCapabilities(e){let n=(0,vl.ensure)((0,vl.ensure)(e,"textDocument"),"documentSymbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:hn.SupportedSymbolKinds},n.hierarchicalDocumentSymbolSupport=!0,n.tagSupport={valueSet:hn.SupportedSymbolTags},n.labelSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentSymbolProvider);!r||this.register({id:RD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentSymbols:(s,o)=>{let a=this._client,u=(h,g)=>a.sendRequest(ue.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(h),g).then(async p=>{if(g.isCancellationRequested||p===void 0||p===null)return null;if(p.length===0)return[];{let v=p[0];return ue.DocumentSymbol.is(v)?await a.protocol2CodeConverter.asDocumentSymbols(p,g):await a.protocol2CodeConverter.asSymbolInformations(p,g)}},p=>a.handleFailedRequest(ue.DocumentSymbolRequest.type,g,p,null)),l=a.middleware;return l.provideDocumentSymbols?l.provideDocumentSymbols(s,o,u):u(s,o)}},i=e.label!==void 0?{label:e.label}:void 0;return[DD.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,i),r]}};hn.DocumentSymbolFeature=yl});var mp=S(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.WorkspaceSymbolFeature=void 0;var bD=require("vscode"),Ui=G(),_l=re(),gp=Cl(),SD=Te(),Dl=class extends _l.WorkspaceFeature{constructor(e){super(e,Ui.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let n=(0,_l.ensure)((0,_l.ensure)(e,"workspace"),"symbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:gp.SupportedSymbolKinds},n.tagSupport={valueSet:gp.SupportedSymbolTags},n.resolveSupport={properties:["location.range"]}}initialize(e){!e.workspaceSymbolProvider||this.register({id:SD.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let n={provideWorkspaceSymbols:(r,i)=>{let s=this._client,o=(u,l)=>s.sendRequest(Ui.WorkspaceSymbolRequest.type,{query:u},l).then(h=>l.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformations(h,l),h=>s.handleFailedRequest(Ui.WorkspaceSymbolRequest.type,l,h,null)),a=s.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(r,i,o):o(r,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(r,i)=>{let s=this._client,o=(u,l)=>s.sendRequest(Ui.WorkspaceSymbolResolveRequest.type,s.code2ProtocolConverter.asWorkspaceSymbol(u),l).then(h=>l.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformation(h),h=>s.handleFailedRequest(Ui.WorkspaceSymbolResolveRequest.type,l,h,null)),a=s.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(r,i,o):o(r,i)}:void 0};return[bD.languages.registerWorkspaceSymbolProvider(n),n]}};ro.WorkspaceSymbolFeature=Dl});var vp=S(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.ReferencesFeature=void 0;var wD=require("vscode"),Rl=G(),bl=re(),TD=Te(),Sl=class extends bl.TextDocumentLanguageFeature{constructor(e){super(e,Rl.ReferencesRequest.type)}fillClientCapabilities(e){(0,bl.ensure)((0,bl.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.referencesProvider);!r||this.register({id:TD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideReferences:(i,s,o,a)=>{let u=this._client,l=(g,p,v,y)=>u.sendRequest(Rl.ReferencesRequest.type,u.code2ProtocolConverter.asReferenceParams(g,p,v),y).then(_=>y.isCancellationRequested?null:u.protocol2CodeConverter.asReferences(_,y),_=>u.handleFailedRequest(Rl.ReferencesRequest.type,y,_,null)),h=u.middleware;return h.provideReferences?h.provideReferences(i,s,o,a,l):l(i,s,o,a)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return wD.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};io.ReferencesFeature=Sl});var yp=S(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.CodeActionFeature=void 0;var PD=require("vscode"),St=G(),qD=Te(),wl=re(),Tl=class extends wl.TextDocumentLanguageFeature{constructor(e){super(e,St.CodeActionRequest.type)}fillClientCapabilities(e){let n=(0,wl.ensure)((0,wl.ensure)(e,"textDocument"),"codeAction");n.dynamicRegistration=!0,n.isPreferredSupport=!0,n.disabledSupport=!0,n.dataSupport=!0,n.resolveSupport={properties:["edit"]},n.codeActionLiteralSupport={codeActionKind:{valueSet:[St.CodeActionKind.Empty,St.CodeActionKind.QuickFix,St.CodeActionKind.Refactor,St.CodeActionKind.RefactorExtract,St.CodeActionKind.RefactorInline,St.CodeActionKind.RefactorRewrite,St.CodeActionKind.Source,St.CodeActionKind.SourceOrganizeImports]}},n.honorsChangeAnnotations=!1}initialize(e,n){let r=this.getRegistrationOptions(n,e.codeActionProvider);!r||this.register({id:qD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideCodeActions:(i,s,o,a)=>{let u=this._client,l=async(g,p,v,y)=>{let _={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),range:u.code2ProtocolConverter.asRange(p),context:await u.code2ProtocolConverter.asCodeActionContext(v,y)};return u.sendRequest(St.CodeActionRequest.type,_,y).then(b=>y.isCancellationRequested||b===null||b===void 0?null:u.protocol2CodeConverter.asCodeActionResult(b,y),b=>u.handleFailedRequest(St.CodeActionRequest.type,y,b,null))},h=u.middleware;return h.provideCodeActions?h.provideCodeActions(i,s,o,a,l):l(i,s,o,a)},resolveCodeAction:e.resolveProvider?(i,s)=>{let o=this._client,a=this._client.middleware,u=async(l,h)=>o.sendRequest(St.CodeActionResolveRequest.type,await o.code2ProtocolConverter.asCodeAction(l,h),h).then(g=>h.isCancellationRequested?l:o.protocol2CodeConverter.asCodeAction(g,h),g=>o.handleFailedRequest(St.CodeActionResolveRequest.type,h,g,l));return a.resolveCodeAction?a.resolveCodeAction(i,s,u):u(i,s)}:void 0};return[PD.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}};so.CodeActionFeature=Tl});var _p=S(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.CodeLensFeature=void 0;var Cp=require("vscode"),Br=G(),xD=Te(),Ki=re(),Pl=class extends Ki.TextDocumentLanguageFeature{constructor(e){super(e,Br.CodeLensRequest.type)}fillClientCapabilities(e){(0,Ki.ensure)((0,Ki.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,Ki.ensure)((0,Ki.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,n){this._client.onRequest(Br.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(n,e.codeLensProvider);!i||this.register({id:xD.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new Cp.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(s,o)=>{let a=this._client,u=(h,g)=>a.sendRequest(Br.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(h),g).then(p=>g.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(p,g),p=>a.handleFailedRequest(Br.CodeLensRequest.type,g,p,null)),l=a.middleware;return l.provideCodeLenses?l.provideCodeLenses(s,o,u):u(s,o)},resolveCodeLens:e.resolveProvider?(s,o)=>{let a=this._client,u=(h,g)=>a.sendRequest(Br.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(h),g).then(p=>g.isCancellationRequested?h:a.protocol2CodeConverter.asCodeLens(p),p=>a.handleFailedRequest(Br.CodeLensResolveRequest.type,g,p,h)),l=a.middleware;return l.resolveCodeLens?l.resolveCodeLens(s,o,u):u(s,o)}:void 0};return[Cp.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),{provider:i,onDidChangeCodeLensEmitter:r}]}};oo.CodeLensFeature=Pl});var Dp=S(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.DocumentOnTypeFormattingFeature=Ln.DocumentRangeFormattingFeature=Ln.DocumentFormattingFeature=void 0;var ao=require("vscode"),bn=G(),kl=Te(),Sn=re(),zi;(function(t){function e(n){let r=ao.workspace.getConfiguration("files",n);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}t.fromConfiguration=e})(zi||(zi={}));var ql=class extends Sn.TextDocumentLanguageFeature{constructor(e){super(e,bn.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,Sn.ensure)((0,Sn.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentFormattingProvider);!r||this.register({id:kl.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentFormattingEdits:(i,s,o)=>{let a=this._client,u=(h,g,p)=>{let v={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(h),options:a.code2ProtocolConverter.asFormattingOptions(g,zi.fromConfiguration(h))};return a.sendRequest(bn.DocumentFormattingRequest.type,v,p).then(y=>p.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(y,p),y=>a.handleFailedRequest(bn.DocumentFormattingRequest.type,p,y,null))},l=a.middleware;return l.provideDocumentFormattingEdits?l.provideDocumentFormattingEdits(i,s,o,u):u(i,s,o)}};return[ao.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Ln.DocumentFormattingFeature=ql;var xl=class extends Sn.TextDocumentLanguageFeature{constructor(e){super(e,bn.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,Sn.ensure)((0,Sn.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentRangeFormattingProvider);!r||this.register({id:kl.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentRangeFormattingEdits:(i,s,o,a)=>{let u=this._client,l=(g,p,v,y)=>{let _={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),range:u.code2ProtocolConverter.asRange(p),options:u.code2ProtocolConverter.asFormattingOptions(v,zi.fromConfiguration(g))};return u.sendRequest(bn.DocumentRangeFormattingRequest.type,_,y).then(b=>y.isCancellationRequested?null:u.protocol2CodeConverter.asTextEdits(b,y),b=>u.handleFailedRequest(bn.DocumentRangeFormattingRequest.type,y,b,null))},h=u.middleware;return h.provideDocumentRangeFormattingEdits?h.provideDocumentRangeFormattingEdits(i,s,o,a,l):l(i,s,o,a)}};return[ao.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Ln.DocumentRangeFormattingFeature=xl;var El=class extends Sn.TextDocumentLanguageFeature{constructor(e){super(e,bn.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,Sn.ensure)((0,Sn.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentOnTypeFormattingProvider);!r||this.register({id:kl.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideOnTypeFormattingEdits:(s,o,a,u,l)=>{let h=this._client,g=(v,y,_,b,w)=>{let x={textDocument:h.code2ProtocolConverter.asTextDocumentIdentifier(v),position:h.code2ProtocolConverter.asPosition(y),ch:_,options:h.code2ProtocolConverter.asFormattingOptions(b,zi.fromConfiguration(v))};return h.sendRequest(bn.DocumentOnTypeFormattingRequest.type,x,w).then(E=>w.isCancellationRequested?null:h.protocol2CodeConverter.asTextEdits(E,w),E=>h.handleFailedRequest(bn.DocumentOnTypeFormattingRequest.type,w,E,null))},p=h.middleware;return p.provideOnTypeFormattingEdits?p.provideOnTypeFormattingEdits(s,o,a,u,l,g):g(s,o,a,u,l)}},i=e.moreTriggerCharacter||[];return[ao.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,e.firstTriggerCharacter,...i),r]}};Ln.DocumentOnTypeFormattingFeature=El});var bp=S(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.RenameFeature=void 0;var ED=require("vscode"),cr=G(),kD=Te(),Rp=Et(),Ol=re(),Il=class extends Ol.TextDocumentLanguageFeature{constructor(e){super(e,cr.RenameRequest.type)}fillClientCapabilities(e){let n=(0,Ol.ensure)((0,Ol.ensure)(e,"textDocument"),"rename");n.dynamicRegistration=!0,n.prepareSupport=!0,n.prepareSupportDefaultBehavior=cr.PrepareSupportDefaultBehavior.Identifier,n.honorsChangeAnnotations=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.renameProvider);!r||(Rp.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:kD.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let n=e.documentSelector,r={provideRenameEdits:(i,s,o,a)=>{let u=this._client,l=(g,p,v,y)=>{let _={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),position:u.code2ProtocolConverter.asPosition(p),newName:v};return u.sendRequest(cr.RenameRequest.type,_,y).then(b=>y.isCancellationRequested?null:u.protocol2CodeConverter.asWorkspaceEdit(b,y),b=>u.handleFailedRequest(cr.RenameRequest.type,y,b,null,!1))},h=u.middleware;return h.provideRenameEdits?h.provideRenameEdits(i,s,o,a,l):l(i,s,o,a)},prepareRename:e.prepareProvider?(i,s,o)=>{let a=this._client,u=(h,g,p)=>{let v={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(h),position:a.code2ProtocolConverter.asPosition(g)};return a.sendRequest(cr.PrepareRenameRequest.type,v,p).then(y=>p.isCancellationRequested?null:cr.Range.is(y)?a.protocol2CodeConverter.asRange(y):this.isDefaultBehavior(y)?y.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):y&&cr.Range.is(y.range)?{range:a.protocol2CodeConverter.asRange(y.range),placeholder:y.placeholder}:Promise.reject(new Error("The element can't be renamed.")),y=>{throw typeof y.message=="string"?new Error(y.message):new Error("The element can't be renamed.")})},l=a.middleware;return l.prepareRename?l.prepareRename(i,s,o,u):u(i,s,o)}:void 0};return[this.registerProvider(n,r),r]}registerProvider(e,n){return ED.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}isDefaultBehavior(e){let n=e;return n&&Rp.boolean(n.defaultBehavior)}};co.RenameFeature=Il});var Sp=S(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.DocumentLinkFeature=void 0;var OD=require("vscode"),Gi=G(),Fl=re(),ID=Te(),Nl=class extends Fl.TextDocumentLanguageFeature{constructor(e){super(e,Gi.DocumentLinkRequest.type)}fillClientCapabilities(e){let n=(0,Fl.ensure)((0,Fl.ensure)(e,"textDocument"),"documentLink");n.dynamicRegistration=!0,n.tooltipSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentLinkProvider);!r||this.register({id:ID.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentLinks:(i,s)=>{let o=this._client,a=(l,h)=>o.sendRequest(Gi.DocumentLinkRequest.type,o.code2ProtocolConverter.asDocumentLinkParams(l),h).then(g=>h.isCancellationRequested?null:o.protocol2CodeConverter.asDocumentLinks(g,h),g=>o.handleFailedRequest(Gi.DocumentLinkRequest.type,h,g,null)),u=o.middleware;return u.provideDocumentLinks?u.provideDocumentLinks(i,s,a):a(i,s)},resolveDocumentLink:e.resolveProvider?(i,s)=>{let o=this._client,a=(l,h)=>o.sendRequest(Gi.DocumentLinkResolveRequest.type,o.code2ProtocolConverter.asDocumentLink(l),h).then(g=>h.isCancellationRequested?l:o.protocol2CodeConverter.asDocumentLink(g),g=>o.handleFailedRequest(Gi.DocumentLinkResolveRequest.type,h,g,l)),u=o.middleware;return u.resolveDocumentLink?u.resolveDocumentLink(i,s,a):a(i,s)}:void 0};return[OD.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};uo.DocumentLinkFeature=Nl});var Tp=S(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.ExecuteCommandFeature=void 0;var FD=require("vscode"),Ml=G(),ND=Te(),wp=re(),Ll=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return Ml.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,wp.ensure)((0,wp.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:ND.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let n=this._client,r=n.middleware,i=(s,o)=>{let a={command:s,arguments:o};return n.sendRequest(Ml.ExecuteCommandRequest.type,a).then(void 0,u=>n.handleFailedRequest(Ml.ExecuteCommandRequest.type,void 0,u,void 0))};if(e.registerOptions.commands){let s=[];for(let o of e.registerOptions.commands)s.push(FD.commands.registerCommand(o,(...a)=>r.executeCommand?r.executeCommand(o,a,i):i(o,a)));this._commands.set(e.id,s)}}unregister(e){let n=this._commands.get(e);n&&n.forEach(r=>r.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(n=>n.dispose())}),this._commands.clear()}};lo.ExecuteCommandFeature=Ll});var Pp=S(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.FileSystemWatcherFeature=void 0;var MD=require("vscode"),ur=G(),fo=re(),Al=class{constructor(e,n){this._client=e,this._notifyFileEvent=n,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return ur.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,fo.ensure)((0,fo.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,fo.ensure)((0,fo.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,n){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let n=[];for(let r of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(r.globPattern);if(i===void 0)continue;let s=!0,o=!0,a=!0;r.kind!==void 0&&r.kind!==null&&(s=(r.kind&ur.WatchKind.Create)!==0,o=(r.kind&ur.WatchKind.Change)!==0,a=(r.kind&ur.WatchKind.Delete)!==0);let u=MD.workspace.createFileSystemWatcher(i,!s,!o,!a);this.hookListeners(u,s,o,a,n),n.push(u)}this._watchers.set(e.id,n)}registerRaw(e,n){let r=[];for(let i of n)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,n,r,i,s){n&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:ur.FileChangeType.Created}),null,s),r&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:ur.FileChangeType.Changed}),null,s),i&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:ur.FileChangeType.Deleted}),null,s)}unregister(e){let n=this._watchers.get(e);if(n)for(let r of n)r.dispose()}dispose(){this._watchers.forEach(e=>{for(let n of e)n.dispose()}),this._watchers.clear()}};ho.FileSystemWatcherFeature=Al});var qp=S(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.ColorProviderFeature=void 0;var LD=require("vscode"),Bi=G(),jl=re(),$l=class extends jl.TextDocumentLanguageFeature{constructor(e){super(e,Bi.DocumentColorRequest.type)}fillClientCapabilities(e){(0,jl.ensure)((0,jl.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideColorPresentations:(i,s,o)=>{let a=this._client,u=(h,g,p)=>{let v={color:h,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g.document),range:a.code2ProtocolConverter.asRange(g.range)};return a.sendRequest(Bi.ColorPresentationRequest.type,v,p).then(y=>p.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(y,p),y=>a.handleFailedRequest(Bi.ColorPresentationRequest.type,p,y,null))},l=a.middleware;return l.provideColorPresentations?l.provideColorPresentations(i,s,o,u):u(i,s,o)},provideDocumentColors:(i,s)=>{let o=this._client,a=(l,h)=>{let g={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(l)};return o.sendRequest(Bi.DocumentColorRequest.type,g,h).then(p=>h.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(p,h),p=>o.handleFailedRequest(Bi.DocumentColorRequest.type,h,p,null))},u=o.middleware;return u.provideDocumentColors?u.provideDocumentColors(i,s,a):a(i,s)}};return[LD.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};po.ColorProviderFeature=$l});var xp=S(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.ImplementationFeature=void 0;var AD=require("vscode"),Hl=G(),Wl=re(),Ul=class extends Wl.TextDocumentLanguageFeature{constructor(e){super(e,Hl.ImplementationRequest.type)}fillClientCapabilities(e){let n=(0,Wl.ensure)((0,Wl.ensure)(e,"textDocument"),"implementation");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideImplementation:(i,s,o)=>{let a=this._client,u=(h,g,p)=>a.sendRequest(Hl.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(h,g),p).then(v=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(v,p),v=>a.handleFailedRequest(Hl.ImplementationRequest.type,p,v,null)),l=a.middleware;return l.provideImplementation?l.provideImplementation(i,s,o,u):u(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return AD.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};go.ImplementationFeature=Ul});var Ep=S(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.TypeDefinitionFeature=void 0;var jD=require("vscode"),Kl=G(),Vi=re(),zl=class extends Vi.TextDocumentLanguageFeature{constructor(e){super(e,Kl.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,Vi.ensure)((0,Vi.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let n=(0,Vi.ensure)((0,Vi.ensure)(e,"textDocument"),"typeDefinition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideTypeDefinition:(i,s,o)=>{let a=this._client,u=(h,g,p)=>a.sendRequest(Kl.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(h,g),p).then(v=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(v,p),v=>a.handleFailedRequest(Kl.TypeDefinitionRequest.type,p,v,null)),l=a.middleware;return l.provideTypeDefinition?l.provideTypeDefinition(i,s,o,u):u(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return jD.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};mo.TypeDefinitionFeature=zl});var kp=S(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.WorkspaceFoldersFeature=Vr.arrayDiff=void 0;var $D=Te(),vo=require("vscode"),Xi=G();function Gl(t,e){if(t!==void 0)return t[e]}function Bl(t,e){return t.filter(n=>e.indexOf(n)<0)}Vr.arrayDiff=Bl;var Vl=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Xi.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let n=vo.workspace.workspaceFolders;this.initializeWithFolders(n),n===void 0?e.workspaceFolders=null:e.workspaceFolders=n.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let n=this._client;n.onRequest(Xi.WorkspaceFoldersRequest.type,s=>{let o=()=>{let u=vo.workspace.workspaceFolders;return u===void 0?null:u.map(h=>this.asProtocol(h))},a=n.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(s,o):o(s)});let r=Gl(Gl(Gl(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=$D.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let n;if(this._initialFolders&&e){let r=Bl(this._initialFolders,e),i=Bl(e,this._initialFolders);(i.length>0||r.length>0)&&(n=this.doSendEvent(i,r))}else this._initialFolders?n=this.doSendEvent([],this._initialFolders):e&&(n=this.doSendEvent(e,[]));n!==void 0&&n.catch(r=>{this._client.error(`Sending notification ${Xi.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,n){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:n.map(i=>this.asProtocol(i))}};return this._client.sendNotification(Xi.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let n=e.id,r=this._client,i=vo.workspace.onDidChangeWorkspaceFolders(s=>{let o=l=>this.doSendEvent(l.added,l.removed),a=r.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(s,o):o(s)).catch(l=>{this._client.error(`Sending notification ${Xi.DidChangeWorkspaceFoldersNotification.type.method} failed`,l)})});this._listeners.set(n,i),this.sendInitialEvent(vo.workspace.workspaceFolders)}unregister(e){let n=this._listeners.get(e);n!==void 0&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};Vr.WorkspaceFoldersFeature=Vl});var Op=S(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.FoldingRangeFeature=void 0;var HD=require("vscode"),Xr=G(),Xl=re(),Ql=class extends Xl.TextDocumentLanguageFeature{constructor(e){super(e,Xr.FoldingRangeRequest.type)}fillClientCapabilities(e){let n=(0,Xl.ensure)((0,Xl.ensure)(e,"textDocument"),"foldingRange");n.dynamicRegistration=!0,n.rangeLimit=5e3,n.lineFoldingOnly=!0,n.foldingRangeKind={valueSet:[Xr.FoldingRangeKind.Comment,Xr.FoldingRangeKind.Imports,Xr.FoldingRangeKind.Region]},n.foldingRange={collapsedText:!1}}initialize(e,n){let[r,i]=this.getRegistration(n,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideFoldingRanges:(i,s,o)=>{let a=this._client,u=(h,g,p)=>{let v={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(h)};return a.sendRequest(Xr.FoldingRangeRequest.type,v,p).then(y=>p.isCancellationRequested?null:a.protocol2CodeConverter.asFoldingRanges(y,p),y=>a.handleFailedRequest(Xr.FoldingRangeRequest.type,p,y,null))},l=a.middleware;return l.provideFoldingRanges?l.provideFoldingRanges(i,s,o,u):u(i,s,o)}};return[HD.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};yo.FoldingRangeFeature=Ql});var Ip=S(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.DeclarationFeature=void 0;var WD=require("vscode"),Jl=G(),Yl=re(),Zl=class extends Yl.TextDocumentLanguageFeature{constructor(e){super(e,Jl.DeclarationRequest.type)}fillClientCapabilities(e){let n=(0,Yl.ensure)((0,Yl.ensure)(e,"textDocument"),"declaration");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDeclaration:(i,s,o)=>{let a=this._client,u=(h,g,p)=>a.sendRequest(Jl.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(h,g),p).then(v=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(v,p),v=>a.handleFailedRequest(Jl.DeclarationRequest.type,p,v,null)),l=a.middleware;return l.provideDeclaration?l.provideDeclaration(i,s,o,u):u(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return WD.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Co.DeclarationFeature=Zl});var Fp=S(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.SelectionRangeFeature=void 0;var UD=require("vscode"),ed=G(),td=re(),nd=class extends td.TextDocumentLanguageFeature{constructor(e){super(e,ed.SelectionRangeRequest.type)}fillClientCapabilities(e){let n=(0,td.ensure)((0,td.ensure)(e,"textDocument"),"selectionRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideSelectionRanges:(i,s,o)=>{let a=this._client,u=async(h,g,p)=>{let v={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(h),positions:await a.code2ProtocolConverter.asPositions(g,p)};return a.sendRequest(ed.SelectionRangeRequest.type,v,p).then(y=>p.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(y,p),y=>a.handleFailedRequest(ed.SelectionRangeRequest.type,p,y,null))},l=a.middleware;return l.provideSelectionRanges?l.provideSelectionRanges(i,s,o,u):u(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return UD.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};_o.SelectionRangeFeature=nd});var Mp=S(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.ProgressFeature=void 0;var Np=G(),KD=Eu();function zD(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var rd=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:Np.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){zD(e,"window").workDoneProgress=!0}initialize(){let e=this._client,n=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new KD.ProgressPart(this._client,i.token,n))};e.onRequest(Np.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Do.ProgressFeature=rd});var Lp=S(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.CallHierarchyFeature=void 0;var GD=require("vscode"),lr=G(),id=re(),sd=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,n,r){let i=this.client,s=this.middleware,o=(a,u,l)=>{let h=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(lr.CallHierarchyPrepareRequest.type,h,l).then(g=>l.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(g,l),g=>i.handleFailedRequest(lr.CallHierarchyPrepareRequest.type,l,g,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,n,r,o):o(e,n,r)}provideCallHierarchyIncomingCalls(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(lr.CallHierarchyIncomingCallsRequest.type,u,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyIncomingCalls(l,a),l=>r.handleFailedRequest(lr.CallHierarchyIncomingCallsRequest.type,a,l,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,n,s):s(e,n)}provideCallHierarchyOutgoingCalls(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(lr.CallHierarchyOutgoingCallsRequest.type,u,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(l,a),l=>r.handleFailedRequest(lr.CallHierarchyOutgoingCallsRequest.type,a,l,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,n,s):s(e,n)}},od=class extends id.TextDocumentLanguageFeature{constructor(e){super(e,lr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=e,r=(0,id.ensure)((0,id.ensure)(n,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=this._client,r=new sd(n);return[GD.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};Ro.CallHierarchyFeature=od});var Ap=S(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.SemanticTokensFeature=void 0;var bo=require("vscode"),B=G(),Qi=re(),BD=Et(),ad=class extends Qi.TextDocumentLanguageFeature{constructor(e){super(e,B.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let n=(0,Qi.ensure)((0,Qi.ensure)(e,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[B.SemanticTokenTypes.namespace,B.SemanticTokenTypes.type,B.SemanticTokenTypes.class,B.SemanticTokenTypes.enum,B.SemanticTokenTypes.interface,B.SemanticTokenTypes.struct,B.SemanticTokenTypes.typeParameter,B.SemanticTokenTypes.parameter,B.SemanticTokenTypes.variable,B.SemanticTokenTypes.property,B.SemanticTokenTypes.enumMember,B.SemanticTokenTypes.event,B.SemanticTokenTypes.function,B.SemanticTokenTypes.method,B.SemanticTokenTypes.macro,B.SemanticTokenTypes.keyword,B.SemanticTokenTypes.modifier,B.SemanticTokenTypes.comment,B.SemanticTokenTypes.string,B.SemanticTokenTypes.number,B.SemanticTokenTypes.regexp,B.SemanticTokenTypes.operator,B.SemanticTokenTypes.decorator],n.tokenModifiers=[B.SemanticTokenModifiers.declaration,B.SemanticTokenModifiers.definition,B.SemanticTokenModifiers.readonly,B.SemanticTokenModifiers.static,B.SemanticTokenModifiers.deprecated,B.SemanticTokenModifiers.abstract,B.SemanticTokenModifiers.async,B.SemanticTokenModifiers.modification,B.SemanticTokenModifiers.documentation,B.SemanticTokenModifiers.defaultLibrary],n.formats=[B.TokenFormat.Relative],n.requests={range:!0,full:{delta:!0}},n.multilineTokenSupport=!1,n.overlappingTokenSupport=!1,n.serverCancelSupport=!0,n.augmentsSyntaxTokens=!0,(0,Qi.ensure)((0,Qi.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,n){this._client.onRequest(B.SemanticTokensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(n,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=e.documentSelector,r=BD.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,s=new bo.EventEmitter,o=r?{onDidChangeSemanticTokens:s.event,provideDocumentSemanticTokens:(v,y)=>{let _=this._client,b=_.middleware,w=(x,E)=>{let F={textDocument:_.code2ProtocolConverter.asTextDocumentIdentifier(x)};return _.sendRequest(B.SemanticTokensRequest.type,F,E).then(z=>E.isCancellationRequested?null:_.protocol2CodeConverter.asSemanticTokens(z,E),z=>_.handleFailedRequest(B.SemanticTokensRequest.type,E,z,null))};return b.provideDocumentSemanticTokens?b.provideDocumentSemanticTokens(v,y,w):w(v,y)},provideDocumentSemanticTokensEdits:i?(v,y,_)=>{let b=this._client,w=b.middleware,x=(E,F,z)=>{let Ne={textDocument:b.code2ProtocolConverter.asTextDocumentIdentifier(E),previousResultId:F};return b.sendRequest(B.SemanticTokensDeltaRequest.type,Ne,z).then(async De=>z.isCancellationRequested?null:B.SemanticTokens.is(De)?await b.protocol2CodeConverter.asSemanticTokens(De,z):await b.protocol2CodeConverter.asSemanticTokensEdits(De,z),De=>b.handleFailedRequest(B.SemanticTokensDeltaRequest.type,z,De,null))};return w.provideDocumentSemanticTokensEdits?w.provideDocumentSemanticTokensEdits(v,y,_,x):x(v,y,_)}:void 0}:void 0,u=e.range===!0?{provideDocumentRangeSemanticTokens:(v,y,_)=>{let b=this._client,w=b.middleware,x=(E,F,z)=>{let Ne={textDocument:b.code2ProtocolConverter.asTextDocumentIdentifier(E),range:b.code2ProtocolConverter.asRange(F)};return b.sendRequest(B.SemanticTokensRangeRequest.type,Ne,z).then(De=>z.isCancellationRequested?null:b.protocol2CodeConverter.asSemanticTokens(De,z),De=>b.handleFailedRequest(B.SemanticTokensRangeRequest.type,z,De,null))};return w.provideDocumentRangeSemanticTokens?w.provideDocumentRangeSemanticTokens(v,y,_,x):x(v,y,_)}}:void 0,l=[],h=this._client,g=h.protocol2CodeConverter.asSemanticTokensLegend(e.legend),p=h.protocol2CodeConverter.asDocumentSelector(n);return o!==void 0&&l.push(bo.languages.registerDocumentSemanticTokensProvider(p,o,g)),u!==void 0&&l.push(bo.languages.registerDocumentRangeSemanticTokensProvider(p,u,g)),[new bo.Disposable(()=>l.forEach(v=>v.dispose())),{range:u,full:o,onDidChangeSemanticTokensEmitter:s}]}};So.SemanticTokensFeature=ad});var Hp=S(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.WillDeleteFilesFeature=Ct.WillRenameFilesFeature=Ct.WillCreateFilesFeature=Ct.DidDeleteFilesFeature=Ct.DidRenameFilesFeature=Ct.DidCreateFilesFeature=void 0;var Mt=require("vscode"),VD=Bs(),wn=G(),XD=Te();function jp(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function QD(t,e){return t[e]}function $p(t,e,n){t[e]=n}var Tn=class{constructor(e,n,r,i,s){this._client=e,this._event=n,this._registrationType=r,this._clientCapability=i,this._serverCapability=s,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let n=jp(jp(e,"workspace"),"fileOperations");$p(n,"dynamicRegistration",!0),$p(n,this._clientCapability,!0)}initialize(e){var i;let n=(i=e.workspace)==null?void 0:i.fileOperations,r=n!==void 0?QD(n,this._serverCapability):void 0;if((r==null?void 0:r.filters)!==void 0)try{this.register({id:XD.generateUuid(),registerOptions:{filters:r.filters}})}catch(s){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${s}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let n=e.registerOptions.filters.map(r=>{let i=new VD.Minimatch(r.pattern.glob,Tn.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,n)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return Tn.getFileType(e)}async filter(e,n){let r=await Promise.all(e.files.map(async s=>{let o=n(s),a=o.fsPath.replace(/\\/g,"/");for(let u of this._filters.values())for(let l of u)if(!(l.scheme!==void 0&&l.scheme!==o.scheme)){if(l.matcher.match(a)){if(l.kind===void 0)return!0;let h=await this.getFileType(o);if(h===void 0)return this._client.error(`Failed to determine file type for ${o.toString()}.`),!0;if(h===Mt.FileType.File&&l.kind===wn.FileOperationPatternKind.file||h===Mt.FileType.Directory&&l.kind===wn.FileOperationPatternKind.folder)return!0}else if(l.kind===wn.FileOperationPatternKind.folder&&await Tn.getFileType(o)===Mt.FileType.Directory&&l.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((s,o)=>r[o]);return{...e,files:i}}static async getFileType(e){try{return(await Mt.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},wo=class extends Tn{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s),this._notificationType=r,this._accessUri=o,this._createParams=a}async send(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(n,r)}}},To=class extends wo{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let n=e.fsPath;if(this._fsPathFileTypes.has(n))return this._fsPathFileTypes.get(n);let r=await Tn.getFileType(e);return r&&this._fsPathFileTypes.set(n,r),r}async cacheFileTypes(e,n){await this.filter(e,n)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},cd=class extends wo{constructor(e){super(e,Mt.workspace.onDidCreateFiles,wn.DidCreateFilesNotification.type,"didCreate","didCreate",n=>n,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r!=null&&r.didCreateFiles?r.didCreateFiles(e,n):n(e)}};Ct.DidCreateFilesFeature=cd;var ud=class extends To{constructor(e){super(e,Mt.workspace.onDidRenameFiles,wn.DidRenameFilesNotification.type,"didRename","didRename",n=>n.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=Mt.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,n=>n.oldUri))}doSend(e,n){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r!=null&&r.didRenameFiles?r.didRenameFiles(e,n):n(e)}};Ct.DidRenameFilesFeature=ud;var ld=class extends To{constructor(e){super(e,Mt.workspace.onDidDeleteFiles,wn.DidDeleteFilesNotification.type,"didDelete","didDelete",n=>n,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=Mt.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,n=>n))}doSend(e,n){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r!=null&&r.didDeleteFiles?r.didDeleteFiles(e,n):n(e)}};Ct.DidDeleteFilesFeature=ld;var Ji=class extends Tn{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s),this._requestType=r,this._accessUri=o,this._createParams=a}async send(e){let n=this.waitUntil(e);e.waitUntil(n)}async waitUntil(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(n,r)}else return}},dd=class extends Ji{constructor(e){super(e,Mt.workspace.onWillCreateFiles,wn.WillCreateFilesRequest.type,"willCreate","willCreate",n=>n,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r!=null&&r.willCreateFiles?r.willCreateFiles(e,n):n(e)}};Ct.WillCreateFilesFeature=dd;var fd=class extends Ji{constructor(e){super(e,Mt.workspace.onWillRenameFiles,wn.WillRenameFilesRequest.type,"willRename","willRename",n=>n.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r!=null&&r.willRenameFiles?r.willRenameFiles(e,n):n(e)}};Ct.WillRenameFilesFeature=fd;var hd=class extends Ji{constructor(e){super(e,Mt.workspace.onWillDeleteFiles,wn.WillDeleteFilesRequest.type,"willDelete","willDelete",n=>n,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r!=null&&r.willDeleteFiles?r.willDeleteFiles(e,n):n(e)}};Ct.WillDeleteFilesFeature=hd});var Wp=S(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.LinkedEditingFeature=void 0;var JD=require("vscode"),pd=G(),gd=re(),md=class extends gd.TextDocumentLanguageFeature{constructor(e){super(e,pd.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let n=(0,gd.ensure)((0,gd.ensure)(e,"textDocument"),"linkedEditingRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideLinkedEditingRanges:(i,s,o)=>{let a=this._client,u=(h,g,p)=>a.sendRequest(pd.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(h,g),p).then(v=>p.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(v,p),v=>a.handleFailedRequest(pd.LinkedEditingRangeRequest.type,p,v,null)),l=a.middleware;return l.provideLinkedEditingRange?l.provideLinkedEditingRange(i,s,o,u):u(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return JD.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Po.LinkedEditingFeature=md});var Up=S(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.TypeHierarchyFeature=void 0;var YD=require("vscode"),dr=G(),vd=re(),yd=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,n,r){let i=this.client,s=this.middleware,o=(a,u,l)=>{let h=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(dr.TypeHierarchyPrepareRequest.type,h,l).then(g=>l.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(g,l),g=>i.handleFailedRequest(dr.TypeHierarchyPrepareRequest.type,l,g,null))};return s.prepareTypeHierarchy?s.prepareTypeHierarchy(e,n,r,o):o(e,n,r)}provideTypeHierarchySupertypes(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(o)};return r.sendRequest(dr.TypeHierarchySupertypesRequest.type,u,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(l,a),l=>r.handleFailedRequest(dr.TypeHierarchySupertypesRequest.type,a,l,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,n,s):s(e,n)}provideTypeHierarchySubtypes(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(o)};return r.sendRequest(dr.TypeHierarchySubtypesRequest.type,u,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(l,a),l=>r.handleFailedRequest(dr.TypeHierarchySubtypesRequest.type,a,l,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,n,s):s(e,n)}},Cd=class extends vd.TextDocumentLanguageFeature{constructor(e){super(e,dr.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=(0,vd.ensure)((0,vd.ensure)(e,"textDocument"),"typeHierarchy");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=this._client,r=new yd(n);return[YD.languages.registerTypeHierarchyProvider(n.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};qo.TypeHierarchyFeature=Cd});var zp=S(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.InlineValueFeature=void 0;var Kp=require("vscode"),xo=G(),Yi=re(),_d=class extends Yi.TextDocumentLanguageFeature{constructor(e){super(e,xo.InlineValueRequest.type)}fillClientCapabilities(e){(0,Yi.ensure)((0,Yi.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,Yi.ensure)((0,Yi.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,n){this._client.onRequest(xo.InlineValueRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(n,e.inlineValueProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new Kp.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(s,o,a,u)=>{let l=this._client,h=(p,v,y,_)=>{let b={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(p),range:l.code2ProtocolConverter.asRange(v),context:l.code2ProtocolConverter.asInlineValueContext(y)};return l.sendRequest(xo.InlineValueRequest.type,b,_).then(w=>_.isCancellationRequested?null:l.protocol2CodeConverter.asInlineValues(w,_),w=>l.handleFailedRequest(xo.InlineValueRequest.type,_,w,null))},g=l.middleware;return g.provideInlineValues?g.provideInlineValues(s,o,a,u,h):h(s,o,a,u)}};return[this.registerProvider(n,i),{provider:i,onDidChangeInlineValues:r}]}registerProvider(e,n){return Kp.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Eo.InlineValueFeature=_d});var Bp=S(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.InlayHintsFeature=void 0;var Gp=require("vscode"),Qr=G(),Zi=re(),Dd=class extends Zi.TextDocumentLanguageFeature{constructor(e){super(e,Qr.InlayHintRequest.type)}fillClientCapabilities(e){let n=(0,Zi.ensure)((0,Zi.ensure)(e,"textDocument"),"inlayHint");n.dynamicRegistration=!0,n.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,Zi.ensure)((0,Zi.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,n){this._client.onRequest(Qr.InlayHintRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlayHints.fire()});let[r,i]=this.getRegistration(n,e.inlayHintProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new Gp.EventEmitter,i={onDidChangeInlayHints:r.event,provideInlayHints:(s,o,a)=>{let u=this._client,l=async(g,p,v)=>{let y={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),range:u.code2ProtocolConverter.asRange(p)};try{let _=await u.sendRequest(Qr.InlayHintRequest.type,y,v);return v.isCancellationRequested?null:u.protocol2CodeConverter.asInlayHints(_,v)}catch(_){return u.handleFailedRequest(Qr.InlayHintRequest.type,v,_,null)}},h=u.middleware;return h.provideInlayHints?h.provideInlayHints(s,o,a,l):l(s,o,a)}};return i.resolveInlayHint=e.resolveProvider===!0?(s,o)=>{let a=this._client,u=async(h,g)=>{try{let p=await a.sendRequest(Qr.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(h),g);if(g.isCancellationRequested)return null;let v=a.protocol2CodeConverter.asInlayHint(p,g);return g.isCancellationRequested?null:v}catch(p){return a.handleFailedRequest(Qr.InlayHintResolveRequest.type,g,p,null)}},l=a.middleware;return l.resolveInlayHint?l.resolveInlayHint(s,o,u):u(s,o)}:void 0,[this.registerProvider(n,i),{provider:i,onDidChangeInlayHints:r}]}registerProvider(e,n){return Gp.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};ko.InlayHintsFeature=Dd});var wd=S(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.ProposedFeatures=_e.BaseLanguageClient=_e.MessageTransports=_e.SuspendMode=_e.State=_e.CloseAction=_e.ErrorAction=_e.RevealOutputChannelOn=void 0;var me=require("vscode"),I=G(),ZD=Ph(),eR=Eh(),Lt=Et(),Vp=Mi(),Xp=Te(),tR=Eu(),Yt=re(),nR=Vu(),Qp=sp(),Jp=ap(),Jr=cp(),rR=up(),iR=lp(),sR=dp(),oR=hp(),aR=pp(),cR=Cl(),uR=mp(),lR=vp(),dR=yp(),fR=_p(),Rd=Dp(),hR=bp(),pR=Sp(),gR=Tp(),mR=Pp(),vR=qp(),yR=xp(),CR=Ep(),_R=kp(),DR=Op(),RR=Ip(),bR=Fp(),SR=Mp(),wR=Lp(),TR=Ap(),Yr=Hp(),PR=Wp(),qR=Up(),xR=zp(),ER=Bp(),es;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(es=_e.RevealOutputChannelOn||(_e.RevealOutputChannelOn={}));var Io;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(Io=_e.ErrorAction||(_e.ErrorAction={}));var fr;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(fr=_e.CloseAction||(_e.CloseAction={}));var Oo;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(Oo=_e.State||(_e.State={}));var kR;(function(t){t.off="off",t.on="on"})(kR=_e.SuspendMode||(_e.SuspendMode={}));var bd=class{constructor(e,n){this.client=e,this.maxRestartCount=n,this.restarts=[]}error(e,n,r){return r&&r<=3?{action:Io.Continue}:{action:Io.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:fr.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:fr.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:fr.Restart})}},Z;(function(t){t.Initial="initial",t.Starting="starting",t.StartFailed="startFailed",t.Running="running",t.Stopping="stopping",t.Stopped="stopped"})(Z||(Z={}));var OR;(function(t){function e(n){return n&&I.MessageReader.is(n.reader)&&I.MessageWriter.is(n.writer)}t.is=e})(OR=_e.MessageTransports||(_e.MessageTransports={}));var hr=class{constructor(e,n,r){var s;this._traceFormat=I.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new Vp.Semaphore(1),this._id=e,this._name=n,r=r||{};let i={isTrusted:!1,supportHtml:!1};r.markdown!==void 0&&(i.isTrusted=r.markdown.isTrusted===!0,i.supportHtml=r.markdown.supportHtml===!0),this._clientOptions={documentSelector:r.documentSelector??[],synchronize:r.synchronize??{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName??this._name,revealOutputChannelOn:r.revealOutputChannelOn??es.Error,stdioEncoding:r.stdioEncoding??"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler??this.createDefaultErrorHandler((s=r.connectionOptions)==null?void 0:s.maxRestartCount),middleware:r.middleware??{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:i,diagnosticPullOptions:r.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:r.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Z.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new Vp.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new I.Emitter,this._stateChangeEmitter=new I.Emitter,this._trace=I.Trace.Off,this._tracer={log:(o,a)=>{Lt.string(o)?this.logTrace(o,a):this.logObjectTrace(o)}},this._c2p=ZD.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=eR.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=me.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let n=this.getPublicState();this._state=e;let r=this.getPublicState();r!==n&&this._stateChangeEmitter.fire({oldState:n,newState:r})}getPublicState(){switch(this.$state){case Z.Starting:return Oo.Starting;case Z.Running:return Oo.Running;default:return Oo.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...n){if(this.$state===Z.StartFailed||this.$state===Z.Stopping||this.$state===Z.Stopped)return Promise.reject(new I.ResponseError(I.ErrorCodes.ConnectionInactive,"Client is not running"));try{let r=await this.$start();return await this.forceDocumentSync(),r.sendRequest(e,...n)}catch(r){throw this.error(`Sending request ${Lt.string(e)?e:e.method} failed.`,r),r}}onRequest(e,n){let r=typeof e=="string"?e:e.method;this._requestHandlers.set(r,n);let i=this.activeConnection(),s;return i!==void 0?(this._requestDisposables.set(r,i.onRequest(e,n)),s={dispose:()=>{let o=this._requestDisposables.get(r);o!==void 0&&(o.dispose(),this._requestDisposables.delete(r))}}):(this._pendingRequestHandlers.set(r,n),s={dispose:()=>{this._pendingRequestHandlers.delete(r);let o=this._requestDisposables.get(r);o!==void 0&&(o.dispose(),this._requestDisposables.delete(r))}}),{dispose:()=>{this._requestHandlers.delete(r),s.dispose()}}}async sendNotification(e,n){if(this.$state===Z.StartFailed||this.$state===Z.Stopping||this.$state===Z.Stopped)return Promise.reject(new I.ResponseError(I.ErrorCodes.ConnectionInactive,"Client is not running"));try{let r=await this.$start();return await this.forceDocumentSync(),r.sendNotification(e,n)}catch(r){throw this.error(`Sending notification ${Lt.string(e)?e:e.method} failed.`,r),r}}onNotification(e,n){let r=typeof e=="string"?e:e.method;this._notificationHandlers.set(r,n);let i=this.activeConnection(),s;return i!==void 0?(this._notificationDisposables.set(r,i.onNotification(e,n)),s={dispose:()=>{let o=this._notificationDisposables.get(r);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(r))}}):(this._pendingNotificationHandlers.set(r,n),s={dispose:()=>{this._pendingNotificationHandlers.delete(r);let o=this._notificationDisposables.get(r);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(r))}}),{dispose:()=>{this._notificationHandlers.delete(r),s.dispose()}}}async sendProgress(e,n,r){if(this.$state===Z.StartFailed||this.$state===Z.Stopping||this.$state===Z.Stopped)return Promise.reject(new I.ResponseError(I.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,n,r)}catch(i){throw this.error(`Sending progress for token ${n} failed.`,i),i}}onProgress(e,n,r){var u;this._progressHandlers.set(n,{type:e,handler:r});let i=this.activeConnection(),s,o=(u=this._clientOptions.middleware)==null?void 0:u.handleWorkDoneProgress,a=I.WorkDoneProgress.is(e)&&o!==void 0?l=>{o(n,l,()=>r(l))}:r;return i!==void 0?(this._progressDisposables.set(n,i.onProgress(e,n,a)),s={dispose:()=>{let l=this._progressDisposables.get(n);l!==void 0&&(l.dispose(),this._progressDisposables.delete(n))}}):(this._pendingProgressHandlers.set(n,{type:e,handler:r}),s={dispose:()=>{this._pendingProgressHandlers.delete(n);let l=this._progressDisposables.get(n);l!==void 0&&(l.dispose(),this._progressDisposables.delete(n))}}),{dispose:()=>{this._progressHandlers.delete(n),s.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new bd(this,e??4)}async setTrace(e){this._trace=e;let n=this.activeConnection();n!==void 0&&await n.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof I.ResponseError){let n=e;return`  Message: ${n.message}
  Code: ${n.code} ${n.data?`
`+n.data.toString():""}`}return e instanceof Error?Lt.string(e.stack)?e.stack:e.message:Lt.string(e)?e:e.toString()}info(e,n,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=es.Info&&this.showNotificationMessage(I.MessageType.Info,e)}warn(e,n,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=es.Warn&&this.showNotificationMessage(I.MessageType.Warning,e)}error(e,n,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),(r==="force"||r&&this._clientOptions.revealOutputChannelOn<=es.Error)&&this.showNotificationMessage(I.MessageType.Error,e)}showNotificationMessage(e,n){n=n??"A request has failed. See the output for more information.",(e===I.MessageType.Error?me.window.showErrorMessage:e===I.MessageType.Warning?me.window.showWarningMessage:me.window.showInformationMessage)(n,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,n){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.traceOutputChannel.appendLine(this.data2String(n))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===Z.Initial||this.$state===Z.Stopping||this.$state===Z.Stopped}needsStop(){return this.$state===Z.Starting||this.$state===Z.Running}activeConnection(){return this.$state===Z.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===Z.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===Z.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,n,r]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?me.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):me.languages.createDiagnosticCollection());for(let[i,s]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,s);for(let[i,s]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,s);for(let[i,s]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,s);this.$state=Z.Starting;try{let i=await this.createConnection();i.onNotification(I.LogMessageNotification.type,s=>{switch(s.type){case I.MessageType.Error:this.error(s.message,void 0,!1);break;case I.MessageType.Warning:this.warn(s.message,void 0,!1);break;case I.MessageType.Info:this.info(s.message,void 0,!1);break;default:this.outputChannel.appendLine(s.message)}}),i.onNotification(I.ShowMessageNotification.type,s=>{switch(s.type){case I.MessageType.Error:me.window.showErrorMessage(s.message);break;case I.MessageType.Warning:me.window.showWarningMessage(s.message);break;case I.MessageType.Info:me.window.showInformationMessage(s.message);break;default:me.window.showInformationMessage(s.message)}}),i.onRequest(I.ShowMessageRequest.type,s=>{let o;switch(s.type){case I.MessageType.Error:o=me.window.showErrorMessage;break;case I.MessageType.Warning:o=me.window.showWarningMessage;break;case I.MessageType.Info:o=me.window.showInformationMessage;break;default:o=me.window.showInformationMessage}let a=s.actions||[];return o(s.message,...a)}),i.onNotification(I.TelemetryEventNotification.type,s=>{this._telemetryEmitter.fire(s)}),i.onRequest(I.ShowDocumentRequest.type,async s=>{var u;let o=async l=>{let h=this.protocol2CodeConverter.asUri(l.uri);try{if(l.external===!0)return{success:await me.env.openExternal(h)};{let g={};return l.selection!==void 0&&(g.selection=this.protocol2CodeConverter.asRange(l.selection)),l.takeFocus===void 0||l.takeFocus===!1?g.preserveFocus=!0:l.takeFocus===!0&&(g.preserveFocus=!1),await me.window.showTextDocument(h,g),{success:!0}}}catch{return{success:!1}}},a=(u=this._clientOptions.middleware.window)==null?void 0:u.showDocument;return a!==void 0?a(s,o):o(s)}),i.listen(),await this.initialize(i),n()}catch(i){this.$state=Z.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),r(i)}return this._onStart}createOnStartPromise(){let e,n;return[new Promise((i,s)=>{e=i,n=s}),e,n]}async initialize(e){this.refreshTrace(e,!1);let n=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],s={processId:null,clientInfo:{name:me.env.appName,version:me.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(me.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Lt.func(n)?n():n,trace:I.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(s),this._clientOptions.progressOnInitialization){let o=Xp.generateUuid(),a=new tR.ProgressPart(e,o);s.workDoneToken=o;try{let u=await this.doInitialize(e,s);return a.done(),u}catch(u){throw a.cancel(),u}}else return this.doInitialize(e,s)}async doInitialize(e,n){try{let r=await e.initialize(n);if(r.capabilities.positionEncoding!==void 0&&r.capabilities.positionEncoding!==I.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${r.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=r,this.$state=Z.Running;let i;Lt.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===I.TextDocumentSyncKind.None?i={openClose:!1,change:I.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(I.PublishDiagnosticsNotification.type,s=>this.handleDiagnostics(s)),e.onRequest(I.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(I.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(I.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s));for(let[s,o]of this._pendingNotificationHandlers)this._notificationDisposables.set(s,e.onNotification(s,o));this._pendingNotificationHandlers.clear();for(let[s,o]of this._pendingRequestHandlers)this._requestDisposables.set(s,e.onRequest(s,o));this._pendingRequestHandlers.clear();for(let[s,o]of this._pendingProgressHandlers)this._progressDisposables.set(s,e.onProgress(o.type,s,o.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(I.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),r}catch(r){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):this.stop():r instanceof I.ResponseError&&r.data&&r.data.retry?me.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(r&&r.message&&me.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop()),r}}_clientGetRootPath(){let e=me.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,n){if(this.$state===Z.Stopped||this.$state===Z.Initial)return;if(this.$state===Z.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let r=this.activeConnection();if(r===void 0||this.$state!==Z.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=Z.Stopping,this.cleanUp(e);let i=new Promise(o=>{(0,I.RAL)().timer.setTimeout(o,n)}),s=(async o=>(await o.shutdown(),await o.exit(),o))(r);return this._onStop=Promise.race([i,s]).then(o=>{if(o!==void 0)o.end(),o.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},o=>{throw this.error("Stopping server failed",o,!1),o}).finally(()=>{this.$state=Z.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let n=this._listeners.splice(0,this._listeners.length);for(let r of n)r.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=>i[1]).reverse())r.dispose();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var s;let n=this;async function r(o){return n._fileEvents.push(o),n._fileEventDelayer.trigger(async()=>{let a=await n.$start();await n.forceDocumentSync();let u=a.sendNotification(I.DidChangeWatchedFilesNotification.type,{changes:n._fileEvents});return n._fileEvents=[],u})}let i=(s=this.clientOptions.middleware)==null?void 0:s.workspace;(i!=null&&i.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(o=>{n.error("Notify file events failed.",o)})}async forceDocumentSync(){return this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(I.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let n=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===n&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,I.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[n,r]=e.value;this._diagnosticQueue.delete(n);let i=new me.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:n,tokenSource:i},this._p2c.asDiagnostics(r,i.token).then(s=>{if(!i.token.isCancellationRequested){let o=this._p2c.asUri(n),a=this.clientOptions.middleware;a.handleDiagnostics?a.handleDiagnostics(o,s,(u,l)=>this.setDiagnostics(u,l)):this.setDiagnostics(o,s)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,n){!this._diagnostics||this._diagnostics.set(e,n)}async $start(){if(this.$state===Z.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,s,o)=>{this.handleConnectionError(i,s,o)},n=()=>{this.handleConnectionClosed()},r=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=IR(r.reader,r.writer,e,n,this._clientOptions.connectionOptions),this._connection}handleConnectionClosed(){if(this.$state===Z.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:fr.DoNotRestart};if(this.$state!==Z.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===fr.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,"force"),this.cleanUp("stop"),this.$state===Z.Starting?this.$state=Z.StartFailed:this.$state=Z.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===fr.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart."),this.cleanUp("restart"),this.$state=Z.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(n=>this.error("Restarting server failed",n,"force")))}handleConnectionError(e,n,r){let i=this._clientOptions.errorHandler.error(e,n,r);i.action===Io.Shutdown&&(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,"force"),this.stop().catch(s=>{this.error("Stopping server failed",s,!1)}))}hookConfigurationChanged(e){this._listeners.push(me.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,n=!1){let r=me.workspace.getConfiguration(this._id),i=I.Trace.Off,s=I.TraceFormat.Text;if(r){let o=r.get("trace.server","off");typeof o=="string"?i=I.Trace.fromString(o):(i=I.Trace.fromString(r.get("trace.server.verbosity","off")),s=I.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:n,traceFormat:this._traceFormat}).catch(o=>{this.error("Updating trace failed with error",o,!1)})}hookFileEvents(e){let n=this._clientOptions.synchronize.fileEvents;if(!n)return;let r;Lt.array(n)?r=n:r=[n],r&&this._dynamicFeatures.get(I.DidChangeWatchedFilesNotification.type.method).registerRaw(Xp.generateUuid(),r)}registerFeatures(e){for(let n of e)this.registerFeature(n)}registerFeature(e){if(this._features.push(e),Yt.DynamicFeature.is(e)){let n=e.registrationType;this._dynamicFeatures.set(n.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let n=this.getFeature(I.NotebookDocumentSyncRegistrationType.method);return n===void 0||!(n instanceof Qp.NotebookDocumentSyncFeature)?!1:n.handles(e)}registerBuiltinFeatures(){this.registerFeature(new Jp.ConfigurationFeature(this)),this.registerFeature(new Jr.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new Jr.DidChangeTextDocumentFeature(this)),this.registerFeature(new Jr.WillSaveFeature(this)),this.registerFeature(new Jr.WillSaveWaitUntilFeature(this)),this.registerFeature(new Jr.DidSaveTextDocumentFeature(this)),this.registerFeature(new Jr.DidCloseTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new mR.FileSystemWatcherFeature(this,e=>this.notifyFileEvent(e))),this.registerFeature(new rR.CompletionItemFeature(this)),this.registerFeature(new iR.HoverFeature(this)),this.registerFeature(new oR.SignatureHelpFeature(this)),this.registerFeature(new sR.DefinitionFeature(this)),this.registerFeature(new lR.ReferencesFeature(this)),this.registerFeature(new aR.DocumentHighlightFeature(this)),this.registerFeature(new cR.DocumentSymbolFeature(this)),this.registerFeature(new uR.WorkspaceSymbolFeature(this)),this.registerFeature(new dR.CodeActionFeature(this)),this.registerFeature(new fR.CodeLensFeature(this)),this.registerFeature(new Rd.DocumentFormattingFeature(this)),this.registerFeature(new Rd.DocumentRangeFormattingFeature(this)),this.registerFeature(new Rd.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new hR.RenameFeature(this)),this.registerFeature(new pR.DocumentLinkFeature(this)),this.registerFeature(new gR.ExecuteCommandFeature(this)),this.registerFeature(new Jp.SyncConfigurationFeature(this)),this.registerFeature(new CR.TypeDefinitionFeature(this)),this.registerFeature(new yR.ImplementationFeature(this)),this.registerFeature(new vR.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new _R.WorkspaceFoldersFeature(this)),this.registerFeature(new DR.FoldingRangeFeature(this)),this.registerFeature(new RR.DeclarationFeature(this)),this.registerFeature(new bR.SelectionRangeFeature(this)),this.registerFeature(new SR.ProgressFeature(this)),this.registerFeature(new wR.CallHierarchyFeature(this)),this.registerFeature(new TR.SemanticTokensFeature(this)),this.registerFeature(new PR.LinkedEditingFeature(this)),this.registerFeature(new Yr.DidCreateFilesFeature(this)),this.registerFeature(new Yr.DidRenameFilesFeature(this)),this.registerFeature(new Yr.DidDeleteFilesFeature(this)),this.registerFeature(new Yr.WillCreateFilesFeature(this)),this.registerFeature(new Yr.WillRenameFilesFeature(this)),this.registerFeature(new Yr.WillDeleteFilesFeature(this)),this.registerFeature(new qR.TypeHierarchyFeature(this)),this.registerFeature(new xR.InlineValueFeature(this)),this.registerFeature(new ER.InlayHintsFeature(this)),this.registerFeature(new nR.DiagnosticFeature(this)),this.registerFeature(new Qp.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(Yp.createAll(this))}fillInitializeParams(e){for(let n of this._features)Lt.func(n.fillInitializeParams)&&n.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,Yt.ensure)(e,"workspace").applyEdit=!0;let n=(0,Yt.ensure)((0,Yt.ensure)(e,"workspace"),"workspaceEdit");n.documentChanges=!0,n.resourceOperations=[I.ResourceOperationKind.Create,I.ResourceOperationKind.Rename,I.ResourceOperationKind.Delete],n.failureHandling=I.FailureHandlingKind.TextOnlyTransactional,n.normalizesLineEndings=!0,n.changeAnnotationSupport={groupsOnLabel:!0};let r=(0,Yt.ensure)((0,Yt.ensure)(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[I.DiagnosticTag.Unnecessary,I.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=(0,Yt.ensure)(e,"window"),s=(0,Yt.ensure)(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let o=(0,Yt.ensure)(i,"showDocument");o.support=!0;let a=(0,Yt.ensure)(e,"general");a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(hr.RequestsToCancelOnContentModified)},a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"},a.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(a.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let u of this._features)u.fillClientCapabilities(e);return e}initializeFeatures(e){let n=this._clientOptions.documentSelector;for(let r of this._features)Lt.func(r.preInitialize)&&r.preInitialize(this._capabilities,n);for(let r of this._features)r.initialize(this._capabilities,n)}async handleRegistrationRequest(e){if(!this.isRunning()){for(let n of e.registrations)this._ignoredRegistrations.add(n.id);return}for(let n of e.registrations){let r=this._dynamicFeatures.get(n.method);if(r===void 0)return Promise.reject(new Error(`No feature implementation for ${n.method} found. Registration failed.`));let i=n.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let s={id:n.id,registerOptions:i};try{r.register(s)}catch(o){return Promise.reject(o)}}}async handleUnregistrationRequest(e){for(let n of e.unregisterations){if(this._ignoredRegistrations.has(n.id))continue;let r=this._dynamicFeatures.get(n.method);if(!r)return Promise.reject(new Error(`No feature implementation for ${n.method} found. Unregistration failed.`));r.unregister(n.id)}}async handleApplyWorkspaceEdit(e){let n=e.edit,r=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(n)),i=new Map;me.workspace.textDocuments.forEach(o=>i.set(o.uri.toString(),o));let s=!1;if(n.documentChanges){for(let o of n.documentChanges)if(I.TextDocumentEdit.is(o)&&o.textDocument.version&&o.textDocument.version>=0){let a=i.get(o.textDocument.uri);if(a&&a.version!==o.textDocument.version){s=!0;break}}}return s?Promise.resolve({applied:!1}):Lt.asPromise(me.workspace.applyEdit(r).then(o=>({applied:o})))}handleFailedRequest(e,n,r,i,s=!0){if(r instanceof I.ResponseError){if(r.code===I.ErrorCodes.PendingResponseRejected||r.code===I.ErrorCodes.ConnectionInactive)return i;if(r.code===I.LSPErrorCodes.RequestCancelled||r.code===I.LSPErrorCodes.ServerCancelled){if(n!==void 0&&n.isCancellationRequested)return i;throw r.data!==void 0?new Yt.LSPCancellationError(r.data):new me.CancellationError}else if(r.code===I.LSPErrorCodes.ContentModified){if(hr.RequestsToCancelOnContentModified.has(e.method))throw new me.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,s),r}};_e.BaseLanguageClient=hr;hr.RequestsToCancelOnContentModified=new Set([I.SemanticTokensRequest.method,I.SemanticTokensRangeRequest.method,I.SemanticTokensDeltaRequest.method]);var Sd=class{error(e){(0,I.RAL)().console.error(e)}warn(e){(0,I.RAL)().console.warn(e)}info(e){(0,I.RAL)().console.info(e)}log(e){(0,I.RAL)().console.log(e)}};function IR(t,e,n,r,i){let s=-1,o=new Sd,a=(0,I.createProtocolConnection)(t,e,o,i);return a.onError(l=>{n(l[0],l[1],l[2])}),a.onClose(r),{get lastUsed(){return s},resetLastUsed:()=>{s=-1},listen:()=>a.listen(),sendRequest:(l,...h)=>(s=Date.now(),a.sendRequest(l,...h)),onRequest:(l,h)=>a.onRequest(l,h),hasPendingResponse:()=>a.hasPendingResponse(),sendNotification:(l,h)=>(s=Date.now(),a.sendNotification(l,h)),onNotification:(l,h)=>a.onNotification(l,h),onProgress:a.onProgress,sendProgress:a.sendProgress,trace:(l,h,g)=>{let p={sendNotification:!1,traceFormat:I.TraceFormat.Text};return g===void 0?a.trace(l,h,p):(Lt.boolean(g),a.trace(l,h,g))},initialize:l=>(s=Date.now(),a.sendRequest(I.InitializeRequest.type,l)),shutdown:()=>(s=Date.now(),a.sendRequest(I.ShutdownRequest.type,void 0)),exit:()=>(s=Date.now(),a.sendNotification(I.ExitNotification.type)),end:()=>a.end(),dispose:()=>a.dispose()}}var Yp;(function(t){function e(n){return[]}t.createAll=e})(Yp=_e.ProposedFeatures||(_e.ProposedFeatures={}))});var eg=S(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.terminate=void 0;var Zp=require("child_process"),FR=require("path"),NR=process.platform==="win32",MR=process.platform==="darwin",LR=process.platform==="linux";function AR(t,e){if(NR)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),Zp.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch{return!1}else if(LR||MR)try{var n=(0,FR.join)(__dirname,"terminateProcess.sh"),r=Zp.spawnSync(n,[t.pid.toString()]);return!r.error}catch{return!1}else return t.kill("SIGKILL"),!0}Fo.terminate=AR});var Td=S((Uw,tg)=>{"use strict";tg.exports=G()});var No=S((Kw,ng)=>{var jR="2.0.0",$R=Number.MAX_SAFE_INTEGER||9007199254740991,HR=16;ng.exports={SEMVER_SPEC_VERSION:jR,MAX_LENGTH:256,MAX_SAFE_INTEGER:$R,MAX_SAFE_COMPONENT_LENGTH:HR}});var ts=S((zw,rg)=>{var WR=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};rg.exports=WR});var ns=S((An,ig)=>{var{MAX_SAFE_COMPONENT_LENGTH:Pd}=No(),UR=ts();An=ig.exports={};var KR=An.re=[],A=An.src=[],j=An.t={},zR=0,Q=(t,e,n)=>{let r=zR++;UR(t,r,e),j[t]=r,A[r]=e,KR[r]=new RegExp(e,n?"g":void 0)};Q("NUMERICIDENTIFIER","0|[1-9]\\d*");Q("NUMERICIDENTIFIERLOOSE","[0-9]+");Q("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");Q("MAINVERSION",`(${A[j.NUMERICIDENTIFIER]})\\.(${A[j.NUMERICIDENTIFIER]})\\.(${A[j.NUMERICIDENTIFIER]})`);Q("MAINVERSIONLOOSE",`(${A[j.NUMERICIDENTIFIERLOOSE]})\\.(${A[j.NUMERICIDENTIFIERLOOSE]})\\.(${A[j.NUMERICIDENTIFIERLOOSE]})`);Q("PRERELEASEIDENTIFIER",`(?:${A[j.NUMERICIDENTIFIER]}|${A[j.NONNUMERICIDENTIFIER]})`);Q("PRERELEASEIDENTIFIERLOOSE",`(?:${A[j.NUMERICIDENTIFIERLOOSE]}|${A[j.NONNUMERICIDENTIFIER]})`);Q("PRERELEASE",`(?:-(${A[j.PRERELEASEIDENTIFIER]}(?:\\.${A[j.PRERELEASEIDENTIFIER]})*))`);Q("PRERELEASELOOSE",`(?:-?(${A[j.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${A[j.PRERELEASEIDENTIFIERLOOSE]})*))`);Q("BUILDIDENTIFIER","[0-9A-Za-z-]+");Q("BUILD",`(?:\\+(${A[j.BUILDIDENTIFIER]}(?:\\.${A[j.BUILDIDENTIFIER]})*))`);Q("FULLPLAIN",`v?${A[j.MAINVERSION]}${A[j.PRERELEASE]}?${A[j.BUILD]}?`);Q("FULL",`^${A[j.FULLPLAIN]}$`);Q("LOOSEPLAIN",`[v=\\s]*${A[j.MAINVERSIONLOOSE]}${A[j.PRERELEASELOOSE]}?${A[j.BUILD]}?`);Q("LOOSE",`^${A[j.LOOSEPLAIN]}$`);Q("GTLT","((?:<|>)?=?)");Q("XRANGEIDENTIFIERLOOSE",`${A[j.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Q("XRANGEIDENTIFIER",`${A[j.NUMERICIDENTIFIER]}|x|X|\\*`);Q("XRANGEPLAIN",`[v=\\s]*(${A[j.XRANGEIDENTIFIER]})(?:\\.(${A[j.XRANGEIDENTIFIER]})(?:\\.(${A[j.XRANGEIDENTIFIER]})(?:${A[j.PRERELEASE]})?${A[j.BUILD]}?)?)?`);Q("XRANGEPLAINLOOSE",`[v=\\s]*(${A[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${A[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${A[j.XRANGEIDENTIFIERLOOSE]})(?:${A[j.PRERELEASELOOSE]})?${A[j.BUILD]}?)?)?`);Q("XRANGE",`^${A[j.GTLT]}\\s*${A[j.XRANGEPLAIN]}$`);Q("XRANGELOOSE",`^${A[j.GTLT]}\\s*${A[j.XRANGEPLAINLOOSE]}$`);Q("COERCE",`(^|[^\\d])(\\d{1,${Pd}})(?:\\.(\\d{1,${Pd}}))?(?:\\.(\\d{1,${Pd}}))?(?:$|[^\\d])`);Q("COERCERTL",A[j.COERCE],!0);Q("LONETILDE","(?:~>?)");Q("TILDETRIM",`(\\s*)${A[j.LONETILDE]}\\s+`,!0);An.tildeTrimReplace="$1~";Q("TILDE",`^${A[j.LONETILDE]}${A[j.XRANGEPLAIN]}$`);Q("TILDELOOSE",`^${A[j.LONETILDE]}${A[j.XRANGEPLAINLOOSE]}$`);Q("LONECARET","(?:\\^)");Q("CARETTRIM",`(\\s*)${A[j.LONECARET]}\\s+`,!0);An.caretTrimReplace="$1^";Q("CARET",`^${A[j.LONECARET]}${A[j.XRANGEPLAIN]}$`);Q("CARETLOOSE",`^${A[j.LONECARET]}${A[j.XRANGEPLAINLOOSE]}$`);Q("COMPARATORLOOSE",`^${A[j.GTLT]}\\s*(${A[j.LOOSEPLAIN]})$|^$`);Q("COMPARATOR",`^${A[j.GTLT]}\\s*(${A[j.FULLPLAIN]})$|^$`);Q("COMPARATORTRIM",`(\\s*)${A[j.GTLT]}\\s*(${A[j.LOOSEPLAIN]}|${A[j.XRANGEPLAIN]})`,!0);An.comparatorTrimReplace="$1$2$3";Q("HYPHENRANGE",`^\\s*(${A[j.XRANGEPLAIN]})\\s+-\\s+(${A[j.XRANGEPLAIN]})\\s*$`);Q("HYPHENRANGELOOSE",`^\\s*(${A[j.XRANGEPLAINLOOSE]})\\s+-\\s+(${A[j.XRANGEPLAINLOOSE]})\\s*$`);Q("STAR","(<|>)?=?\\s*\\*");Q("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Q("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var rs=S((Gw,sg)=>{var GR=["includePrerelease","loose","rtl"],BR=t=>t?typeof t!="object"?{loose:!0}:GR.filter(e=>t[e]).reduce((e,n)=>(e[n]=!0,e),{}):{};sg.exports=BR});var ug=S((Bw,cg)=>{var og=/^[0-9]+$/,ag=(t,e)=>{let n=og.test(t),r=og.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},VR=(t,e)=>ag(e,t);cg.exports={compareIdentifiers:ag,rcompareIdentifiers:VR}});var is=S((Vw,hg)=>{var Mo=ts(),{MAX_LENGTH:lg,MAX_SAFE_INTEGER:Lo}=No(),{re:dg,t:fg}=ns(),XR=rs(),{compareIdentifiers:Zr}=ug(),wt=class{constructor(e,n){if(n=XR(n),e instanceof wt){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>lg)throw new TypeError(`version is longer than ${lg} characters`);Mo("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?dg[fg.LOOSE]:dg[fg.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Lo||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Lo||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Lo||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Lo)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Mo("SemVer.compare",this.version,this.options,e),!(e instanceof wt)){if(typeof e=="string"&&e===this.version)return 0;e=new wt(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof wt||(e=new wt(e,this.options)),Zr(this.major,e.major)||Zr(this.minor,e.minor)||Zr(this.patch,e.patch)}comparePre(e){if(e instanceof wt||(e=new wt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if(Mo("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Zr(r,i)}while(++n)}compareBuild(e){e instanceof wt||(e=new wt(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if(Mo("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Zr(r,i)}while(++n)}inc(e,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}n&&(Zr(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};hg.exports=wt});var yg=S((Xw,vg)=>{var{MAX_LENGTH:QR}=No(),{re:pg,t:gg}=ns(),mg=is(),JR=rs(),YR=(t,e)=>{if(e=JR(e),t instanceof mg)return t;if(typeof t!="string"||t.length>QR||!(e.loose?pg[gg.LOOSE]:pg[gg.FULL]).test(t))return null;try{return new mg(t,e)}catch{return null}};vg.exports=YR});var _g=S((Qw,Cg)=>{"use strict";Cg.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Rg=S((Jw,Dg)=>{"use strict";Dg.exports=se;se.Node=pr;se.create=se;function se(t){var e=this;if(e instanceof se||(e=new se),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}se.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};se.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};se.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};se.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)eb(this,arguments[t]);return this.length};se.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)tb(this,arguments[t]);return this.length};se.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};se.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};se.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};se.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};se.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};se.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};se.prototype.map=function(t,e){e=e||this;for(var n=new se,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};se.prototype.mapReverse=function(t,e){e=e||this;for(var n=new se,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};se.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=t(n,r.value,i),r=r.next;return n};se.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=t(n,r.value,i),r=r.prev;return n};se.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};se.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};se.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new se;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)n.push(i.value);return n};se.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new se;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>t;r--,i=i.prev)n.push(i.value);return n};se.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(var s=[],r=0;i&&r<e;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=ZR(this,i,n[r]);return s};se.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function ZR(t,e,n){var r=e===t.head?new pr(n,null,e,t):new pr(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function eb(t,e){t.tail=new pr(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function tb(t,e){t.head=new pr(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function pr(t,e,n,r){if(!(this instanceof pr))return new pr(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{_g()(se)}catch{}});var Pg=S((Yw,Tg)=>{"use strict";var nb=Rg(),gr=Symbol("max"),qn=Symbol("length"),ei=Symbol("lengthCalculator"),os=Symbol("allowStale"),mr=Symbol("maxAge"),Pn=Symbol("dispose"),bg=Symbol("noDisposeOnSet"),Ge=Symbol("lruList"),Zt=Symbol("cache"),wg=Symbol("updateAgeOnGet"),qd=()=>1,Ed=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let n=this[gr]=e.max||1/0,r=e.length||qd;if(this[ei]=typeof r!="function"?qd:r,this[os]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[mr]=e.maxAge||0,this[Pn]=e.dispose,this[bg]=e.noDisposeOnSet||!1,this[wg]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[gr]=e||1/0,ss(this)}get max(){return this[gr]}set allowStale(e){this[os]=!!e}get allowStale(){return this[os]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[mr]=e,ss(this)}get maxAge(){return this[mr]}set lengthCalculator(e){typeof e!="function"&&(e=qd),e!==this[ei]&&(this[ei]=e,this[qn]=0,this[Ge].forEach(n=>{n.length=this[ei](n.value,n.key),this[qn]+=n.length})),ss(this)}get lengthCalculator(){return this[ei]}get length(){return this[qn]}get itemCount(){return this[Ge].length}rforEach(e,n){n=n||this;for(let r=this[Ge].tail;r!==null;){let i=r.prev;Sg(this,e,r,n),r=i}}forEach(e,n){n=n||this;for(let r=this[Ge].head;r!==null;){let i=r.next;Sg(this,e,r,n),r=i}}keys(){return this[Ge].toArray().map(e=>e.key)}values(){return this[Ge].toArray().map(e=>e.value)}reset(){this[Pn]&&this[Ge]&&this[Ge].length&&this[Ge].forEach(e=>this[Pn](e.key,e.value)),this[Zt]=new Map,this[Ge]=new nb,this[qn]=0}dump(){return this[Ge].map(e=>Ao(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Ge]}set(e,n,r){if(r=r||this[mr],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,s=this[ei](n,e);if(this[Zt].has(e)){if(s>this[gr])return ti(this,this[Zt].get(e)),!1;let u=this[Zt].get(e).value;return this[Pn]&&(this[bg]||this[Pn](e,u.value)),u.now=i,u.maxAge=r,u.value=n,this[qn]+=s-u.length,u.length=s,this.get(e),ss(this),!0}let o=new kd(e,n,s,i,r);return o.length>this[gr]?(this[Pn]&&this[Pn](e,n),!1):(this[qn]+=o.length,this[Ge].unshift(o),this[Zt].set(e,this[Ge].head),ss(this),!0)}has(e){if(!this[Zt].has(e))return!1;let n=this[Zt].get(e).value;return!Ao(this,n)}get(e){return xd(this,e,!0)}peek(e){return xd(this,e,!1)}pop(){let e=this[Ge].tail;return e?(ti(this,e),e.value):null}del(e){ti(this,this[Zt].get(e))}load(e){this.reset();let n=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Zt].forEach((e,n)=>xd(this,n,!1))}},xd=(t,e,n)=>{let r=t[Zt].get(e);if(r){let i=r.value;if(Ao(t,i)){if(ti(t,r),!t[os])return}else n&&(t[wg]&&(r.value.now=Date.now()),t[Ge].unshiftNode(r));return i.value}},Ao=(t,e)=>{if(!e||!e.maxAge&&!t[mr])return!1;let n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[mr]&&n>t[mr]},ss=t=>{if(t[qn]>t[gr])for(let e=t[Ge].tail;t[qn]>t[gr]&&e!==null;){let n=e.prev;ti(t,e),e=n}},ti=(t,e)=>{if(e){let n=e.value;t[Pn]&&t[Pn](n.key,n.value),t[qn]-=n.length,t[Zt].delete(n.key),t[Ge].removeNode(e)}},kd=class{constructor(e,n,r,i,s){this.key=e,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}},Sg=(t,e,n,r)=>{let i=n.value;Ao(t,i)&&(ti(t,n),t[os]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};Tg.exports=Ed});var vr=S((Zw,xg)=>{var qg=is(),rb=(t,e,n)=>new qg(t,n).compare(new qg(e,n));xg.exports=rb});var kg=S((eT,Eg)=>{var ib=vr(),sb=(t,e,n)=>ib(t,e,n)===0;Eg.exports=sb});var Ig=S((tT,Og)=>{var ob=vr(),ab=(t,e,n)=>ob(t,e,n)!==0;Og.exports=ab});var Ng=S((nT,Fg)=>{var cb=vr(),ub=(t,e,n)=>cb(t,e,n)>0;Fg.exports=ub});var Lg=S((rT,Mg)=>{var lb=vr(),db=(t,e,n)=>lb(t,e,n)>=0;Mg.exports=db});var jg=S((iT,Ag)=>{var fb=vr(),hb=(t,e,n)=>fb(t,e,n)<0;Ag.exports=hb});var Hg=S((sT,$g)=>{var pb=vr(),gb=(t,e,n)=>pb(t,e,n)<=0;$g.exports=gb});var Ug=S((oT,Wg)=>{var mb=kg(),vb=Ig(),yb=Ng(),Cb=Lg(),_b=jg(),Db=Hg(),Rb=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return mb(t,n,r);case"!=":return vb(t,n,r);case">":return yb(t,n,r);case">=":return Cb(t,n,r);case"<":return _b(t,n,r);case"<=":return Db(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};Wg.exports=Rb});var Xg=S((aT,Vg)=>{var as=Symbol("SemVer ANY"),ni=class{static get ANY(){return as}constructor(e,n){if(n=bb(n),e instanceof ni){if(e.loose===!!n.loose)return e;e=e.value}Id("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===as?this.value="":this.value=this.operator+this.semver.version,Id("comp",this)}parse(e){let n=this.options.loose?Kg[zg.COMPARATORLOOSE]:Kg[zg.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new Gg(r[2],this.options.loose):this.semver=as}toString(){return this.value}test(e){if(Id("Comparator.test",e,this.options.loose),this.semver===as||e===as)return!0;if(typeof e=="string")try{e=new Gg(e,this.options)}catch{return!1}return Od(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof ni))throw new TypeError("a Comparator is required");if((!n||typeof n!="object")&&(n={loose:!!n,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Bg(e.value,n).test(this.value);if(e.operator==="")return e.value===""?!0:new Bg(this.value,n).test(e.semver);let r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=Od(this.semver,"<",e.semver,n)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),u=Od(this.semver,">",e.semver,n)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||s&&o||a||u}};Vg.exports=ni;var bb=rs(),{re:Kg,t:zg}=ns(),Od=Ug(),Id=ts(),Gg=is(),Bg=Fd()});var Fd=S((cT,Zg)=>{var yr=class{constructor(e,n){if(n=wb(n),e instanceof yr)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new yr(e.raw,n);if(e instanceof Nd)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e,this.set=e.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!Jg(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Eb(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=Qg.get(r);if(i)return i;let s=this.options.loose,o=s?_t[ft.HYPHENRANGELOOSE]:_t[ft.HYPHENRANGE];e=e.replace(o,$b(this.options.includePrerelease)),qe("hyphen replace",e),e=e.replace(_t[ft.COMPARATORTRIM],Pb),qe("comparator trim",e),e=e.replace(_t[ft.TILDETRIM],qb),e=e.replace(_t[ft.CARETTRIM],xb),e=e.split(/\s+/).join(" ");let a=e.split(" ").map(g=>kb(g,this.options)).join(" ").split(/\s+/).map(g=>jb(g,this.options));s&&(a=a.filter(g=>(qe("loose invalid filter",g,this.options),!!g.match(_t[ft.COMPARATORLOOSE])))),qe("range list",a);let u=new Map,l=a.map(g=>new Nd(g,this.options));for(let g of l){if(Jg(g))return[g];u.set(g.value,g)}u.size>1&&u.has("")&&u.delete("");let h=[...u.values()];return Qg.set(r,h),h}intersects(e,n){if(!(e instanceof yr))throw new TypeError("a Range is required");return this.set.some(r=>Yg(r,n)&&e.set.some(i=>Yg(i,n)&&r.every(s=>i.every(o=>s.intersects(o,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Tb(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(Hb(this.set[n],e,this.options))return!0;return!1}};Zg.exports=yr;var Sb=Pg(),Qg=new Sb({max:1e3}),wb=rs(),Nd=Xg(),qe=ts(),Tb=is(),{re:_t,t:ft,comparatorTrimReplace:Pb,tildeTrimReplace:qb,caretTrimReplace:xb}=ns(),Jg=t=>t.value==="<0.0.0-0",Eb=t=>t.value==="",Yg=(t,e)=>{let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(s=>i.intersects(s,e)),i=r.pop();return n},kb=(t,e)=>(qe("comp",t,e),t=Fb(t,e),qe("caret",t),t=Ob(t,e),qe("tildes",t),t=Mb(t,e),qe("xrange",t),t=Ab(t,e),qe("stars",t),t),ht=t=>!t||t.toLowerCase()==="x"||t==="*",Ob=(t,e)=>t.trim().split(/\s+/).map(n=>Ib(n,e)).join(" "),Ib=(t,e)=>{let n=e.loose?_t[ft.TILDELOOSE]:_t[ft.TILDE];return t.replace(n,(r,i,s,o,a)=>{qe("tilde",t,r,i,s,o,a);let u;return ht(i)?u="":ht(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:ht(o)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(qe("replaceTilde pr",a),u=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,qe("tilde return",u),u})},Fb=(t,e)=>t.trim().split(/\s+/).map(n=>Nb(n,e)).join(" "),Nb=(t,e)=>{qe("caret",t,e);let n=e.loose?_t[ft.CARETLOOSE]:_t[ft.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(i,s,o,a,u)=>{qe("caret",t,i,s,o,a,u);let l;return ht(s)?l="":ht(o)?l=`>=${s}.0.0${r} <${+s+1}.0.0-0`:ht(a)?s==="0"?l=`>=${s}.${o}.0${r} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.0${r} <${+s+1}.0.0-0`:u?(qe("replaceCaret pr",u),s==="0"?o==="0"?l=`>=${s}.${o}.${a}-${u} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}-${u} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a}-${u} <${+s+1}.0.0-0`):(qe("no pr"),s==="0"?o==="0"?l=`>=${s}.${o}.${a}${r} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}${r} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),qe("caret return",l),l})},Mb=(t,e)=>(qe("replaceXRanges",t,e),t.split(/\s+/).map(n=>Lb(n,e)).join(" ")),Lb=(t,e)=>{t=t.trim();let n=e.loose?_t[ft.XRANGELOOSE]:_t[ft.XRANGE];return t.replace(n,(r,i,s,o,a,u)=>{qe("xRange",t,r,i,s,o,a,u);let l=ht(s),h=l||ht(o),g=h||ht(a),p=g;return i==="="&&p&&(i=""),u=e.includePrerelease?"-0":"",l?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&p?(h&&(o=0),a=0,i===">"?(i=">=",h?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",h?s=+s+1:o=+o+1),i==="<"&&(u="-0"),r=`${i+s}.${o}.${a}${u}`):h?r=`>=${s}.0.0${u} <${+s+1}.0.0-0`:g&&(r=`>=${s}.${o}.0${u} <${s}.${+o+1}.0-0`),qe("xRange return",r),r})},Ab=(t,e)=>(qe("replaceStars",t,e),t.trim().replace(_t[ft.STAR],"")),jb=(t,e)=>(qe("replaceGTE0",t,e),t.trim().replace(_t[e.includePrerelease?ft.GTE0PRE:ft.GTE0],"")),$b=t=>(e,n,r,i,s,o,a,u,l,h,g,p,v)=>(ht(r)?n="":ht(i)?n=`>=${r}.0.0${t?"-0":""}`:ht(s)?n=`>=${r}.${i}.0${t?"-0":""}`:o?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,ht(l)?u="":ht(h)?u=`<${+l+1}.0.0-0`:ht(g)?u=`<${l}.${+h+1}.0-0`:p?u=`<=${l}.${h}.${g}-${p}`:t?u=`<${l}.${h}.${+g+1}-0`:u=`<=${u}`,`${n} ${u}`.trim()),Hb=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(qe(t[r].semver),t[r].semver!==Nd.ANY&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var tm=S((uT,em)=>{var Wb=Fd(),Ub=(t,e,n)=>{try{e=new Wb(e,n)}catch{return!1}return e.test(t)};em.exports=Ub});var rm=S(Tt=>{"use strict";var Kb=Tt&&Tt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Md=Tt&&Tt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Kb(e,t,n)};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.DiagnosticPullMode=Tt.vsdiag=void 0;Md(G(),Tt);Md(re(),Tt);var nm=Vu();Object.defineProperty(Tt,"vsdiag",{enumerable:!0,get:function(){return nm.vsdiag}});Object.defineProperty(Tt,"DiagnosticPullMode",{enumerable:!0,get:function(){return nm.DiagnosticPullMode}});Md(wd(),Tt)});var am=S(pt=>{"use strict";var zb=pt&&pt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),om=pt&&pt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&zb(e,t,n)};Object.defineProperty(pt,"__esModule",{value:!0});pt.SettingMonitor=pt.LanguageClient=pt.TransportKind=void 0;var xn=require("child_process"),Ld=require("fs"),Ad=require("path"),$n=require("vscode"),Re=Et(),im=wd(),Gb=eg(),xe=Td(),Bb=yg(),Vb=tm();om(Td(),pt);om(rm(),pt);var sm="^1.67.0",Fe;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(Fe=pt.TransportKind||(pt.TransportKind={}));var jn;(function(t){function e(n){let r=n;return r&&r.kind===Fe.socket&&Re.number(r.port)}t.isSocket=e})(jn||(jn={}));var jd;(function(t){function e(n){return Re.string(n.command)}t.is=e})(jd||(jd={}));var $d;(function(t){function e(n){return Re.string(n.module)}t.is=e})($d||($d={}));var Hd;(function(t){function e(n){let r=n;return r&&r.writer!==void 0&&r.reader!==void 0}t.is=e})(Hd||(Hd={}));var Wd;(function(t){function e(n){let r=n;return r&&r.process!==void 0&&typeof r.detached=="boolean"}t.is=e})(Wd||(Wd={}));var Ud=class extends im.BaseLanguageClient{constructor(e,n,r,i,s){let o,a,u,l,h;Re.string(n)?(o=e,a=n,u=r,l=i,h=!!s):(o=e.toLowerCase(),a=e,u=n,l=r,h=i),h===void 0&&(h=!1),super(o,a,l),this._serverOptions=u,this._forceDebug=h,this._isInDebugMode=h;try{this.checkVersion()}catch(g){throw Re.string(g.message)&&this.outputChannel.appendLine(g.message),g}}checkVersion(){let e=Bb($n.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${$n.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!Vb(e,sm))throw new Error(`The language client requires VS Code version ${sm} but received version ${$n.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let n=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(n),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,Gb.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function n(h,g){if(!h&&!g)return;let p=Object.create(null);return Object.keys(process.env).forEach(v=>p[v]=process.env[v]),g&&(p.ELECTRON_RUN_AS_NODE="1",p.ELECTRON_NO_ASAR="1"),h&&Object.keys(h).forEach(v=>p[v]=h[v]),p}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let h=process.execArgv;return h?h.some(g=>r.some(p=>g.startsWith(p))||i.some(p=>g===p)):!1}function o(h){if(h.stdin===null||h.stdout===null||h.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(Re.func(a))return a().then(h=>{if(im.MessageTransports.is(h))return this._isDetached=!!h.detached,h;if(Hd.is(h))return this._isDetached=!!h.detached,{reader:new xe.StreamMessageReader(h.reader),writer:new xe.StreamMessageWriter(h.writer)};{let g;return Wd.is(h)?(g=h.process,this._isDetached=h.detached):(g=h,this._isDetached=!1),g.stderr.on("data",p=>this.outputChannel.append(Re.string(p)?p:p.toString(e))),{reader:new xe.StreamMessageReader(g.stdout),writer:new xe.StreamMessageWriter(g.stdin)}}});let u,l=a;return l.run||l.debug?this._forceDebug||s()?(u=l.debug,this._isInDebugMode=!0):(u=l.run,this._isInDebugMode=!1):u=a,this._getServerWorkingDir(u.options).then(h=>{if($d.is(u)&&u.module){let g=u,p=g.transport||Fe.stdio;if(g.runtime){let v=[],y=g.options??Object.create(null);y.execArgv&&y.execArgv.forEach(x=>v.push(x)),v.push(g.module),g.args&&g.args.forEach(x=>v.push(x));let _=Object.create(null);_.cwd=h,_.env=n(y.env,!1);let b=this._getRuntimePath(g.runtime,h),w;if(p===Fe.ipc?(_.stdio=[null,null,null,"ipc"],v.push("--node-ipc")):p===Fe.stdio?v.push("--stdio"):p===Fe.pipe?(w=(0,xe.generateRandomPipeName)(),v.push(`--pipe=${w}`)):jn.isSocket(p)&&v.push(`--socket=${p.port}`),v.push(`--clientProcessId=${process.pid.toString()}`),p===Fe.ipc||p===Fe.stdio){let x=xn.spawn(b,v,_);return!x||!x.pid?ri(x,`Launching server using runtime ${b} failed.`):(this._serverProcess=x,x.stderr.on("data",E=>this.outputChannel.append(Re.string(E)?E:E.toString(e))),p===Fe.ipc?(x.stdout.on("data",E=>this.outputChannel.append(Re.string(E)?E:E.toString(e))),Promise.resolve({reader:new xe.IPCMessageReader(x),writer:new xe.IPCMessageWriter(x)})):Promise.resolve({reader:new xe.StreamMessageReader(x.stdout),writer:new xe.StreamMessageWriter(x.stdin)}))}else{if(p===Fe.pipe)return(0,xe.createClientPipeTransport)(w).then(x=>{let E=xn.spawn(b,v,_);return!E||!E.pid?ri(E,`Launching server using runtime ${b} failed.`):(this._serverProcess=E,E.stderr.on("data",F=>this.outputChannel.append(Re.string(F)?F:F.toString(e))),E.stdout.on("data",F=>this.outputChannel.append(Re.string(F)?F:F.toString(e))),x.onConnected().then(F=>({reader:F[0],writer:F[1]})))});if(jn.isSocket(p))return(0,xe.createClientSocketTransport)(p.port).then(x=>{let E=xn.spawn(b,v,_);return!E||!E.pid?ri(E,`Launching server using runtime ${b} failed.`):(this._serverProcess=E,E.stderr.on("data",F=>this.outputChannel.append(Re.string(F)?F:F.toString(e))),E.stdout.on("data",F=>this.outputChannel.append(Re.string(F)?F:F.toString(e))),x.onConnected().then(F=>({reader:F[0],writer:F[1]})))})}}else{let v;return new Promise((y,_)=>{let b=(g.args&&g.args.slice())??[];p===Fe.ipc?b.push("--node-ipc"):p===Fe.stdio?b.push("--stdio"):p===Fe.pipe?(v=(0,xe.generateRandomPipeName)(),b.push(`--pipe=${v}`)):jn.isSocket(p)&&b.push(`--socket=${p.port}`),b.push(`--clientProcessId=${process.pid.toString()}`);let w=g.options??Object.create(null);if(w.env=n(w.env,!0),w.execArgv=w.execArgv||[],w.cwd=h,w.silent=!0,p===Fe.ipc||p===Fe.stdio){let x=xn.fork(g.module,b||[],w);o(x),this._serverProcess=x,x.stderr.on("data",E=>this.outputChannel.append(Re.string(E)?E:E.toString(e))),p===Fe.ipc?(x.stdout.on("data",E=>this.outputChannel.append(Re.string(E)?E:E.toString(e))),y({reader:new xe.IPCMessageReader(this._serverProcess),writer:new xe.IPCMessageWriter(this._serverProcess)})):y({reader:new xe.StreamMessageReader(x.stdout),writer:new xe.StreamMessageWriter(x.stdin)})}else p===Fe.pipe?(0,xe.createClientPipeTransport)(v).then(x=>{let E=xn.fork(g.module,b||[],w);o(E),this._serverProcess=E,E.stderr.on("data",F=>this.outputChannel.append(Re.string(F)?F:F.toString(e))),E.stdout.on("data",F=>this.outputChannel.append(Re.string(F)?F:F.toString(e))),x.onConnected().then(F=>{y({reader:F[0],writer:F[1]})},_)},_):jn.isSocket(p)&&(0,xe.createClientSocketTransport)(p.port).then(x=>{let E=xn.fork(g.module,b||[],w);o(E),this._serverProcess=E,E.stderr.on("data",F=>this.outputChannel.append(Re.string(F)?F:F.toString(e))),E.stdout.on("data",F=>this.outputChannel.append(Re.string(F)?F:F.toString(e))),x.onConnected().then(F=>{y({reader:F[0],writer:F[1]})},_)},_)})}}else if(jd.is(u)&&u.command){let g=u,p=u.args!==void 0?u.args.slice(0):[],v,y=u.transport;if(y===Fe.stdio)p.push("--stdio");else if(y===Fe.pipe)v=(0,xe.generateRandomPipeName)(),p.push(`--pipe=${v}`);else if(jn.isSocket(y))p.push(`--socket=${y.port}`);else if(y===Fe.ipc)throw new Error("Transport kind ipc is not support for command executable");let _=Object.assign({},g.options);if(_.cwd=_.cwd||h,y===void 0||y===Fe.stdio){let b=xn.spawn(g.command,p,_);return!b||!b.pid?ri(b,`Launching server using command ${g.command} failed.`):(b.stderr.on("data",w=>this.outputChannel.append(Re.string(w)?w:w.toString(e))),this._serverProcess=b,this._isDetached=!!_.detached,Promise.resolve({reader:new xe.StreamMessageReader(b.stdout),writer:new xe.StreamMessageWriter(b.stdin)}))}else{if(y===Fe.pipe)return(0,xe.createClientPipeTransport)(v).then(b=>{let w=xn.spawn(g.command,p,_);return!w||!w.pid?ri(w,`Launching server using command ${g.command} failed.`):(this._serverProcess=w,this._isDetached=!!_.detached,w.stderr.on("data",x=>this.outputChannel.append(Re.string(x)?x:x.toString(e))),w.stdout.on("data",x=>this.outputChannel.append(Re.string(x)?x:x.toString(e))),b.onConnected().then(x=>({reader:x[0],writer:x[1]})))});if(jn.isSocket(y))return(0,xe.createClientSocketTransport)(y.port).then(b=>{let w=xn.spawn(g.command,p,_);return!w||!w.pid?ri(w,`Launching server using command ${g.command} failed.`):(this._serverProcess=w,this._isDetached=!!_.detached,w.stderr.on("data",x=>this.outputChannel.append(Re.string(x)?x:x.toString(e))),w.stdout.on("data",x=>this.outputChannel.append(Re.string(x)?x:x.toString(e))),b.onConnected().then(x=>({reader:x[0],writer:x[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))})}_getRuntimePath(e,n){if(Ad.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=Ad.join(r,e);if(Ld.existsSync(i))return i}if(n!==void 0){let i=Ad.join(n,e);if(Ld.existsSync(i))return i}return e}_mainGetRootPath(){let e=$n.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}_getServerWorkingDir(e){let n=e&&e.cwd;return n||(n=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),n?new Promise(r=>{Ld.lstat(n,(i,s)=>{r(!i&&s.isDirectory()?n:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return"en";let n;try{n=JSON.parse(e)}catch{}return n===void 0||typeof n.locale!="string"?"en":n.locale}};pt.LanguageClient=Ud;var Kd=class{constructor(e,n){this._client=e,this._setting=n,this._listeners=[]}start(){return $n.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new $n.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),n=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?$n.workspace.getConfiguration(n).get(r,!1):$n.workspace.getConfiguration(n);i&&this._client.needsStart()?this._client.start().catch(s=>this._client.error("Start failed after configuration change",s,"force")):!i&&this._client.needsStop()&&this._client.stop().catch(s=>this._client.error("Stop failed after configuration change",s,"force"))}};pt.SettingMonitor=Kd;function ri(t,e){return t===null?Promise.reject(e):new Promise((n,r)=>{t.on("error",i=>{r(`${e} ${i}`)}),setImmediate(()=>r(e))})}});var um=S((fT,cm)=>{"use strict";cm.exports=am()});var Jb={};Jd(Jb,{activate:()=>Xb,deactivate:()=>Qb});module.exports=ds(Jb);var lm=Zd(require("path")),ii=require("vscode"),cs=Zd(um()),jo;function Xb(t){let e=t.asAbsolutePath(lm.join("dist","server.js")),n={execArgv:["--nolazy","--inspect=6009"]},r={run:{module:e,transport:cs.TransportKind.ipc},debug:{module:e,transport:cs.TransportKind.ipc,options:n}},o={documentSelector:ii.workspace.getConfiguration("cssVariables").get("languages",["astro","svelte","vue","vue-html","vue-postcss","scss","postcss","less","css","html","javascript","javascriptreact","typescript","typescriptreact","source.css.styled"]).map(a=>({scheme:"file",language:a})),synchronize:{fileEvents:[ii.workspace.createFileSystemWatcher("**/*.css"),ii.workspace.createFileSystemWatcher("**/*.scss"),ii.workspace.createFileSystemWatcher("**/*.sass"),ii.workspace.createFileSystemWatcher("**/*.less")]}};jo=new cs.LanguageClient("cssVariables","CSS Variables Language Server",r,o),jo.start()}function Qb(){if(!!jo)return jo.stop()}0&&(module.exports={activate,deactivate});
